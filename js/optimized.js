
/**
*
* Copyright © 2009-2016 Apple Inc.  All rights reserved.
*
**/

var iAd={};iAd.VERSION="1.8";
/**
*
* Copyright © 2009-2016 Apple Inc.  All rights reserved.
*
**/

iAd.Utils={};iAd.Utils.copyPropertiesFromSourceToTarget=function(b,c){for(var a in b){c[a]=b[a]}};iAd.Utils.objectIsFunction=function(a){return(typeof a=="function")};iAd.Utils.objectIsString=function(a){return(typeof a=="string"||a instanceof String)};iAd.Utils.objectIsArray=function(a){return(a instanceof Array)};iAd.Utils.objectIsPrimitive=function(a){return(a==null||typeof a=="number"||typeof a=="boolean"||this.objectIsString(a))};iAd.Utils.objectIsBoolean=function(a){return(typeof a==="boolean")};iAd.Utils.objectIsNumber=function(a){return(typeof a=="number")};iAd.Utils.objectIsInteger=function(a){return iAd.Utils.objectIsNumber(a)&&isFinite(a)&&a%1==0};iAd.Utils.objectIsFiniteNumber=function(a){return iAd.Utils.objectIsNumber(a)&&isFinite(a)&&!isNaN(a)};iAd.Utils.objectIsDefined=function(a){return a!==undefined};iAd.Utils.objectIsDefinedAndNotNull=function(a){return a!=null};iAd.Utils.objectHasMethod=function(b,a){return(b!=null&&b[a]!==undefined&&this.objectIsFunction(b[a]))};iAd.Utils.objectIsInstanceOfClass=function(a,b){return(b!=null)&&(a instanceof b)};iAd.Utils.classInheritsFrom=function(c,a){var b=iAd.Utils.objectIsFunction(c)&&iAd.Utils.objectIsFunction(a);if(!b){throw"Arguments must be constructors"}while(!!c){if(c===a){return true}else{if(iAd.Utils.objectIsFunction(c.superclass)){c=c.superclass}else{c=null}}}return false};iAd.Utils.resolveObjectPathFrom=function(d,h,f){if(!h||h[0]=="."){return undefined}var c=h.split(".");var a,b;for(var e=0,g=c.length;d!=null&&e<g;e++){b=c[e];a=d[b];if(f&&a==null){a=d[b]={}}d=a}return d};iAd.Utils.resolveObjectPath=function(b,a){return iAd.Utils.resolveObjectPathFrom(window,b,a)};iAd.Utils.setupDisplayNames=function(b,a){a=a||b.displayName||b.name;b.displayName=b.displayName||a;var c;for(c in b){if(b.__lookupGetter__(c)){continue}var e=b[c];if(iAd.Utils.objectIsFunction(e)){e.displayName=iAd.Utils.createDisplayName(a,c)}}for(c in b.prototype){if(b.prototype.__lookupGetter__(c)){continue}var d=Object.getOwnPropertyDescriptor(b.prototype,c);if(d&&iAd.Utils.objectIsFunction(d.value)){b.prototype[c].displayName=iAd.Utils.createDisplayName(a,c,true)}}b.callOriginal=function(){var f=b.callOriginal.caller;if(f._originalMethod){return f._originalMethod.apply(this,arguments)}}};iAd.Utils.createDisplayName=function(c,a,b){return c+(b?".":"#")+a+"()"};iAd.Utils.setupDisplayNames(iAd.Utils,"iAd.Utils");
/**
*
* Copyright © 2009-2016 Apple Inc.  All rights reserved.
*
**/

var iAP={};iAP.supportsNewCSSBrightnessFilter=(function(){var a=navigator.userAgent.match(/WebKit\/([0-9]+)/);if(!a){return true}return a[1]>=537})();iAP.Context={};(function(){var a=window.navigator.platform;iAP.Context.IS_IOS_SIMULATOR=navigator.platform=="iPhone Simulator"||navigator.platform=="iPad Simulator";iAP.Context.IS_IOS=iAP.Context.IS_IOS_SIMULATOR||["iPhone","iPod","iPod touch","iPad"].indexOf(a)!=-1;iAP.Context.IS_OSX=a.indexOf("Mac")!=-1;iAP.Context.IS_WINDOWS=a.indexOf("Win")!=-1;iAP.Context.IS_DESKTOP=iAP.Context.IS_OSX||iAP.Context.IS_WINDOWS;iAP.Context.IS_IAD=!!window.ad;iAP.Context.IS_IAD_PRODUCER=!!window.editorProxy;iAP.Context.IS_QUICK_PREVIEW=!!window.iAPDebug&&!!window.iAPDebug.requestToClosePreview;iAP.Context.IS_ITUNES=!!window.iTunes;iAP.Context.IS_IBOOKS=!!window.widget;iAP.Context.IS_SAFARI=!iAP.Context.IS_IAD_PRODUCER&&!iAP.Context.IS_IAD&&!iAP.Context.IS_ITUNES&&!iAP.Context.IS_IBOOKS;var b=Object.keys(iAP.Context);window.addEventListener("DOMContentLoaded",function(){b.forEach(function(c){if(iAP.Context[c]){document.body.addClassName("iap-context-"+c)}})},true)})();iAP.Context.projectIsOfType=function(a){return document.body.hasClassName("iap-"+a)};iAP.Context.projectSupportsDevice=function(a){return document.body.hasClassName("iap-supported-device-"+a)};iAd.Utils.replaceMethod=function(b,a,d){try{if(b.hasOwnProperty("processed")){iAd.Class.processMethod(b,a);b=b.prototype}d._originalMethod=b[a];b[a]=d}catch(c){console.error("Could not replace method",a,"on",b)}};iAd.Utils.isRunningInAdContext=window.hasOwnProperty("ad");iAd.Utils.unique=(function(){var a={};function b(d){var c=a[d];if(!c){c=a[d]={count:0}}return c}return function(d,e){var f,c;f=e||"IAD_UTILS_SHARED_UNIQUE";c=b(f);c.count+=1;if(!d){return c.count}if(typeof d==="function"){return d(c.count)}return d+c.count}}());(function(){var a=window.webkitConvertPointFromPageToNode;window.webkitConvertPointFromPageToNode=function(d,f){var e=a.apply(window,arguments);if(iAd.Utils.pageZoomElement()==d||iAd.Utils.pageZoomElement().contains(d)){var c=iAd.Utils.pageZoom();if(c!=1){e.x/=c;e.y/=c}}return e};var b=window.webkitConvertPointFromNodeToPage;window.webkitConvertPointFromNodeToPage=function(d,e){if(iAd.Utils.pageZoomElement()==d||iAd.Utils.pageZoomElement().contains(d)){var c=iAd.Utils.pageZoom();if(c!=1){e.x*=c;e.y*=c}}return b.call(window,d,e)}})();iAd.Utils.pageZoomElement=function(){return document.body};iAd.Utils.pageZoom=function(){return parseFloat((window._getComputedStyle||window.getComputedStyle)(iAd.Utils.pageZoomElement()).zoom)||1};iAd.Utils.didHandleUnsupportedAction=function(a,b){if(window.iAPDebug!=null&&window.iAPDebug.willHandleUnsupportedContent){window.iAPDebug.willHandleUnsupportedContent(a,b);return true}else{if(iAP.Context.IS_SAFARI||(iAP.Context.IS_IOS_SIMULATOR&&b=="Device")||(!iAP.Context.IS_ITUNES&&b=="iTunes")){alert(a);return true}}return false};iAd.Utils.openAdUnit=function(){if(window.iTunes&&iTunes.openAdWindow){iTunes.openAdWindow({id:"AdUnit",url:"../../../AdUnit/index.html"})}else{iAd.Console.warn("iAd.Utils: openAdWindow is only supported for desktop iTunes iAd")}};iAd.Utils.close=function(){if(window.iTunes&&iTunes.window&&iTunes.window.close){iTunes.window.close()}else{iAd.Console.warn("iAd.Utils: closeAd is only supported for desktop iTunes iAd")}};iAd.Utils.ITMS_URL_REGEX=/^https?(:\/\/(phobos|itunes)\.apple\.com\/)/i;iAd.Utils.ITMS_APP_URL_REGEX=/^https?(:\/\/(phobos|itunes)\.apple\.com\/([a-z]+\/)?app\/)/i;iAd.Utils.ITMS_BOOK_URL_REGEX=/^https?(:\/\/(phobos|itunes)\.apple\.com\/([a-z]+\/)?book\/)/i;iAd.Utils.ITMS_RADIO_URL_REGEX=/^https?(:\/\/(phobos|itunes)\.apple\.com\/.*\/(station\/|viewRadioStation))/i;iAd.Utils.openURL=function(d){if(window.iTunes&&iTunes.openURLInBrowser){iTunes.openURLInBrowser(d);return}var f=document.createElement("a");if(iAP.Context.IS_SAFARI){f.target="_blank"}if(iAP.Context.IS_IOS){if(iAP.Context.IS_IAD&&!iAd.Device.iOSVersionLessThan("6.0")){d=d.replace(iAd.Utils.ITMS_APP_URL_REGEX,"itms-apps$1");d=d.replace(iAd.Utils.ITMS_RADIO_URL_REGEX,"itunesradio$1");d=d.replace(iAd.Utils.ITMS_URL_REGEX,"itms$1")}}else{if(!d.match(iAd.Utils.ITMS_APP_URL_REGEX)&&!d.match(iAd.Utils.ITMS_BOOK_URL_REGEX)){if(d.match(iAd.Utils.ITMS_RADIO_URL_REGEX)&&!d.match("cmd=AddStation")){var c=d.indexOf("?")===-1?"?":"&";d+=c+"cmd=AddStation";d=d.replace(iAd.Utils.ITMS_RADIO_URL_REGEX,"itunesradio$1")}d=d.replace(iAd.Utils.ITMS_URL_REGEX,"itms$1")}}f.href=d;var e=document.createEvent("Event");e.initEvent("click",true,false);f.dispatchEvent(e);if(iAP.Context.IS_SAFARI&&!iAP.Context.IS_QUICK_PREVIEW){var b;var a=function(){window.removeEventListener("blur",a);clearTimeout(b)};window.addEventListener("blur",a);var g=function(){window.removeEventListener("blur",a);window.location=d};b=setTimeout(g,1000)}iAd.RootViewController.sharedRootViewController.beginIgnoringInteractionEvents();setTimeout(function(){iAd.RootViewController.sharedRootViewController.endIgnoringInteractionEvents()},0)};iAd.Utils.urlHasValidProtocol=function(a){return a&&a.match(/^[a-z0-9-]+:/i)};iAd.Utils.archiveOriginalValue=function(b,a){if(!b._originalValues){b._originalValues={}}if(b._originalValues[a]!==undefined){return}b._originalValues[a]=b[a]};iAd.Utils.restoreOriginalValue=function(b,a){if(!b._originalValues||b._originalValues[a]===undefined){b[a]=b[a];return}b[a]=b._originalValues[a]};iAd.Utils.getOriginalValue=function(b,a){if(!b._originalValues||b._originalValues[a]===undefined){return b[a]}return b._originalValues[a]};iAd.Utils.updateOriginalValue=function(b,a){if(!b._originalValues||b._originalValues[a]===undefined){return}b._originalValues[a]=b[a]};iAd.Utils.humanRandomIndex=function(b){if(!b.length){return -1}b.humanRandomIndexPreviousIndices=b.humanRandomIndexPreviousIndices||[];b.humanRandomIndexI=b.humanRandomIndexI||0;var a;do{a=Math.floor(Math.random()*b.length)}while(b.length>1&&b.humanRandomIndexPreviousIndices.indexOf(a)!=-1);b.humanRandomIndexPreviousIndices[b.humanRandomIndexI]=a;b.humanRandomIndexI=(b.humanRandomIndexI+1)%Math.ceil(b.length/5);return a};
/**
*
* Copyright © 2009-2016 Apple Inc.  All rights reserved.
*
**/

iAd.Class=function(b){if(typeof b==="string"){b={name:b}}b=b||{};b.symbol=b.symbol===undefined?b.name:b.symbol;b.name=b.name||"AnonymousClass";if(!b.superclass){if("superclass" in b){throw new ReferenceError("An undefined superclass was provided for "+b.name)}else{if(iAd.Object){b.superclass=iAd.Object}}}var e=function(){if(!e.processed){iAd.Class.processAllClasses()}e.prototype.init.apply(this,arguments)};e.processed=false;iAd.Class.unprocessedClasses.push(e);e.displayName=e._name=b.name;iAd.Utils.copyPropertiesFromSourceToTarget(b,e);if(b.symbol&&typeof b.symbol==="string"){var d=b.symbol.split("."),c=d.pop(),a=d.length?iAd.Utils.resolveObjectPath(d.join("."),true):window;if(a){a[c]=e}}return e};iAd.Class.unprocessedClasses=[];iAd.Class.processAllClasses=function(){var c;for(var a=0,b=iAd.Class.unprocessedClasses.length;a<b;a++){c=iAd.Class.unprocessedClasses[a];if(!c.processed){iAd.Class.processClassAndHierarchy(c)}}iAd.Class.unprocessedClasses=[]};iAd.Class.processClassAndHierarchy=function(f){var e=[f];var b=f;while(b=b.superclass){e.push(b)}var a;for(var c=e.length-1;c>=0;c--){a=e[c];if(!a.processed){iAd.Class.processClass(a)}}var d;for(var c=e.length-1;c>=0;c--){d=e[c];if(iAd.Utils.objectHasMethod(d,"initialize")){d.initialize.apply(f)}}};iAd.Class.processClass=function(e){if(e.mixins){iAd.Class.mixin(e.prototype,e.mixins)}var b=e.synthesizedProperties||[];for(var a=0,c=b.length;a<c;a++){iAd.Class.synthesizeProperty(e.prototype,b[a])}for(var d in e.prototype){iAd.Class.processMethod(e,d)}for(d in e){if(e.hasOwnProperty(d)){iAd.Class.processClassMethod(e,d)}}if(e!==iAd.Object){e.prototype.__proto__=e.superclass.prototype}e.processed=true};iAd.Class.synthesizeProperty=function(c,b){var h=b.charAt(0).toUpperCase()+b.substr(1);var e="get"+h;var a="set"+h;var d="_"+b;if(!iAd.Utils.objectHasMethod(c,a)){c[a]=function(i){this[d]=i}}var g=function(i){this[a](i);this.notifyPropertyChange(b)};g.displayName="Setter for ."+b+" on "+c.constructor.displayName;if(!iAd.Utils.objectHasMethod(c,e)){c[e]=function(){return this[d]}}var f=function(){return this[e]()};f.displayName="Getter for ."+b+" on "+c.constructor.displayName;Object.defineProperty(c,b,{get:f,set:g})};iAd.Class.processMethod=function(c,a){var b=Object.getOwnPropertyDescriptor(c.prototype,a).value;if(iAd.Utils.objectIsFunction(b)){b._class=c;b._name=a;if(b.displayName==null){b.displayName=iAd.Utils.createDisplayName(c.displayName,a)}}};iAd.Class.processClassMethod=function(c,a){var b=Object.getOwnPropertyDescriptor(c,a).value;if(iAd.Utils.objectIsFunction(b)&&b.displayName==null){b.displayName=iAd.Utils.createDisplayName(c.displayName,a,true)}};iAd.Class.mixin=function(e,a){var b;for(var c=0,d=a.length;c<d;c++){b=a[c];for(var f in b){if(!e.hasOwnProperty(f)){e[f]=b[f]}}}};iAd.Class.synthesizeProperties=function(d,a){iAd.Class.processClassAndHierarchy(d);for(var b=0,c=a.length;b<c;b++){iAd.Class.synthesizeProperty(d.prototype,a[b])}};iAd.Class.processMethods=function(d,c){iAd.Class.processClassAndHierarchy(d);for(var a=0,b=c.length;a<b;a++){iAd.Class.processMethod(d,c[a])}};iAd.Utils.setupDisplayNames(iAd.Class,"iAd.Class");
/**
*
* Copyright © 2009-2016 Apple Inc.  All rights reserved.
*
**/

iAd.Class({name:"iAd.Object",archivedProperties:["delegate","dataSource"]});iAd.Object.PROPERTY_CHANGED="handlePropertyChange";iAd.Object.prototype.init=function(){this.observedProperties={}};iAd.Object.DELEGATE_REG_EXP=/delegate/i;iAd.Object.DATA_SOURCE_REG_EXP=/dataSource/i;iAd.Object.prototype.archiveProperty=function(b){var a=this[b];if(iAd.Object.DELEGATE_REG_EXP.test(b)||iAd.Object.DATA_SOURCE_REG_EXP.test(b)){if(iAd.Utils.objectIsInstanceOfClass(a,iAd.ViewController)){return a.id}return a?iAd.Archiver.referenceForObject(a):null}return a};iAd.Object.prototype.restoreProperty=function(b,a){if(iAd.Object.DELEGATE_REG_EXP.test(b)||iAd.Object.DATA_SOURCE_REG_EXP.test(b)){if(iAd.ViewController&&iAd.ViewController.instances[a]){a=iAd.ViewController.instances[a]}else{a=iAd.Archiver.objectForReference(a)}}this[b]=a};iAd.Object.prototype.callSuper=function(){var a=iAd.Object.prototype.callSuper.caller;if(iAd.Utils.objectHasMethod(a,"superclass")){a.superclass.apply(this,arguments)}else{var c=a._class.superclass.prototype;var b=a._name;if(iAd.Utils.objectHasMethod(c,b)){return c[b].apply(this,arguments)}}};iAd.Object.prototype.isPropertyObserved=function(a){return(this.observedProperties[a]!==undefined)};iAd.Object.prototype.addPropertyObserver=function(c,b,a){var d=this.observedProperties[c];if(!this.isPropertyObserved(c)){d=this.observedProperties[c]={targets:[],methodNames:[]}}else{if(d.targets.indexOf(b)>-1){return}}var a=a||iAd.Object.PROPERTY_CHANGED;if(iAd.Utils.objectHasMethod(b,a)){d.targets.push(b);d.methodNames.push(a)}};iAd.Object.prototype.removePropertyObserver=function(c,b){if(!this.isPropertyObserved(c)){return false}var e=this.observedProperties[c];var d=e.targets.indexOf(b);var a=d>-1;if(a){e.targets.splice(d,1);e.methodNames.splice(d,1);if(e.targets.length==0){delete this.observedProperties[c]}}return a};iAd.Object.prototype.notifyPropertyChange=function(b){if(!this.isPropertyObserved(b)){return}var f=this.observedProperties[b];var a=f.targets.slice();var e=f.methodNames.slice();for(var c=0,d=a.length;c<d;c++){a[c][e[c]](this,b)}};iAd.Object.prototype.callMethodNameAfterDelay=function(a,d){var e=this;var c=Array.prototype.slice.call(arguments,2);var b=function(){e[a].apply(e,c)};b.displayName=iAd.Utils.createDisplayName(this.constructor.displayName||this.constructor.name,a);return setTimeout(b,d*1000)};
/**
*
* Copyright © 2009-2016 Apple Inc.  All rights reserved.
*
**/

iAd.Event={};iAd.Event.notificationEvents={};iAd.Event.registerForNotificationEvent=function(a){iAd.Event.notificationEvents[a]=true};iAd.Event.SUPPORTS_TOUCHES=("createTouch" in document);iAd.Event.START_EVENT=iAd.Event.SUPPORTS_TOUCHES?"touchstart":"mousedown";iAd.Event.MOVE_EVENT=iAd.Event.SUPPORTS_TOUCHES?"touchmove":"mousemove";iAd.Event.END_EVENT=iAd.Event.SUPPORTS_TOUCHES?"touchend":"mouseup";iAd.Event.CANCEL_EVENT="touchcancel";iAd.Event.createUIEvent=function(a,b){return iAd.Event.SUPPORTS_TOUCHES?this.createEventWithTouch(a,b):this.createEventWithMouse(a,b)};iAd.Event.createEventWithTouch=function(b,a){var c=document.createEvent("TouchEvent");c.initTouchEvent(b,a.bubbles,a.cancelable,window,a.detail,a.screenX,a.screenY,a.clientX,a.clientY,a.ctrlKey,a.altKey,a.shiftKey,a.metaKey,a.touches,a.targetTouches,a.changedTouches,a.scale,a.rotation);return c};iAd.Event.createEventWithMouse=function(a,c){var b=document.createEvent("MouseEvent");b.initMouseEvent(a,c.bubbles,c.cancelable,document.defaultView,c.detail,c.screenX,c.screenY,c.clientX,c.clientY,c.ctrlKey,c.altKey,c.shiftKey,c.metaKey,c.metaKey,c.button,c.relatedTarget);return b};iAd.Event.preventDefault=function(a){a.preventDefault()};iAd.Event.eventHandlerForString=function(a){var b=new Function(a);return function(c){b.call(null,c)}};iAd.Event.KEYBOARD_BACKSPACE=8;iAd.Event.KEYBOARD_LEFT=37;iAd.Event.KEYBOARD_RIGHT=39;iAd.Event.KEYBOARD_UP=38;iAd.Event.KEYBOARD_DOWN=40;iAd.Event.KEYBOARD_RETURN=13;iAd.Utils.setupDisplayNames(iAd.Event,"iAd.Event");
/**
*
* Copyright © 2009-2016 Apple Inc.  All rights reserved.
*
**/

iAd.EventTarget={};iAd.EventTarget.addEventListener=function(b,c,a){if(!this.eventTarget){iAd.Console.warn("iAd.EventTarget.addEventListener: cannot add event listener since no eventTarget was specified by the mixing object.");return}iAd.Event.registerForNotificationEvent(b);this.eventTarget.addEventListener(b,c,a)};iAd.EventTarget.removeEventListener=function(b,c,a){if(!this.eventTarget){iAd.Console.warn("iAd.EventTarget.removeEventListener: cannot remove event listener since no eventTarget was specified by the mixing object.");return}this.eventTarget.removeEventListener(b,c,a)};iAd.EventTarget.dispatchEvent=function(b){if(!this.eventTarget){iAd.Console.warn("iAd.EventTarget.dispatchEvent: cannot dispatch event since no eventTarget was specified by the mixing object.");return}this.eventTarget.dispatchEvent(b);var a=b.ad||{};this._createAndDispatchEventAnalyticsObject(b.type,this,a)};iAd.EventTarget.dispatchNotification=function(b,a,c){this.notifyDelegate(b,a,c);this.createAndDispatchEvent(b,c)};iAd.EventTarget.notifyDelegate=function(c,b,d){if(iAd.Utils.objectHasMethod(b,c)){var a=[this];if(d){a=a.concat(d.map(function(e){return e[1]}))}b[c].apply(b,a)}};iAd.EventTarget.createEvent=function(a,c){var b=document.createEvent("Event");b.initEvent(a,true,false);if(!b.ad){b.ad={}}b.ad.sender=this;if(c){this._addParamtersToEventObject(c,b.ad)}return b};iAd.EventTarget.createAndDispatchEvent=function(b,c){if(!iAd.Event.notificationEvents[b]){var a=this._addParamtersToEventObject(c,{});this._createAndDispatchEventAnalyticsObject(b,this,a);return}this.dispatchEvent(this.createEvent(b,c))};iAd.EventTarget._addParamtersToEventObject=function(b,a){var d=a||{};if(b){for(var c=0,e=b.length;c<e;c++){d[b[c][0]]=b[c][1]}}return d};iAd.EventTarget._createAndDispatchEventAnalyticsObject=function(c,b,a){if(!iAd.Analytics){return}var d={type:c,sender:b,eventParameters:a};iAd.Analytics._routeEventToHandler(d)};iAd.Utils.setupDisplayNames(iAd.EventTarget,"iAd.EventTarget");
/**
*
* Copyright © 2009-2016 Apple Inc.  All rights reserved.
*
**/

iAd.String={};iAd.String.dashedStringToCamelCase=function(a){var b=a.split("-");return b.shift()+b.map(iAd.String.capitalizeString).join("")};iAd.String.capitalizeString=function(a){return a.charAt(0).toUpperCase()+a.substr(1)};iAd.String.camelCaseStringToDashed=function(a){return a.replace(/([A-Z])/g,function(b){return"-"+b.toLowerCase()})};iAd.String.REPLACEMENT_SENTINEL="%@";iAd.String.REPLACEMENT_SENTINEL_LENGTH=iAd.String.REPLACEMENT_SENTINEL.length;iAd.String.format=function(){var g=arguments.length;if(!g){return""}var c=arguments[0];var a="";var f=0;var e=0;var d;for(d=1;d<g&&(e=c.indexOf(iAd.String.REPLACEMENT_SENTINEL,f))>=0;++d){a+=c.slice(f,e);a+=arguments[d];f=e+iAd.String.REPLACEMENT_SENTINEL_LENGTH}var b=c.slice(f);a+=b;if(d<g){iAd.Console.warn("String.format - More arguments than specifiers")}if(b.indexOf(iAd.String.REPLACEMENT_SENTINEL)!==-1){iAd.Console.warn("String.format - More specifiers than arguments")}return a};iAd.Utils.setupDisplayNames(iAd.String,"iAd.String");
/**
*
* Copyright © 2009-2016 Apple Inc.  All rights reserved.
*
**/

iAd.Content={};iAd.Content._optionsForParameter={};iAd.Content._valueForParameter={};iAd.Content._content={};iAd.Content.eventTarget=document;iAd.Content.CONTENT_DID_CHANGE="contentDidChange";iAd.Content.defineParameter=function(b,a){if(this._optionsForParameter[b]){iAd.Content.clearValueForParameter(b)}this._optionsForParameter[b]=a};iAd.Content.valueForParameter=function(a){return this._valueForParameter[a]};iAd.Content.setValueForParameter=function(a,b){this._validateParameterAndOption(b,a);if(this._valueForParameter[b]===a){return}this._valueForParameter[b]=a;this.createAndDispatchEvent(iAd.Content.CONTENT_DID_CHANGE)};iAd.Content.clearValueForParameter=function(a){if(!this._valueForParameter.hasOwnProperty(a)){return}delete this._valueForParameter[a];this.createAndDispatchEvent(iAd.Content.CONTENT_DID_CHANGE)};iAd.Content.defineContent=function(l,f){for(var h in l){if(!l.hasOwnProperty(h)){continue}var c=l[h];this._validateParameterAndOption(h,c)}for(var k in f){var j=f[k];var g=false;var a=this._content[k];if(a){for(var b=0,d=a.length;b<d;b++){var e=a[b];if(this._parametersMatch(e.parameters,l)){e.value=j;g=true;break}}}else{a=this._content[k]=[]}if(g){continue}var m={};iAd.Utils.copyPropertiesFromSourceToTarget(l,m);a.push({parameters:m,value:j})}this.createAndDispatchEvent(iAd.Content.CONTENT_DID_CHANGE)};iAd.Content.contentForKey=function(c){var a=this._content[c];if(!a){iAd.Console.warn(iAd.String.format('%@: Key "%@" not defined.',this.displayName,c));return c}var b=this._bestMatchingVersionForParameters(a,this._valueForParameter);if(!b){iAd.Console.warn(iAd.String.format('%@: Key "%@" not defined in the current context.',this.displayName,c));return c}return b.value};iAd.Content._validateParameterAndOption=function(c,b){if(!this._optionsForParameter.hasOwnProperty(c)){throw iAd.String.format('%@: Parameter "%@" is not defined.',this.displayName,c)}var a=this._optionsForParameter[c];if(a.indexOf(b)==-1){iAd.Console.warn(iAd.String.format('%@: Value "%@" is not a valid for parameter "%@".',this.displayName,b,c))}};iAd.Content._bestMatchingVersionForParameters=function(a,f){var d=[];for(var c=0,e=a.length;c<e;c++){var b=a[c];if(this._allParametersInAMatchParametersInB(b.parameters,f)){d.push(b)}}d.sort(function(h,g){var i=Object.keys(h.parameters).length;var j=Object.keys(g.parameters).length;if(i>j){return 1}if(i<j){return -1}return 0});return d[d.length-1]};iAd.Content._parametersMatch=function(b,a){if(Object.keys(b).length!==Object.keys(a).length){return false}return this._allParametersInAMatchParametersInB(b,a)};iAd.Content._allParametersInAMatchParametersInB=function(c,b){for(var a in c){if(!c.hasOwnProperty(a)){continue}if(!b.hasOwnProperty(a)||b[a]!==c[a]){return false}}return true};iAd.Utils.setupDisplayNames(iAd.Content,"iAd.Content");iAd.Class.mixin(iAd.Content,[iAd.EventTarget]);
/**
*
* Copyright © 2009-2016 Apple Inc.  All rights reserved.
*
**/

iAd.Console={};iAd.Console.log=function(){if(window.console&&console.log){console.log.apply(console,arguments)}};iAd.Console._fallbackLog=function(b,a){a.unshift(b.toUpperCase()+":");iAd.Console.log.apply(iAd.Console,a)};iAd.Console._log=function(b,a){if(window.console&&console[b]){console[b].apply(console,a);return}iAd.Console._fallbackLog(b,Array.prototype.slice.call(a))};iAd.Console.warn=function(){iAd.Console._log("warn",arguments)};iAd.Console.error=function(){iAd.Console._log("error",arguments)};iAd.Console.debug=function(){iAd.Console._log("debug",arguments)};iAd.Console.assert=function(){if(window.console&&console.assert){console.assert.apply(console,arguments);return}if(!arguments[0]){iAd.Console._fallbackLog("assert",[arguments[1]||""])}};iAd.Console.info=function(){iAd.Console._log("info",arguments)};
/**
*
* Copyright © 2009-2016 Apple Inc.  All rights reserved.
*
**/

iAd.CSS={};iAd.CSS.t=function(b,a){return iAd.CSS.t3d(b,a,0)};iAd.CSS.t3d=function(b,a,c){iAd.CSS.sanitizeNumberArguments(arguments);return"translate3d("+b+"px, "+a+"px, "+c+"px)"};iAd.CSS.r3d=function(a,d,c,b){iAd.CSS.sanitizeNumberArguments(arguments);return"rotate3d("+a+", "+d+", "+c+", "+b+"rad)"};iAd.CSS.roundedPxValue=function(b){var a=window.devicePixelRatio;return((b*a)|0)/a};iAd.CSS.tm=function(b,a){iAd.CSS.sanitizeNumberArguments(arguments);return"matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, "+b+", "+a+", 0, 1)"};iAd.CSS.matrixFromString=function(a){var b="";if(a.length>0&&a!="none"){b=a.replace(/([^(]*)\(([^)]*)\)/g,function(d,f,e){var c=e.replace(/(\-?[0-9.]+(?:e\-?[0-9]+)?)([^,]*)/g,function(h,i,g){i=parseFloat(i);return i.toFixed(6)+g});return f+"("+c+")"})}return new WebKitCSSMatrix(b)};iAd.CSS.concatenateTransforms=function(){var d=[];for(var b=0,c=arguments.length;b<c;b++){var a=arguments[b];if(a&&a!="none"){d.push(a)}}return d.join(" ")};iAd.CSS.isClassNameValid=function(a){return a!=null&&a!=""&&a===String(a).replace(/\s/g,"")};iAd.CSS.matrixEqualsToMatrix=function(c,a){for(var e=1;e<=4;e++){for(var b=1;b<=4;b++){var d="m"+e+b;if(c[d]!==a[d]){return false}}}return true};iAd.CSS.widthForTextAndFont=function(b,a){if(!this.textMeasuringCanvasContext){this.textMeasuringCanvasContext=document.createElement("canvas").getContext("2d")}if(a){this.textMeasuringCanvasContext.font=a}return this.textMeasuringCanvasContext.measureText(b).width};iAd.CSS.isStyleSheetLoaded=function(a){return(iAd.CSS.elementForStyleSheet(a)!=null)};iAd.CSS.elementForStyleSheet=function(a){var c,e=document.styleSheets;for(var b=0,d=e.length;b<d;b++){c=e[b];if(c.href==a){return c}}return null};iAd.CSS.flushPendingUpdates=function(){var a=document.body.offsetWidth};iAd.CSS.sanitizeNumberArguments=function(a){for(var b=0,c=a.length;b<c;b++){if(typeof a[b]=="number"){a[b]=a[b].toFixed(20)}}};iAd.Utils.setupDisplayNames(iAd.CSS,"iAd.CSS");
/**
*
* Copyright © 2009-2016 Apple Inc.  All rights reserved.
*
**/

iAd.CSS.widthForTextAndFont=function(d,c){if(!this.textMeasuringCanvasContext){this.textMeasuringCanvasContext=document.createElement("canvas").getContext("2d")}var a=this.textMeasuringCanvasContext.font;if(c){this.textMeasuringCanvasContext.font=c}var b=0;d.split("\n").forEach(function(e){b=Math.max(b,this.textMeasuringCanvasContext.measureText(e).width)},this);this.textMeasuringCanvasContext.font=a;return b};iAd.CSS.setLayerBackgroundImageIfDifferent=function(b,c){var a=c.resolvedURL;if(iAP.Context.IS_IOS){if(b.style.backgroundImage&&b._iap_cachedBackgroundImage==a){return}b._iap_cachedBackgroundImage=a}b.style.backgroundImage="url("+a+")"};(function(){if(iAP.Context.IS_ITUNES){var b=iAd.CSS.concatenateTransforms;var a=/(matrix3d|translate3d|translateZ|rotate3d|rotateZ|scale3d|scaleZ)/i;iAd.CSS.concatenateTransforms=function(){var e=b.apply(this,arguments),d=new WebKitCSSMatrix(e),c="";if(e.match(a)){var f=[d.m11,d.m12,d.m13,d.m14,d.m21,d.m22,d.m23,d.m24,d.m31,d.m32,d.m33,d.m34,d.m41,d.m42,d.m43,d.m44];c="matrix3d("+f.join(", ")+")"}else{c=d.toString()}return c}}})();
/**
*
* Copyright © 2009-2016 Apple Inc.  All rights reserved.
*
**/

iAd.Element={};iAd.Element.HTML5_CUSTOM_ATTRIBUTE_PREFIX="data-";iAd.Element.ATTRIBUTE_PREFIX="ad-";iAd.Element.elementFromString=function(d){var a=document.createRange();a.selectNode(document.body);var b=a.createContextualFragment(d);var c=b.firstChild;while(c.nodeType!=Node.ELEMENT_NODE&&c.nextSibling){c=c.nextSibling}return c};iAd.Element.hasCustomAttribute=function(b,a){return b.hasAttribute(iAd.Element.HTML5_CUSTOM_ATTRIBUTE_PREFIX+a)||b.hasAttribute(a)};iAd.Element.getCustomAttribute=function(c,a){var b=c.getAttribute(iAd.Element.HTML5_CUSTOM_ATTRIBUTE_PREFIX+a);return iAd.Utils.objectIsString(b)?b:c.getAttribute(a)};iAd.Element.SUPPORTS_CLASS_LIST=("classList" in document.documentElement);Element.prototype.hasClassName=iAd.Element.SUPPORTS_CLASS_LIST?function(a){return iAd.CSS.isClassNameValid(a)&&this.classList.contains(a)}:function(a){return new RegExp("(?:^|\\s+)"+a+"(?:\\s+|$)").test(this.className)};Element.prototype.addClassName=iAd.Element.SUPPORTS_CLASS_LIST?function(a){if(!iAd.CSS.isClassNameValid(a)||this.classList.contains(a)){return false}this.classList.add(a);return true}:function(a){if(!this.hasClassName(a)){this.className=[this.className,a].join(" ");return true}else{return false}};Element.prototype.removeClassName=iAd.Element.SUPPORTS_CLASS_LIST?function(a){if(iAd.CSS.isClassNameValid(a)&&this.classList.contains(a)){this.classList.remove(a);return true}return false}:function(b){if(this.hasClassName(b)){var a=this.className;this.className=a.replace(new RegExp("(?:^|\\s+)"+b+"(?:\\s+|$)","g")," ");return true}return false};Element.prototype.toggleClassName=iAd.Element.SUPPORTS_CLASS_LIST?function(a,b){if(iAd.CSS.isClassNameValid(a)){if(b==null){b=!this.classList.contains(a)}this.classList[b?"add":"remove"](a)}}:function(a,b){if(b==null){b=!this.hasClassName(a)}this[b?"addClassName":"removeClassName"](a)};iAd.Utils.setupDisplayNames(iAd.Element,"iAd.Element");
/**
*
* Copyright © 2009-2016 Apple Inc.  All rights reserved.
*
**/

iAd.Element.getCustomAttribute=function(d,a){var c=iAP.PageState.pageStateForCurrentDevice;while(c){var b=(c.parentState?(a+"-for-"+c.name):a);var e=d.getAttribute(b);if(iAd.Utils.objectIsString(e)){return e}c=c.parentState}return null};iAd.Element.getChildMatchingSelector=function(d,a){var c=d.children;for(var b=0,e=c.length;b<e;b++){if(c[b].webkitMatchesSelector(a)){return c[b]}}return null};iAd.Element.getChildrenMatchingSelector=function(d,a){var c=d.children;var f=[];for(var b=0,e=c.length;b<e;b++){if(c[b].webkitMatchesSelector(a)){f.push(c[b])}}return f};iAd.Element.getEditedContentAndNormalize=function(b){var a=b.style.whiteSpace;b.style.whiteSpace="pre";var c=b.innerText;b.style.whiteSpace=a;c=c.replace(/^\s+$/g,"");return c};
/**
*
* Copyright © 2009-2016 Apple Inc.  All rights reserved.
*
**/

iAd.Device={};iAd.Device.iOS_VERSION=navigator.userAgent.match(/OS ([0-9_]+)/);iAd.Device.iOS_VERSION=iAd.Device.iOS_VERSION?iAd.Device.iOS_VERSION[1].replace(/_/g,"."):null;iAd.Device.IS_IPAD=(navigator.platform.indexOf("iPad")>-1);iAd.Device.HAS_HIDPI_DISPLAY=(window.devicePixelRatio>=2);iAd.Device.PIXEL_RATIO=window.devicePixelRatio;iAd.Device.iOSVersionLessThan=function(a){if(iAd.Device.iOS_VERSION==null){iAd.Console.warn("iAd.Device.iOS_VERSION is null.");return false}return iAd.Device.compareiOSVersions(iAd.Device.iOS_VERSION,a)==-1};iAd.Device.compareiOSVersions=function(e,d){var h=e.split(".");var g=d.split(".");for(var c=0,f=Math.max(h.length,g.length);c<f;c++){var b=parseInt(h[c]||"0",10),a=parseInt(g[c]||"0",10);if(a>b){return -1}else{if(b>a){return 1}}}return 0};iAd.Device.ORIENTATION_PORTRAIT_CSS="ad-device-portrait";iAd.Device.ORIENTATION_LANDSCAPE_CSS="ad-device-landscape";iAd.Device.ORIENTATION_PORTRAIT=0;iAd.Device.ORIENTATION_PORTRAIT_UPSIDE_DOWN=180;iAd.Device.ORIENTATION_LANDSCAPE_LEFT=90;iAd.Device.ORIENTATION_LANDSCAPE_RIGHT=-90;iAd.Device.init=function(){if(iAd.Device.iOS_VERSION){window.addEventListener("orientationchange",iAd.Device.interfaceOrientationDidChange,true)}iAd.Device.setInterfaceOrientation(window.orientation||iAd.Device.ORIENTATION_PORTRAIT)};iAd.Device.interfaceOrientationDidChange=function(a){iAd.Device.setInterfaceOrientation(window.orientation)};iAd.Device.setInterfaceOrientation=function(c){var d=this.interfaceOrientation;this.interfaceOrientation=c;var b=(Math.abs(c)==90);var a=document.body;var e=a.addClassName(b?iAd.Device.ORIENTATION_LANDSCAPE_CSS:iAd.Device.ORIENTATION_PORTRAIT_CSS);if(e){a.removeClassName(b?iAd.Device.ORIENTATION_PORTRAIT_CSS:iAd.Device.ORIENTATION_LANDSCAPE_CSS)}if(d!=null&&iAd.ViewController){iAd.ViewController.orientationDidChange(d)}};window.addEventListener("DOMContentLoaded",iAd.Device.init,true);iAd.Utils.setupDisplayNames(iAd.Device,"iAd.Device");
/**
*
* Copyright © 2009-2016 Apple Inc.  All rights reserved.
*
**/

(function(){iAd.Content.defineParameter("device",["iPhone","iPad"]);var b=iAd.Device.IS_IPAD?"iPad":"iPhone";iAd.Content.setValueForParameter(b,"device");iAd.Content.defineParameter("devicePixelRatio",[1,2,3]);iAd.Content.setValueForParameter(iAd.Device.PIXEL_RATIO,"devicePixelRatio");iAd.Content.defineParameter("language",["ar","bn","ca","cs","da","de","el","en","es","fi","fr","hi","hu","id","it","ja","kn","ko","ml","mr","ms","nb","nl","pl","pt","ro","ru","sv","ta","te","th","tr","vi","zh"]);var a=window.navigator.language.split("-");iAd.Content.setValueForParameter(a[0],"language");iAd.Content.defineParameter("region",["ar","at","au","be","bg","bo","br","ca","cl","cn","co","cz","de","dk","ec","eg","es","fi","fr","gb","gf","gr","gy","hk","hu","id","ie","in","it","jo","jp","kr","ma","mx","my","nl","no","nz","pe","ph","pl","py","ro","ru","sa","se","sg","sr","th","tr","us","uy","ve","vn","za"]);iAd.Content.setValueForParameter(a[a.length-1],"region")})();
/**
*
* Copyright © 2009-2016 Apple Inc.  All rights reserved.
*
**/

iAd.Path={};iAd.Path.IPAD_SUFFIX="~ipad";iAd.Path.OPTIONAL_HIDPI_AND_EXTENSION_REGEXP=/((%40|@)([0-9]+(\.[0-9]+)?)x)?(\.[^./]+)?$/;iAd.Path.IPAD_SUFFIX_REGEXP=/~ipad(\.[^./]+)?$/;iAd.Path.OPTIONAL_IPAD_SUFFIX_AND_EXTENSION_REGEXP=/(~ipad)?(\.[^./]+)?$/;iAd.Path.HIDPI_SUFFIX_REGEXP=/(%40|@)([0-9]+(\.[0-9]+)?)x(~ipad)?(\.[^./]+)?$/;iAd.Path.appendHiDPISuffix=function(b,c){c=c||iAd.Device.PIXEL_RATIO;if(c==1){return b}if(iAd.Path.HIDPI_SUFFIX_REGEXP.test(b)){return b}var a="@"+c+"x";return b.replace(iAd.Path.OPTIONAL_IPAD_SUFFIX_AND_EXTENSION_REGEXP,function(d){return a+d})};iAd.Path.appendiPadSuffix=function(a){if(iAd.Path.IPAD_SUFFIX_REGEXP.test(a)){return a}return a.replace(iAd.Path.OPTIONAL_HIDPI_AND_EXTENSION_REGEXP,function(d,f,c,e,b,g){return(f||"")+iAd.Path.IPAD_SUFFIX+(g||"")})};iAd.Path.pixelRatioForPath=function(a){var b=1;a.replace(iAd.Path.HIDPI_SUFFIX_REGEXP,function(d,c,e){b=parseFloat(e,10)});return b};iAd.Path.HREF_PROXY=null;iAd.Path.resolveAbsolutePath=function(b){if(!iAd.Path.HREF_PROXY){iAd.Path.HREF_PROXY=document.createElement("a")}var a=iAd.Path.HREF_PROXY;a.href=b;return a.href};iAd.Path.objectToQueryString=function(a,b){return iAd.Path.objectToQueryStringForKey(a,b,null)};iAd.Path.objectToQueryStringForKey=function(a,h,d){h=h||"&";d=d||"";if(iAd.Utils.objectIsPrimitive(a)){var c=a?encodeURIComponent(a):"";if(d&&c){return encodeURIComponent(d)+"="+c}return c}var f=[],g=d;if(iAd.Utils.objectIsArray(a)){if(g){g+="[]"}for(var b=0,e=a.length;b<e;b++){f.push(iAd.Path.objectToQueryStringForKey(a[b],h,g))}}else{if(typeof(a)=="object"){for(var d in a){f.push(iAd.Path.objectToQueryStringForKey(a[d],h,g?g+"["+d+"]":d))}}}return f.join(h)};iAd.Path.basename=function(f,e){if(f=="/"){return f}var c=/([^\/]*)\/*$/;var a=f.match(c);var d=a[1];if(!e){return d}var b=d.lastIndexOf(e);if(b==-1||b!=d.length-e.length){return d}return d.substring(0,b)};Object.defineProperty(iAd.Path,"assetsPath",{get:function(){if(this._assetsPath){return this._assetsPath}var a=/\/?iAd(-\w+)?\.cssz?(\?.*)?$/;var c,d,f;for(var b=0,e=document.styleSheets.length;b<e;b++){c=document.styleSheets[b];if(c.href){d=c.href.split("/");f=d.pop();if(a.test(f)){d.push("assets/");this._assetsPath=d.join("/");return this._assetsPath}}}},set:function(a){this._assetsPath=a}});iAd.Utils.setupDisplayNames(iAd.Path,"iAd.Path");
/**
*
* Copyright © 2009-2016 Apple Inc.  All rights reserved.
*
**/

iAd.Path.assetsPath="plugins/com.apple.iAdProducer.iAdJS/assets/";iAd.Path.lastPathComponent=function(a){if(!a){return a}var b=a.split("/");return decodeURIComponent(b.slice(b.length-1).join())};iAd.Path.appendHiDPISuffixIfAvailable=function(a){return window.imageAssetInfo&&window.imageAssetInfo[a]?iAd.Path.appendHiDPISuffix(a):a};
/**
*
* Copyright © 2009-2016 Apple Inc.  All rights reserved.
*
**/

iAd.Class({name:"iAd.Image",synthesizedProperties:["width","height","loaded"],archivedProperties:["url","hasHiDPIVersion","hasiPadVersion"]});iAd.Image.prototype.init=function(c,b,a){this.callSuper();this.url=c;this.resolvedURL=iAd.Image.resolveURL(c,b,a);this.hasHiDPIVersion=b;this.hasiPadVersion=a;this._loaded=false;this.scaleFactor=1/iAd.Path.pixelRatioForPath(this.resolvedURL);this.element=new Image();this.load();iAd.Image.imageWasCreated(this)};iAd.Image.prototype.getWidth=function(){return this.element.width*this.scaleFactor};iAd.Image.prototype.getHeight=function(){return this.element.height*this.scaleFactor};iAd.Image.prototype.handleEvent=function(a){if(a.type==="load"&&(a.target===this.element)){this.loaded=true;this.element.removeEventListener("load",this,false);this.runCompletion(false)}};iAd.Image.prototype.load=function(){this.element.src=this.resolvedURL;if(this.element.complete){this.loaded=true}else{this.element.addEventListener("load",this,false)}};iAd.Image.prototype.whenLoaded=function(b,a){this.whenLoadedArguments={completion:b,methodName:a};if(this._loaded){this.runCompletion(true)}};iAd.Image.prototype.runCompletion=function(a){var b=this.whenLoadedArguments;if(!b){return}if(iAd.Utils.objectIsFunction(b.completion)){b.completion(this,a)}else{if(iAd.Utils.objectHasMethod(b.completion,b.methodName)){b.completion[b.methodName](this,a)}}delete this.whenLoadedArguments};iAd.Image.imageForURL=function(c,b,a){if(!c){return null}var d=iAd.Image.resolveURL(c,b,a);if(this.instances&&this.instances[d]){return this.instances[d]}return new iAd.Image(c,b,a)};iAd.Image.imageForContentKey=function(b){if(!b){return null}var a=iAd.Content.contentForKey(b);return iAd.Image.imageForURL(a)};iAd.Image.restoreFromArchive=function(a){return this.imageForURL(a.url,a.hasHiDPIVersion,a.hasiPadVersion)};iAd.Image.resolveURL=function(c,b,a){if(b&&iAd.Device.HAS_HIDPI_DISPLAY){c=iAd.Path.appendHiDPISuffix(c)}if(a&&iAd.Device.IS_IPAD){c=iAd.Path.appendiPadSuffix(c)}return c};iAd.Image.imageWasCreated=function(a){if(!this.instances){this.instances={};window.setTimeout(iAd.Image.runLoopDidStart,0)}this.instances[a.resolvedURL]=a};iAd.Image.runLoopDidStart=function(){delete iAd.Image.instances};
/**
*
* Copyright © 2009-2016 Apple Inc.  All rights reserved.
*
**/

iAd.Image.isEqual=function(d,c){if(iAP.Context.IS_IAD_PRODUCER){return d==c}return d&&c&&d.resolvedURL==c.resolvedURL&&d.hasHiDPIVersion==c.hasHiDPIVersion};iAd.Image._imageSets={};iAd.Image.registerImageSets=function(c){var d;var a=function(f,e){if(f==e){return 0}return f<e?-1:1};for(var b in c){if(c.hasOwnProperty(b)){d=c[b];if(!d[1]){d[1]=b}d._resolutions=Object.keys(d).map(parseFloat).sort(a);iAd.Image._imageSets[b]=c[b]}}};iAd.Image.resolvedInfoForURL=function(a){var h=1;var k=a;var f=iAd.Image._imageSets[a];if(f){var j=window.devicePixelRatio||1;var c=f._resolutions;var b=c[0];k=f[b];if(b<j){var g;for(var d=1,e=c.length;d<e;d++){g=c[d];if(b<j){k=f[g];b=g}else{break}}}h=1/b}return{scaleFactor:h,resolvedURL:k}};iAd.Image.imageForURL=function(b){if(!b){return null}var e=iAd.Image.resolvedInfoForURL(b);var a=e.resolvedURL;var c=e.scaleFactor;var d;if(this.instances&&this.instances[a]){d=this.instances[a]}else{d=new iAd.Image(a)}d._originalURL=b;d.scaleFactor=c;return d};
/**
*
* Copyright © 2009-2016 Apple Inc.  All rights reserved.
*
**/

iAd.Class({name:"iAd.Point",archivedProperties:["x","y"]});iAd.Point.prototype.init=function(a,b){this.callSuper();this.x=(a!=null&&!isNaN(a))?a:0;this.y=(b!=null&&!isNaN(b))?b:0};iAd.Point.fromEvent=function(a){var a=(a.touches&&a.touches.length>0)?a.touches[0]:a;return new iAd.Point(a.pageX,a.pageY)};iAd.Point.fromEventInElement=function(c,b){var c=(c.touches&&c.touches.length>0)?c.touches[0]:c;var a=window.webkitConvertPointFromPageToNode(b,new WebKitPoint(c.pageX,c.pageY));return new iAd.Point(a.x,a.y)};iAd.Point.prototype.toString=function(){return"iAd.Point["+this.x+","+this.y+"]"};iAd.Point.prototype.copy=function(){return new iAd.Point(this.x,this.y)};iAd.Point.prototype.equals=function(a){return(this.x==a.x&&this.y==a.y)};iAd.Class({name:"iAd.Size",archivedProperties:["width","height"]});iAd.Size.prototype.init=function(b,a){this.callSuper();this.width=(b!=null&&!isNaN(b))?b:0;this.height=(a!=null&&!isNaN(a))?a:0};iAd.Size.ZERO_SIZE=new iAd.Size(0,0);iAd.Size.prototype.toString=function(){return"iAd.Size["+this.width+","+this.height+"]"};iAd.Size.prototype.copy=function(){return new iAd.Size(this.width,this.height)};iAd.Size.prototype.equals=function(a){return(this.width==a.width&&this.height==a.height)};iAd.Class({name:"iAd.Rect",archivedProperties:["origin","size"]});iAd.Rect.prototype.init=function(b,d,c,a){this.callSuper();this.origin=new iAd.Point(b||0,d||0);this.size=new iAd.Size(c||0,a||0)};iAd.Rect.ZERO_RECT=new iAd.Rect(0,0,0,0);iAd.Rect.prototype.toString=function(){return"iAd.Rect["+[this.origin.x,this.origin.y,this.size.width,this.size.height].join(", ")+"]"};iAd.Rect.prototype.copy=function(){return new iAd.Rect(this.origin.x,this.origin.y,this.size.width,this.size.height)};iAd.Rect.prototype.equals=function(a){return(this.origin.equals(a.origin)&&this.size.equals(a.size))};iAd.Rect.prototype.inset=function(a){return new iAd.Rect(this.origin.x+a.left,this.origin.y+a.top,this.size.width-a.left-a.right,this.size.height-a.top-a.bottom)};iAd.Rect.prototype.minX=function(){return this.origin.x};iAd.Rect.prototype.minY=function(){return this.origin.y};iAd.Rect.prototype.midX=function(){return this.origin.x+(this.size.width/2)};iAd.Rect.prototype.midY=function(){return this.origin.y+(this.size.height/2)};iAd.Rect.prototype.maxX=function(){return this.origin.x+this.size.width};iAd.Rect.prototype.maxY=function(){return this.origin.y+this.size.height};iAd.Rect.prototype.intersectionWithRect=function(e){var f=new iAd.Rect();var b=Math.max(this.minX(),e.minX());var a=Math.min(this.maxX(),e.maxX());if(b>a){return iAd.Rect.ZERO_RECT}f.origin.x=b;f.size.width=a-b;var d=Math.max(this.minY(),e.minY());var c=Math.min(this.maxY(),e.maxY());if(d>c){return iAd.Rect.ZERO_RECT}f.origin.y=d;f.size.height=c-d;return f};iAd.Class({name:"iAd.EdgeInsets",archivedProperties:["top","right","bottom","left"]});iAd.EdgeInsets.prototype.init=function(d,b,a,c){this.top=d;this.right=b;this.bottom=a;this.left=c};iAd.EdgeInsets.prototype.equals=function(a){return(this.top==a.top&&this.right==a.right&&this.bottom==a.bottom&&this.left==a.left)};iAd.EdgeInsets.prototype.copy=function(){return new iAd.EdgeInsets(this.top,this.right,this.bottom,this.left)};
/**
*
* Copyright © 2009-2016 Apple Inc.  All rights reserved.
*
**/

iAd.Array={};iAd.Array.removeObjectFromArray=function(b,c){var a=c.indexOf(b);if(a==-1){return false}c.splice(a,1);return true};iAd.Utils.setupDisplayNames(iAd.Array,"iAd.Array");
/**
*
* Copyright © 2009-2016 Apple Inc.  All rights reserved.
*
**/

iAd.Class({name:"iAd.Transition",mixins:[iAd.EventTarget]});iAd.Transition.DID_COMPLETE_DELEGATE="transitionDidComplete";iAd.Transition.DEFAULTS={duration:0.5,delay:0,removesTargetUponCompletion:false,revertsToOriginalValues:false};iAd.Transition.STYLES=["-webkit-transition-property","-webkit-transition-duration","-webkit-transition-timing-function","-webkit-transition-delay","-webkit-transition"];iAd.Transition.NORMALIZE_ZERO_REG_EXP=/([^\d+-]|^)[+-]?0[a-z%]*/g;iAd.Transition.HARDWARE_LAYER_BACKING_PROPERTIES=["position"];iAd.Transition.prototype.init=function(a,b){this.target=null;this.properties=null;this.base=null;this.duration=null;this.delay=null;this.from=null;this.to=null;this.timingFunction=null;this.delegate=null;this.removesTargetUponCompletion=null;this.revertsToOriginalValues=null;this.defaultsApplied=false;this.archivedStyles=null;this.archivedValues=[];this.archivedBaseValues=[];this.definition=a;this.reversed=!!b};iAd.Transition.prototype.applyDefaults=function(){if(this.defaultsApplied){return}for(var a in iAd.Transition.DEFAULTS){if(this[a]==null){this[a]=iAd.Transition.DEFAULTS[a]}}this.defaultsApplied=true};iAd.Transition.prototype.archiveTransitionStyles=function(){if(this.archivedStyles!=null){return}var b=iAd.Utils.objectIsInstanceOfClass(this.target,iAd.View)?this.target.layer:this.target;this.archivedStyles=[];for(var a=0,c=iAd.Transition.STYLES.length;a<c;a++){this.archivedStyles.push(b.style.getPropertyValue(iAd.Transition.STYLES[a]))}};iAd.Transition.prototype.restoreTransitionStyles=function(){for(var a=0,b=iAd.Transition.STYLES.length;a<b;a++){this.element.style.setProperty(iAd.Transition.STYLES[a],this.archivedStyles[a],"")}this.archivedStyles=null};iAd.Transition.prototype.archiveBaseValues=function(){if(!this.revertsToOriginalValues){return}if(iAd.Utils.objectIsInstanceOfClass(this.target,iAd.View)){for(var a=0,b=this.properties.length;a<b;a++){this.archivedValues[a]=this.target[this.properties[a]]}if(this.base){for(var a=0,b=this.base.length;a<b;a+=2){this.archivedBaseValues[a]=this.target[this.base[a]]}}}else{for(var a=0,b=this.properties.length;a<b;a++){this.archivedValues[a]=this.target.style.getPropertyValue(this.properties[a])}if(this.base){for(var a=0,b=this.base.length;a<b;a+=2){this.archivedBaseValues[a]=this.target.style.getPropertyValue(this.base[a])}}}};iAd.Transition.prototype.restoreBaseValues=function(){if(iAd.Utils.objectIsInstanceOfClass(this.target,iAd.View)){for(var a=0,b=this.properties.length;a<b;a++){this.target[this.properties[a]]=this.archivedValues[a]}if(this.base){for(var a=0,b=this.base.length;a<b;a+=2){this.target[this.base[a]]=this.archivedBaseValues[a]}}}else{for(var a=0,b=this.properties.length;a<b;a++){this.target.style.setProperty(this.properties[a],this.archivedValues[a],null)}if(this.base){for(var a=0,b=this.base.length;a<b;a+=2){this.target.style.setProperty(this.base[a],this.archivedBaseValues[a],null)}}}};iAd.Transition.prototype.start=function(){if(iAd.Transaction.openTransactions>0){iAd.Transaction.addTransition(this)}else{this.applyFromState();iAd.CSS.flushPendingUpdates();this.callMethodNameAfterDelay("applyToState",0)}return this};iAd.Transition.prototype.applyFromState=function(){this.processDefinition();this.applyDefaults();this.archiveTransitionStyles();this.archiveBaseValues();this.enforceHardwareLayerBacking();if(this.from==null){return}if(iAd.Utils.objectIsInstanceOfClass(this.target,iAd.View)){this.target.layer.style.webkitTransitionDuration=0;if(this.base){for(var a=0,b=this.base.length;a<b;a+=2){this.target[this.base[a]]=this.base[a+1]}}for(var a=0,b=this.properties.length;a<b;a++){this.target[this.properties[a]]=this.from[a]}}else{this.target.style.webkitTransitionDuration=0;if(this.base){for(var a=0,b=this.base.length;a<b;a+=2){this.target.style.setProperty(this.base[a],this.base[a+1],null)}}for(var a=0,b=this.properties.length;a<b;a++){this.target.style.setProperty(this.properties[a],this.from[a],null)}}};iAd.Transition.prototype.processDefinition=function(){if(!this.definition){return}var a=this.definition;if(iAd.Utils.objectIsFunction(a)){if(this.target!=null&&iAd.Utils.objectIsInstanceOfClass(this.target,iAd.View)){a=a(this.target)}else{return}}iAd.Utils.copyPropertiesFromSourceToTarget(a,this);if(this.reversed){var b=this.from;this.from=this.to;this.to=b}};iAd.Transition.prototype.enforceHardwareLayerBacking=function(){if(iAd.Utils.objectIsInstanceOfClass(this.target,iAd.View)){for(var a=0,b=this.properties.length;a<b;a++){if(iAd.Transition.HARDWARE_LAYER_BACKING_PROPERTIES.indexOf(this.properties[a])!=-1){this.target.wantsHardwareLayerBacking=true;return}}}};iAd.Transition.prototype.applyToState=function(){var e=iAd.Utils.objectIsInstanceOfClass(this.target,iAd.View);this.cssProperties=[];var h=[];for(var b=0,d=this.properties.length;b<d;b++){var f=(e)?this.target.cssPropertyNameForJSProperty(this.properties[b]):this.properties[b];if(this.cssProperties.indexOf(f)>-1){continue}var g=(iAd.Utils.objectIsArray(this.duration))?this.duration[b]:this.duration;var c=(iAd.Utils.objectIsArray(this.timingFunction))?this.timingFunction[b]:this.timingFunction;var a=(iAd.Utils.objectIsArray(this.delay))?this.delay[b]:this.delay;h.push([f,g+"s",c,a+"s"].join(" "));if(!this.propertyStatesAreEqualForIndex(b)){this.cssProperties.push(f)}}this.element=e?this.target.layer:this.target;this.eventTarget=this.element;if(g!==0){this.element.addEventListener("webkitTransitionEnd",this,false)}this.completedTransitions=0;this.element.style.webkitTransition=h.join(", ");if(e){for(var b=0,d=this.properties.length;b<d;b++){this.target[this.properties[b]]=this.to[b]}}else{for(var b=0,d=this.properties.length;b<d;b++){this.target.style.setProperty(this.properties[b],this.to[b],"")}}if(!this.cssProperties.length){this.callMethodNameAfterDelay("handleTransitionComplete",0)}};iAd.Transition.prototype.propertyStatesAreEqualForIndex=function(a){var c=this.from==null?this.target[this.properties[a]]:this.from[a];var b=this.to[a];if((c instanceof iAd.Point&&b instanceof iAd.Point)||(c instanceof iAd.Size&&b instanceof iAd.Size)){return c.equals(b)}else{if(iAd.Utils.objectIsString(c)&&iAd.Utils.objectIsString(b)){c=c.replace(iAd.Transition.NORMALIZE_ZERO_REG_EXP,"$10");b=b.replace(iAd.Transition.NORMALIZE_ZERO_REG_EXP,"$10")}return c===b}};iAd.Transition.prototype.handleEvent=function(a){if(a.target!==this.element){return}this.completedTransitions++;if(this.completedTransitions!=this.cssProperties.length){return}this.handleTransitionComplete()};iAd.Transition.prototype.handleTransitionComplete=function(){this.dispatchNotification(iAd.Transition.DID_COMPLETE_DELEGATE,this.delegate);this.element.removeEventListener("webkitTransitionEnd",this,false);if(this.removesTargetUponCompletion){var a=this.target;if(iAd.Utils.objectIsInstanceOfClass(this.target,iAd.View)){a.removeFromSuperview()}else{a.parentNode.removeChild(a)}}else{this.restoreTransitionStyles()}if(this.revertsToOriginalValues){this.restoreBaseValues()}};
/**
*
* Copyright © 2009-2016 Apple Inc.  All rights reserved.
*
**/

iAd.Class({name:"iAd.View",superclass:iAd.Object,mixins:[iAd.EventTarget],synthesizedProperties:["id","position","size","frame","transform","anchorPoint","anchorPointZ","doubleSided","zIndex","opacity","clipsToBounds","hidden","wantsHardwareLayerBacking","transitionsEnabled","transitionsDuration","hostingLayer","userInteractionEnabled","declarativeLayerWasInitialized","eventTarget","layerIsInDocument","touchLayer","tracking","navigable","focused"],archivedProperties:["id","position","size","autoresizingMask","transform","anchorPoint","anchorPointZ","doubleSided","zIndex","opacity","clipsToBounds","hidden","wantsHardwareLayerBacking","transitionsEnabled","transitionsDuration","subviews","userInteractionEnabled","navigable","focused","analyticsId"],cssClassName:"ad-view",collectionAccessor:"views"});iAd.View.prototype.init=function(a){this.callSuper();if(iAd.Utils.objectIsString(a)){a=document.querySelector(a)}this.layer=a;this.superview=null;this.subviews=[];this.tracksAllTouchesOnceTouchesBegan=true;this.autoresizesSubviews=true;this.autoresizingMask=iAd.View.AUTORESIZING_NONE;this._layerIsInDocument=false;this._position=new iAd.Point();this._size=new iAd.Size();this._anchorPoint=new iAd.Point(0.5,0.5);this._anchorPointZ=0;this._doubleSided=true;this._zIndex=0;this._opacity=1;this._transform="none";this._clipsToBounds=false;this._hidden=false;this._wantsHardwareLayerBacking=false;this._transitionsEnabled=false;this._transitionsDuration=0.5;this._hostingLayer=null;this._userInteractionEnabled=false;this._touchLayer=null;this._navigable=false;this._focused=false;this._tracking=false;this.touchInside=false;this.mouseInside=false;this.gestureRecognizers=[];this.usesDeclarativeBacking=!!(a&&a.nodeType==Node.ELEMENT_NODE);this._declarativeLayerWasInitialized=false;if(this.usesDeclarativeBacking){if(document.body.contains(this.layer)){this._layerIsInDocument=true;this.initWithDeclarativeBacking();this.layerWasInsertedIntoDocument()}}else{this.createLayer();this.setupCSSClasses();this.layerWasCreated()}this.layer._view=this};iAd.View.MANAGED_BY_VIEW_CONTROLLER_ATTR="ad-managed-by-view-controller";iAd.View.AUTORESIZING_NONE=0;iAd.View.AUTORESIZING_FLEXIBLE_LEFT_MARGIN=1<<0;iAd.View.AUTORESIZING_FLEXIBLE_WIDTH=1<<1;iAd.View.AUTORESIZING_FLEXIBLE_RIGHT_MARGIN=1<<2;iAd.View.AUTORESIZING_FLEXIBLE_TOP_MARGIN=1<<3;iAd.View.AUTORESIZING_FLEXIBLE_HEIGHT=1<<4;iAd.View.AUTORESIZING_FLEXIBLE_BOTTOM_MARGIN=1<<5;iAd.View.PROPERTY_MAPPING={opacity:"opacity",transform:"-webkit-transform",position:"-webkit-transform",anchorPoint:"-webkit-transform-origin",doubleSided:"-webkit-backface-visibility",zIndex:"z-index"};iAd.View.EVENT_ATTRIBUTE_PREFIX=iAd.Element.ATTRIBUTE_PREFIX+"on";iAd.View.LAYER_STYLE_DID_CHANGE_EVENT="viewLayerStyleDidChange";iAd.View.INSIDE_PADDING=(iAd.Device.IS_IPAD?25:70);iAd.View.TOUCH_DOWN_EVENT="viewTouchDown";iAd.View.TOUCH_DRAG_INSIDE_EVENT="viewTouchDragInside";iAd.View.TOUCH_DRAG_OUTSIDE_EVENT="viewTouchDragOutside";iAd.View.TOUCH_DRAG_ENTER_EVENT="viewTouchDragEnter";iAd.View.TOUCH_DRAG_EXIT_EVENT="viewTouchDragExit";iAd.View.TOUCH_UP_INSIDE_EVENT="viewTouchUpInside";iAd.View.TOUCH_UP_OUTSIDE_EVENT="viewTouchUpOutside";iAd.View.TOUCH_CANCEL_EVENT="viewTouchCancel";iAd.View.TOUCH_STATE_CHANGE_EVENT="viewTouchStateChange";iAd.View.FOCUS_IN_EVENT="viewFocusIn";iAd.View.FOCUS_OUT_EVENT="viewFocusOut";iAd.View.ACTIVATE_EVENT="viewActivate";iAd.View.synthesizedEvents=[iAd.View.TOUCH_DOWN_EVENT,iAd.View.TOUCH_DRAG_INSIDE_EVENT,iAd.View.TOUCH_DRAG_OUTSIDE_EVENT,iAd.View.TOUCH_DRAG_ENTER_EVENT,iAd.View.TOUCH_DRAG_EXIT_EVENT,iAd.View.TOUCH_UP_INSIDE_EVENT,iAd.View.TOUCH_UP_OUTSIDE_EVENT,iAd.View.TOUCH_CANCEL_EVENT,iAd.View.TOUCH_STATE_CHANGE_EVENT];iAd.View.dispatchesStyleChangeEvents=false;iAd.View.FOCUSED_CSS_CLASS="ad-focused";iAd.View.prototype.createLayer=function(){this.layer=document.createElement("div")};iAd.View.prototype.initWithDeclarativeBacking=function(){this.setupLayer();this.layerWasCreated();this.setupCSSClasses();this.readPropertiesFromLayerComputedStyle(window.getComputedStyle(this.layer));this.readPropertiesFromLayerAttributes(this.getCustomLayerAttributes());this.declarativeLayerWasInitialized=true};iAd.View.prototype.setupLayer=function(){this.lookupViewLayersInLayer(this.hostingLayer);var a=["button","checkbox","link","menuitem","menuitemcheckbox","menuitemradio","option","radio","slider","spinbutton","tab","textbox","treeitem"];if(this.layer.hasClassName(iAd.SpatialNavigationManager.NAVIGABLE_CSS_CLASS)||a.indexOf(this.layer.getAttribute("role"))!=-1){this.navigable=true}};iAd.View.prototype.lookupViewLayersInLayer=function(c){var d=c.firstElementChild;while(d){if(!d.hasOwnProperty("_view")){var b=iAd.View.viewClassForLayer(d);if(b){var a=new b(d);a._indexInSuperviewSubviews=this.subviews.push(a)-1;a.willMoveToSuperview(this);a.superview=this;a.didMoveToSuperview()}else{this.lookupViewLayersInLayer(d)}}d=d.nextElementSibling}};iAd.View.prototype.setupCSSClasses=function(){var a=this.constructor,b;while(a.superclass){b=a.cssClassName;if(b){this.layer.addClassName(b)}if(a===iAd.View){break}a=a.superclass}};iAd.View.prototype.readPropertiesFromLayerComputedStyle=function(b){this._size.width=parseInt(b.width,10)||0;this._size.height=parseInt(b.height,10)||0;this._position.x=parseInt(b.left,10)||0;this._position.y=parseInt(b.top,10)||0;this._zIndex=parseInt(b.zIndex,10)||0;this._clipsToBounds=(b.overflow=="hidden");this._doubleSided=(b.webkitBackfaceVisibility=="visible");this._transform=b.webkitTransform;this._hidden=(b.visibility=="hidden");this._opacity=parseFloat(b.opacity);var a=iAd.CSS.matrixFromString(this._transform);var c=new WebKitCSSMatrix();if(!iAd.CSS.matrixEqualsToMatrix(a,c)){this._position.x+=a.m41;this._position.y+=a.m42;a=a.translate(a.m41*-1,a.m42*-1,0);this._transform=a.toString()}if(this._transform!="none"){this._wantsHardwareLayerBacking=true}};iAd.View.prototype.readPropertiesFromLayerAttributes=function(b){if(iAd.ViewController!=null&&b.hasOwnProperty(iAd.View.MANAGED_BY_VIEW_CONTROLLER_ATTR)){this.createManagingViewController()}var c,e,d;var a=this.constructor.synthesizedEventMap;for(c in b){d=b[c];e=a[c.toLowerCase()];if(e){this.addEventListener(e,iAd.Event.eventHandlerForString(d),false)}else{this.setValueForAttribute(d,c)}}};iAd.View.prototype.createManagingViewController=function(){new iAd.ViewController({id:this.layer.hasAttribute("id")?this.layer.getAttribute("id"):"",properties:{view:this}})};iAd.View.prototype.setValueForAttribute=function(c,b){var a=this.propertyNameForAttribute(b);switch(typeof(this[a])){case"string":this[a]=c;break;case"number":this[a]=parseFloat(c);break;case"boolean":this[a]=!(c=="false");break;default:this[a]=c}};iAd.View.prototype.propertyNameForAttribute=function(a){return iAd.String.dashedStringToCamelCase(a.substr(iAd.Element.ATTRIBUTE_PREFIX.length))};iAd.View.prototype.attributeNameForProperty=function(a){return iAd.Element.ATTRIBUTE_PREFIX+iAd.String.camelCaseStringToDashed(a)};iAd.View.prototype.getCustomLayerAttributes=function(){var a={};var d=iAd.Element.HTML5_CUSTOM_ATTRIBUTE_PREFIX+iAd.Element.ATTRIBUTE_PREFIX;var g=this.layer.attributes;var f,b;for(var c=0,e=g.length;c<e;c++){f=g.item(c);b=f.name;if(b.indexOf(d)==0){a[b.substr(iAd.Element.HTML5_CUSTOM_ATTRIBUTE_PREFIX.length)]=f.value}else{if(b.indexOf(iAd.Element.ATTRIBUTE_PREFIX)==0){a[b]=f.value}}}this.customLayerAttributes=a;return a};iAd.View.prototype.layerHasCustomAttribute=function(a){if(this.customLayerAttributes){return this.customLayerAttributes.hasOwnProperty(a)}return iAd.Element.hasCustomAttribute(this.layer,a)};iAd.View.prototype.getLayerCustomAttributeValue=function(a){if(this.customLayerAttributes){return this.customLayerAttributes[a]||null}else{return iAd.Element.getCustomAttribute(this.layer,a)}};iAd.View.prototype.setLayerStyle=function(a){for(var b in a){this.layer.style.setProperty(b,a[b])}if(iAd.View.dispatchesStyleChangeEvents){this.createAndDispatchEvent(iAd.View.LAYER_STYLE_DID_CHANGE_EVENT,[["changedProperties",a]])}};iAd.View.prototype.toString=function(){return[this.constructor.displayName,"[",this._size.width,"x",this._size.height,"@",this._position.x,",",this._position.y,"]"].join("")};iAd.View.prototype.getId=function(){return this.layer.id};iAd.View.prototype.setId=function(a){this.layer.id=a};iAd.View.prototype.setPosition=function(a){if(!a||this._position.equals(a)){return}this._position=a;this.updatePositionAndTransform()};iAd.View.prototype.setSize=function(a,c){if((!a||this._size.equals(a))&&!c){return}var b=this._size.copy();this._size=a;this.setLayerStyle({width:a.width+"px",height:a.height+"px"});if(this.autoresizesSubviews){this.resizeSubviewsWithOldSize(b)}};iAd.View.prototype.getFrame=function(){return new iAd.Rect(this.position.x,this.position.y,this.size.width,this.size.height)};iAd.View.prototype.setFrame=function(a){this.position=a.origin;this.size=a.size};iAd.View.prototype.setTransform=function(a){this._transform=a;this.updatePositionAndTransform()};iAd.View.prototype.setAnchorPoint=function(a){if(!a){return}this._anchorPoint=a;this.updateLayerTransformOrigin()};iAd.View.prototype.setAnchorPointZ=function(a){this._anchorPointZ=a;this.updateLayerTransformOrigin()};iAd.View.prototype.updateLayerTransformOrigin=function(){this.setLayerStyle({"-webkit-transform-origin":Math.round(this._anchorPoint.x*100)+"% "+Math.round(this._anchorPoint.y*100)+"% "+this._anchorPointZ+"px"})};iAd.View.prototype.setDoubleSided=function(a){this._doubleSided=a;this.setLayerStyle({"-webkit-backface-visibility":a?"visible":"hidden"})};iAd.View.prototype.setZIndex=function(a){this._zIndex=a;this.setLayerStyle({"z-index":a})};iAd.View.prototype.setHidden=function(a){this._hidden=a;this.setLayerStyle({visibility:(a?"hidden":"visible")})};iAd.View.prototype.updatePositionAndTransform=function(){if(this._wantsHardwareLayerBacking||this._transitionsEnabled){this.setLayerStyle({left:"0",top:"0","-webkit-transform":iAd.CSS.concatenateTransforms(iAd.CSS.tm(iAd.CSS.roundedPxValue(this._position.x),iAd.CSS.roundedPxValue(this._position.y)),this._transform)})}else{this.setLayerStyle({left:this._position.x+"px",top:this._position.y+"px","-webkit-transform":this._transform})}};iAd.View.prototype.setOpacity=function(a){this._opacity=a;this.setLayerStyle({opacity:a})};iAd.View.prototype.setTransitionsEnabled=function(a){this.setLayerStyle({"-webkit-transition-duration":a?this._transitionsDuration+"s":"0s"});this._transitionsEnabled=a;this.updatePositionAndTransform()};iAd.View.prototype.setWantsHardwareLayerBacking=function(a){if(this._wantsHardwareLayerBacking==a){return}this._wantsHardwareLayerBacking=a;this.updatePositionAndTransform()};iAd.View.prototype.setTransitionsDuration=function(a){this.setLayerStyle({"-webkit-transition-duration":a+"s"});this._transitionsDuration=a};iAd.View.prototype.setClipsToBounds=function(a){this._clipsToBounds=a;this.setLayerStyle({overflow:a?"hidden":"visible"})};iAd.View.prototype.getTouchLayer=function(){return this._touchLayer||this.layer};iAd.View.prototype.getHostingLayer=function(){return(this._hostingLayer!=null)?this._hostingLayer:this.layer};iAd.View.prototype.addSubview=function(a){return this.insertSubviewAtIndex(a,this.subviews.length)};iAd.View.prototype.removeFromSuperview=function(){if(this.superview==null){return}this.willMoveToSuperview(null);this.superview.removeSubview(this);this.layer.parentNode.removeChild(this.layer);this.superview=null;this.didMoveToSuperview();this.dispatchNotificationOfLayerRemovalFromDocument()};iAd.View.prototype.removeSubview=function(e){if(e.superview!=this){return}this.willRemoveSubview(e);var d=this.subviews;var a=e._indexInSuperviewSubviews;d.splice(a,1);for(var b=a,c=d.length;b<c;b++){d[b]._indexInSuperviewSubviews=b}};iAd.View.prototype.insertSubviewAtIndex=function(h,g){var k=this.subviews;if(g>k.length){return}var b=h.superview;var a;if(b==this){a=h._indexInSuperviewSubviews;if(g===a){return}k.splice(a,1);if(g>a){g--}}else{if(b){b.removeSubview(h)}h.willMoveToSuperview(this)}k.splice(g,0,h);h._indexInSuperviewSubviews=g;var j=(a!=null&&a<g)?a:g+1;for(var d=j,f=k.length;d<f;d++){k[d]._indexInSuperviewSubviews=d}var c=k[g+1];if(c){var e=c.layer;while(e.hasClassName("iap-wrapped")){e=e.parentNode}this.hostingLayer.insertBefore(h.layer,e)}else{this.hostingLayer.appendChild(h.layer)}if(b!=this){h.superview=this;h.didMoveToSuperview()}this.didAddSubview(h);if(this._layerIsInDocument&&!h._layerIsInDocument){h.dispatchNotificationOfLayerInsertionIntoDocument()}return h};iAd.View.prototype.insertSubviewAfterSubview=function(b,a){if(a.superview!==this){return}var c=a._indexInSuperviewSubviews+1;if(c<this.subviews.length){this.insertSubviewAtIndex(b,c)}else{this.addSubview(b)}return b};iAd.View.prototype.insertSubviewBeforeSubview=function(b,a){if(a.superview!==this){return}return this.insertSubviewAtIndex(b,a._indexInSuperviewSubviews)};iAd.View.prototype.exchangeSubviewsAtIndices=function(b,a){if(b>=this.subviews.length||a>=this.subviews.length){return}var d=this.subviews[b];var g=this.subviews[a];this.subviews[b]=g;this.subviews[a]=d;d._indexInSuperviewSubviews=a;g._indexInSuperviewSubviews=b;var h=d.layer;var f=g.layer;var i=this.hostingLayer;var e=h.nextSibling;var c=f.nextSibling;if(e!=null){i.insertBefore(f,e)}else{i.appendChild(f)}if(c!=null){i.insertBefore(h,c)}else{i.appendChild(h)}};iAd.View.prototype.isDescendantOfView=function(b){var c=false;var a=this;while(a.superview!=null){if(a.superview===b){c=true;break}a=a.superview}return c};iAd.View.prototype.layerWasCreated=function(){};iAd.View.prototype.willMoveToSuperview=function(a){};iAd.View.prototype.didMoveToSuperview=function(){};iAd.View.prototype.didAddSubview=function(a){};iAd.View.prototype.willRemoveSubview=function(a){};iAd.View.prototype.layerWasInsertedIntoDocument=function(){if(this.usesDeclarativeBacking){if(!this.declarativeLayerWasInitialized){this.initWithDeclarativeBacking()}else{var a=window.getComputedStyle(this.layer);if(isNaN(this._size.width)){this._size.width=parseInt(a.width,10);this._size.height=parseInt(a.height,10)}if(isNaN(this._position.x)){this._position.x=parseInt(a.left,10);this._position.y=parseInt(a.top,10)}}}this.layerIsInDocument=true};iAd.View.prototype.layerWasRemovedFromDocument=function(){this.layerIsInDocument=false};iAd.View.prototype.dispatchNotificationOfLayerInsertionIntoDocument=function(){var c=this.subviews;for(var a=0,b=c.length;a<b;a++){c[a].dispatchNotificationOfLayerInsertionIntoDocument()}this.layerWasInsertedIntoDocument()};iAd.View.prototype.dispatchNotificationOfLayerRemovalFromDocument=function(){var c=this.subviews;for(var a=0,b=c.length;a<b;a++){c[a].dispatchNotificationOfLayerRemovalFromDocument()}this.layerWasRemovedFromDocument()};iAd.View.prototype.setUserInteractionEnabled=function(a){if(this._userInteractionEnabled==a){return}var c=Element.prototype[a?"addEventListener":"removeEventListener"];c.call(this.touchLayer,iAd.Event.START_EVENT,this,false);if(!iAd.Event.SUPPORTS_TOUCHES){var b=this.layer;c.call(b,"mouseover",this,false);c.call(b,"mouseout",this,false)}this._userInteractionEnabled=a};iAd.View.prototype.handleEvent=function(a){switch(a.type){case iAd.Event.START_EVENT:this.touchesBegan(a);break;case iAd.Event.MOVE_EVENT:this.touchesMoved(a);break;case iAd.Event.END_EVENT:this.touchesEnded(a);break;case iAd.Event.CANCEL_EVENT:this.touchesCancelled(a);break;case"mouseover":this.handleMouseover(a);break;case"mouseout":this.handleMouseout(a);break;case iAd.SpatialNavigationManager.ACTIVATE_EVENT:this.handleSNMActivate(a);break;case iAd.SpatialNavigationManager.FOCUS_IN_EVENT:this.handleSNMFocusIn(a);break;case iAd.SpatialNavigationManager.FOCUS_OUT_EVENT:this.handleSNMFocusOut(a);break}};iAd.View.prototype.handleSNMActivate=function(a){this.createAndDispatchEvent(iAd.View.ACTIVATE_EVENT,[["originalEvent",a]])};iAd.View.prototype.handleSNMFocusIn=function(a){this.focused=true};iAd.View.prototype.handleSNMFocusOut=function(a){if(this.mouseInside){this.layer.addClassName(iAd.View.FOCUSED_CSS_CLASS);return}if(this.domFocusInside){this.layer.addClassName(iAd.View.FOCUSED_CSS_CLASS);return}this.focused=false};iAd.View.prototype.touchesBegan=function(a){if(this.tracksAllTouchesOnceTouchesBegan){window.addEventListener(iAd.Event.MOVE_EVENT,this,true);window.addEventListener(iAd.Event.END_EVENT,this,true);window.addEventListener(iAd.Event.CANCEL_EVENT,this,true)}a.preventDefault();this.tracking=true;this.touchInside=true;this.dispatchEvent(this.createUIEvent(iAd.View.TOUCH_DOWN_EVENT,a));this.createAndDispatchEvent(iAd.View.TOUCH_STATE_CHANGE_EVENT);this.lastProcessedEvent=a};iAd.View.prototype.touchesMoved=function(b){if(this.shouldPreventEventDefault(b)){b.preventDefault()}var a=this.pointInsidePaddedBounds(iAd.Point.fromEventInElement(b,this.layer));var c=a?iAd.View.TOUCH_DRAG_INSIDE_EVENT:iAd.View.TOUCH_DRAG_OUTSIDE_EVENT;if(a!=this.touchInside){this.touchInside=a;c=a?iAd.View.TOUCH_DRAG_ENTER_EVENT:iAd.View.TOUCH_DRAG_EXIT_EVENT;this.createAndDispatchEvent(iAd.View.TOUCH_STATE_CHANGE_EVENT)}this.dispatchEvent(this.createUIEvent(c,b));this.lastProcessedEvent=b};iAd.View.prototype.shouldPreventEventDefault=function(a){return true};iAd.View.prototype.touchesEnded=function(b){window.removeEventListener(iAd.Event.MOVE_EVENT,this,true);window.removeEventListener(iAd.Event.END_EVENT,this,true);window.removeEventListener(iAd.Event.CANCEL_EVENT,this,true);this.tracking=false;var a=this.touchInside?iAd.View.TOUCH_UP_INSIDE_EVENT:iAd.View.TOUCH_UP_OUTSIDE_EVENT;this.dispatchEvent(this.createUIEvent(a,this.lastProcessedEvent));if(this.touchInside){this.createAndDispatchEvent(iAd.View.ACTIVATE_EVENT,[["originalEvent",b]])}this.touchInside=false;this.createAndDispatchEvent(iAd.View.TOUCH_STATE_CHANGE_EVENT)};iAd.View.prototype.touchesCancelled=function(a){window.removeEventListener(iAd.Event.MOVE_EVENT,this,true);window.removeEventListener(iAd.Event.END_EVENT,this,true);window.removeEventListener(iAd.Event.CANCEL_EVENT,this,true);this.tracking=false;this.touchInside=false;this.dispatchEvent(this.createUIEvent(iAd.View.TOUCH_CANCEL_EVENT,a))};iAd.View.prototype.handleMouseover=function(a){if(a.target===a.currentTarget){this.mouseEntered(a)}};iAd.View.prototype.handleMouseout=function(a){if(a.target===a.currentTarget&&!this.pointInside(iAd.Point.fromEventInElement(a,this.layer))){this.mouseExited(a)}};iAd.View.prototype.mouseEntered=function(a){this.mouseInside=true;this.focused=true};iAd.View.prototype.mouseExited=function(a){this.mouseInside=false;if(iAd.SpatialNavigationManager.sharedManager.focusedElement===this.layer){return}if(this.domFocusInside){return}this.focused=false};iAd.View.prototype.createUIEvent=function(b,c){var a=iAd.Event.createUIEvent(b,c);if(!a.ad){a.ad={}}a.ad.sender=this;return a};iAd.View.prototype.pointInsidePaddedBounds=function(a){var b=iAd.View.INSIDE_PADDING;return(a.x>=-b&&a.x<this.size.width+b&&a.y>=-b&&a.y<this.size.height+b)};iAd.View.prototype.pointInside=function(a){return(a.x>=0&&a.x<this.size.width&&a.y>=0&&a.y<this.size.height)};iAd.View.prototype.resizeSubviewsWithOldSize=function(c){for(var a=0,b=this.subviews.length;a<b;a++){this.subviews[a].resizeWithOldSuperviewSize(c)}};iAd.View.prototype.resizeWithOldSuperviewSize=function(f){var a=this._position.copy();var e=this._size.copy();var c=this.autoresizingMask;if(f.width!=0||e.width==0){var d=(c&iAd.View.AUTORESIZING_FLEXIBLE_LEFT_MARGIN)+(c&iAd.View.AUTORESIZING_FLEXIBLE_WIDTH)+(c&iAd.View.AUTORESIZING_FLEXIBLE_RIGHT_MARGIN);var h;switch(d){case iAd.View.AUTORESIZING_NONE:break;case iAd.View.AUTORESIZING_FLEXIBLE_LEFT_MARGIN:a.x+=this.superview._size.width-f.width;break;case iAd.View.AUTORESIZING_FLEXIBLE_WIDTH:e.width=this.superview._size.width-(f.width-this._size.width);break;case iAd.View.AUTORESIZING_FLEXIBLE_LEFT_MARGIN|iAd.View.AUTORESIZING_FLEXIBLE_WIDTH:h=(f.width-this._size.width-this._position.x);a.x=(this._position.x/(f.width-h))*(this.superview._size.width-h);e.width=this.superview._size.width-a.x-h;break;case iAd.View.AUTORESIZING_FLEXIBLE_RIGHT_MARGIN:break;case iAd.View.AUTORESIZING_FLEXIBLE_LEFT_MARGIN|iAd.View.AUTORESIZING_FLEXIBLE_RIGHT_MARGIN:h=(f.width-this._size.width-this._position.x);a.x+=(this.superview._size.width-f.width)*(this.position.x/(this.position.x+h));break;case iAd.View.AUTORESIZING_FLEXIBLE_RIGHT_MARGIN|iAd.View.AUTORESIZING_FLEXIBLE_WIDTH:h=(f.width-this._size.width-this._position.x);scaled_right_margin=(h/(f.width-this._position.x))*(this.superview._size.width-this._position.x);e.width=this.superview._size.width-a.x-scaled_right_margin;break;case iAd.View.AUTORESIZING_FLEXIBLE_LEFT_MARGIN|iAd.View.AUTORESIZING_FLEXIBLE_WIDTH|iAd.View.AUTORESIZING_FLEXIBLE_RIGHT_MARGIN:a.x=(this._position.x/f.width)*this.superview._size.width;e.width=(this._size.width/f.width)*this.superview._size.width;break}}if(f.height!=0||e.height==0){var b=(c&iAd.View.AUTORESIZING_FLEXIBLE_TOP_MARGIN)+(c&iAd.View.AUTORESIZING_FLEXIBLE_HEIGHT)+(c&iAd.View.AUTORESIZING_FLEXIBLE_BOTTOM_MARGIN);var g;switch(b){case iAd.View.AUTORESIZING_NONE:break;case iAd.View.AUTORESIZING_FLEXIBLE_TOP_MARGIN:a.y+=this.superview._size.height-f.height;break;case iAd.View.AUTORESIZING_FLEXIBLE_HEIGHT:e.height=this.superview._size.height-(f.height-this._size.height);break;case iAd.View.AUTORESIZING_FLEXIBLE_TOP_MARGIN|iAd.View.AUTORESIZING_FLEXIBLE_HEIGHT:g=(f.height-this._size.height-this._position.y);a.y=(this._position.y/(f.height-g))*(this.superview._size.height-g);e.height=this.superview._size.height-a.y-g;break;case iAd.View.AUTORESIZING_FLEXIBLE_BOTTOM_MARGIN:break;case iAd.View.AUTORESIZING_FLEXIBLE_TOP_MARGIN|iAd.View.AUTORESIZING_FLEXIBLE_BOTTOM_MARGIN:g=(f.height-this._size.height-this._position.y);a.y+=(this.superview._size.height-f.height)*(this.position.y/(this.position.y+g));break;case iAd.View.AUTORESIZING_FLEXIBLE_BOTTOM_MARGIN|iAd.View.AUTORESIZING_FLEXIBLE_HEIGHT:g=(f.height-this._size.height-this._position.y);scaled_bottom_margin=(g/(f.height-this._position.y))*(this.superview._size.height-this._position.y);e.height=this.superview._size.height-a.y-scaled_bottom_margin;break;case iAd.View.AUTORESIZING_FLEXIBLE_TOP_MARGIN|iAd.View.AUTORESIZING_FLEXIBLE_HEIGHT|iAd.View.AUTORESIZING_FLEXIBLE_BOTTOM_MARGIN:a.y=(this._position.y/f.height)*this.superview._size.height;e.height=(this._size.height/f.height)*this.superview._size.height;break}}this.position=a;this.size=e};iAd.View.prototype.cssPropertyNameForJSProperty=function(a){return iAd.View.PROPERTY_MAPPING[a]};iAd.View.prototype.applyTransition=function(a,c){if(a==null){return null}var b=new iAd.Transition(a,c);b.target=this;b.start();return b};iAd.View.prototype.descendantViewsOfClass=function(a){return iAd.View.viewsForClassAndNode(a,this.layer)};iAd.View.prototype.getEventTarget=function(){return this.layer};iAd.View.prototype.addGestureRecognizer=function(a){if(this.gestureRecognizers.indexOf(a)!=-1){return}if(a.view!=null&&a.view!==this){a.view.removeGestureRecognizer(a)}this.gestureRecognizers.push(a);a.view=this};iAd.View.prototype.removeGestureRecognizer=function(a){if(iAd.Array.removeObjectFromArray(a,this.gestureRecognizers)){a.view=null}};iAd.View.prototype.convertRectToView=function(d,a){var c=this.convertPointToView(d.origin,a);var b=this.convertPointToView(new iAd.Point(d.maxX(),d.maxY()),a);return new iAd.Rect(c.x,c.y,b.x-c.x,b.y-c.y)};iAd.View.prototype.convertRectFromView=function(b,a){return a.convertRectToView(b,this)};iAd.View.prototype.convertPointToView=function(b,a){var c=window.webkitConvertPointFromNodeToPage(this.layer,new WebKitPoint(b.x,b.y));var d=window.webkitConvertPointFromPageToNode(a.layer,c);return new iAd.Point(d.x,d.y)};iAd.View.prototype.convertPointFromView=function(a,b){return b.convertPointToView(a,this)};iAd.View.prototype.restoreProperty=function(d,c){switch(d){case"subviews":for(var a=0,b=c.length;a<b;a++){this.addSubview(c[a])}break;default:this.callSuper(d,c)}};iAd.View.prototype.setNavigable=function(b){if(this._navigable==b){return}this._navigable=b;var a=(b?"add":"remove");var c=this.layer;c.toggleClassName(iAd.SpatialNavigationManager.NAVIGABLE_CSS_CLASS,b);if(this.layerIsInDocument){iAd.SpatialNavigationManager.sharedManager[a+"NavigableElement"](c)}var d=a+"EventListener";c[d].call(c,iAd.SpatialNavigationManager.ACTIVATE_EVENT,this,false);c[d].call(c,iAd.SpatialNavigationManager.FOCUS_IN_EVENT,this,false);c[d].call(c,iAd.SpatialNavigationManager.FOCUS_OUT_EVENT,this,false)};iAd.View.prototype.setFocused=function(c){if(c==this._focused){return}this._focused=c;var b=this.layer;b.toggleClassName(iAd.View.FOCUSED_CSS_CLASS,c);if(!c){var a=iAd.SpatialNavigationManager.sharedManager;if(a.focusedElement===b){a.focusElement(null)}}this.createAndDispatchEvent(c?iAd.View.FOCUS_IN_EVENT:iAd.View.FOCUS_OUT_EVENT)};iAd.View.getViewById=function(b){var a=document.getElementById(b);return(a&&a._view!=undefined)?a._view:null};iAd.View.registeredHTMLViewLoadingClasses={};iAd.View.registerClassForHTMLViewLoading=function(a){iAd.View.registeredHTMLViewLoadingClasses[a.cssClassName]=a};iAd.View.viewClassForLayer=function(d){var f=this.registeredHTMLViewLoadingClasses;var c=d.className.trim().split(/\s+/);for(var b=0,e=c.length;b<e;b++){var a=f.hasOwnProperty(c[b])?f[c[b]]:null;if(a){return a}}return null};iAd.View.viewForLayer=function(b){var a=iAd.View.viewClassForLayer(b)||iAd.View;return new a(b)};iAd.View.viewsForClassAndNode=function(f,a){var e=[];if(!f.hasOwnProperty("cssClassName")){return e}var d=a.querySelectorAll("."+f.cssClassName);for(var b=0,c=d.length;b<c;b++){e.push(d[b]._view)}return e};iAd.View.nearestViewForElement=function(a){while(a._view==undefined&&a.parentNode){a=a.parentNode}return(a._view==undefined)?null:a._view};iAd.View.initialize=function(){var g=this;if(this.hasOwnProperty("cssClassName")){Object.defineProperty(this,"views",{get:function(){return iAd.View.viewsForClassAndNode(g,document)}});iAd.View.registerClassForHTMLViewLoading(this);if(g.hasOwnProperty("collectionAccessor")){if(Object.getOwnPropertyDescriptor(iAd.View.prototype,this.collectionAccessor)){iAd.Console.warn("The class "+this._name+' has a .collectionAccessor "'+this.collectionAccessor+'" in conflict with another iAd.View subclass, this collection accessor will be ignored.')}else{Object.defineProperty(iAd.View.prototype,this.collectionAccessor,{get:function(){return this.descendantViewsOfClass(g)}})}}}if(!this.hasOwnProperty("synthesizedEventMap")){this.synthesizedEventMap={}}var e=this;while(e){if(e.hasOwnProperty("synthesizedEvents")){var d=e.synthesizedEvents;for(var b=0,c=d.length;b<c;b++){var f=d[b],a=iAd.View.EVENT_ATTRIBUTE_PREFIX+f.toLowerCase();this.synthesizedEventMap[a]=f}}e=e.superclass}};
/**
*
* Copyright © 2009-2016 Apple Inc.  All rights reserved.
*
**/

iAd.View.INSIDE_PADDING=iAP.Context.IS_DESKTOP?0:iAd.View.INSIDE_PADDING;iAd.View.prototype.handleMouseover=function(a){if(!this.mouseInside&&this.layer.webkitMatchesSelector(":hover")){this.mouseEntered(a)}};iAd.View.prototype.handleMouseout=function(a){if(this.mouseInside&&!this.layer.webkitMatchesSelector(":hover")){this.mouseExited(a)}};iAd.View.prototype.setHidden=function(a){this._hidden=a;this.setLayerStyle({visibility:(a?"hidden":"inherit")})};iAd.Class.synthesizeProperty(iAd.View.prototype,"renderedFrame");iAd.View.archivedProperties.push("renderedFrame");iAd.View.prototype.forceRedraw=function(){var a=this.layer.style.display;this.layer.style.display="none";this.layer.offsetHeight;this.layer.style.display=a};iAd.View.prototype.getRenderedFrame=function(){var a=document.defaultView.getComputedStyle(this.layer);var b=iAd.CSS.matrixFromString(a.webkitTransform);var c=new iAd.Rect(parseInt(a.left,10)+b.m41,parseInt(a.top,10)+b.m42,parseInt(a.width,10),parseInt(a.height,10));return c};iAd.View.prototype.viewDidAppear=function(){var c=this.subviews;for(var a=0,b=c.length;a<b;a++){c[a].viewDidAppear()}};(function(){iAd.Class.processMethod(iAd.View,"setTransitionsEnabled");iAd.Class.processMethod(iAd.View,"setWantsHardwareLayerBacking");iAd.Class.processMethod(iAd.View,"updateLayerTransformOrigin");var a=iAd.View.prototype.setTransitionsEnabled;var c=iAd.View.prototype.setWantsHardwareLayerBacking;var b=iAd.View.prototype.updateLayerTransformOrigin;iAd.View.prototype.setTransitionsEnabled=function(d){var e=(this._transitionsEnabled!=d);a.call(this,d);if(e){this.forceRedraw()}};iAd.View.prototype.setWantsHardwareLayerBacking=function(e){var d=(this._wantsHardwareLayerBacking!=e);c.call(this,e);if(d){this.forceRedraw()}};iAd.View.prototype.updateLayerTransformOrigin=function(){var e=this.layer.style.webkitTransformStyle;var d=this;this.layer.style.webkitTransformStyle="flat";b.call(this);setTimeout(function(){d.layer.style.webkitTransformStyle=e},0)}})();iAd.View.prototype.getCustomLayerAttributes=function(){var g={};var l=this.layer.attributes;var e=iAP.PageState.validPageStatesForCurrentDevice;var n=iAd.Element.HTML5_CUSTOM_ATTRIBUTE_PREFIX+iAd.Element.ATTRIBUTE_PREFIX;for(var h=0,m=l.length;h<m;h++){var d=l.item(h);var c=d.name;if(c.indexOf(iAd.Element.ATTRIBUTE_PREFIX)!==0&&c.indexOf(n)!==0){continue}if(c.indexOf("-for-ad-")==-1){g[c]=d.value}else{for(var f=1,k=e.length;f<k;f++){var b=e[f];if(c.length>b.name.length&&c.slice(b.name.length*-1)==b.name){var a=c.slice(0,(b.name.length+5)*-1);g[a]=d.value;break}}}}this.customLayerAttributes=g;return g};iAd.View.prototype.renderedQuad=function(){var b=iAd.RootView.sharedRoot.layer,g=this.layer.offsetWidth,a=this.layer.offsetHeight,f=webkitConvertPointFromPageToNode(b,webkitConvertPointFromNodeToPage(this.layer,new WebKitPoint(0,0))),e=webkitConvertPointFromPageToNode(b,webkitConvertPointFromNodeToPage(this.layer,new WebKitPoint(g,0))),c=webkitConvertPointFromPageToNode(b,webkitConvertPointFromNodeToPage(this.layer,new WebKitPoint(0,a))),d=webkitConvertPointFromPageToNode(b,webkitConvertPointFromNodeToPage(this.layer,new WebKitPoint(g,a)));return[f,e,d,c]};iAd.View.prototype.renderedContentQuad=function(){return this.renderedQuad()};iAd.Class.synthesizeProperty(iAd.View.prototype,"renderedFrameOnPage");iAd.View.archivedProperties.push("renderedFrameOnPage");iAd.View.prototype.getRenderedFrameOnPage=function(){var c=this.renderedQuad();var d=c.map(function(h){return h.x});var g=c.map(function(h){return h.y});var b=Math.min.apply(Math,d);var a=Math.min.apply(Math,g);var f=Math.max.apply(Math,d);var e=Math.max.apply(Math,g);return new iAd.Rect(b,a,f-b,e-a)};iAd.View.viewClassForLayer=function(d){var f=this.registeredHTMLViewLoadingClasses;var c=d.classList;for(var b=0,e=c.length;b<e;b++){var a=f.hasOwnProperty(c[b])?f[c[b]]:null;if(a){return a}}return null};iAd.View.prototype._focusForAX=function(){if(!this.layer.getAttribute("tabIndex")){this.layer.setAttribute("tabIndex",-1)}var a=this.layer.parentElement;while(a){a._iap_focusForAX_scrollCache={x:a.scrollLeft,y:a.scrollTop};a=a.parentElement}document.body.setAttribute("tabIndex",-1);document.body.focus();this.layer.focus();a=this.layer.parentElement;while(a){a.scrollLeft=a._iap_focusForAX_scrollCache.x;a.scrollTop=a._iap_focusForAX_scrollCache.y;delete a._iap_focusForAX_scrollCache;a=a.parentElement}};iAd.Utils.replaceMethod(iAd.View,"handleEvent",function(a){if(a.type=="focus"){this.handleFocus(a)}else{if(a.type=="blur"){this.handleBlur(a)}else{if(a.type=="keydown"&&a.keyCode==32&&!a.altKey&&!a.shiftKey&&!a.ctrlKey&&!a.metaKey){this.handleSpacebar(a)}else{this.callOriginal.apply(this,arguments)}}}});iAd.View.prototype.handleFocus=function(a){this.domFocusInside=true;this.focused=true};iAd.View.prototype.handleBlur=function(a){this.domFocusInside=false;if(iAd.SpatialNavigationManager.sharedManager.focusedElement===this.layer){return}if(this.mouseInside){return}this.focused=false};iAd.View.prototype.handleSpacebar=function(a){a.preventDefault();this.createAndDispatchEvent(iAd.View.ACTIVATE_EVENT,[["originalEvent",a]])};iAd.Utils.replaceMethod(iAd.View,"setNavigable",function(){var b=this._navigable;this.callOriginal.apply(this,arguments);if(b==this._navigable){return}if(iAP.Context.IS_IAD_PRODUCER){return}var d=this._navigable;var c=(d?"add":"remove");var e=this.layer;var f=c+"EventListener";e[f].call(e,"focus",this,false);e[f].call(e,"blur",this,false);e[f].call(e,"keydown",this,false);var a=e.getAttribute("tabIndex");if(d){!a&&e.setAttribute("tabIndex",0)}else{a==0&&e.removeAttribute("tabIndex")}});iAd.Utils.replaceMethod(iAd.View,"touchesEnded",function(){this.callOriginal.apply(this,arguments);if(!iAP.Context.IS_IOS){if(iAd.View._preventScroll===undefined){iAd.View._preventScroll=document.body.scrollTop;setTimeout(function(){delete iAd.View._preventScroll},0)}document.body.scrollTop=iAd.View._preventScroll}else{if(!iAd.View._tabIndexNeedsReapplication){var d=document.querySelectorAll("[tabIndex]");var c=[];for(var a=0,b=d.length;a<b;a++){c[a]=d[a].getAttribute("tabIndex");d[a].removeAttribute("tabIndex")}setTimeout(function(){iAd.View._tabIndexNeedsReapplication=false;for(var e=0,f=d.length;e<f;e++){d[e].setAttribute("tabIndex",c[e])}},0);iAd.View._tabIndexNeedsReapplication=true}}});
/**
*
* Copyright © 2009-2016 Apple Inc.  All rights reserved.
*
**/

iAd.Class({name:"iAd.Control",superclass:iAd.View,synthesizedProperties:["state","enabled","selected","highlighted"],archivedProperties:["highlighted","enabled","selected","tag"],cssClassName:"ad-control",collectionAccessor:"controls"});iAd.Control.UNHIGHLIGHT_DELAY=0.1;iAd.Control.prototype.init=function(a){this.tag=0;this._enabled=true;this._selected=false;this._highlighted=false;this.callSuper(a);this.layer._control=this;this.userInteractionEnabled=this._enabled;this.navigable=true};iAd.Control.VALUE_CHANGE_EVENT="controlValueChange";iAd.Control.STATE_NORMAL=0;iAd.Control.STATE_NORMAL_CSS="ad-normal";iAd.Control.STATE_HIGHLIGHTED=1<<0;iAd.Control.STATE_HIGHLIGHTED_CSS="ad-highlighted";iAd.Control.STATE_DISABLED=1<<1;iAd.Control.STATE_DISABLED_CSS="ad-disabled";iAd.Control.STATE_SELECTED=1<<2;iAd.Control.STATE_SELECTED_CSS="ad-selected";iAd.Control.synthesizedEvents=[iAd.Control.VALUE_CHANGE_EVENT];iAd.Control.prototype.getState=function(){return(iAd.Control.STATE_NORMAL|(this._highlighted?iAd.Control.STATE_HIGHLIGHTED:0)|(this._enabled?0:iAd.Control.STATE_DISABLED)|(this._selected?iAd.Control.STATE_SELECTED:0))};iAd.Control.prototype.setEnabled=function(a){if(a==this._enabled){return}var b=this.layer;b.toggleClassName(iAd.Control.STATE_DISABLED_CSS,!a);b.setAttribute("aria-disabled",a?"false":"true");this._enabled=a;this.userInteractionEnabled=a;this.notifyPropertyChange("state")};iAd.Control.prototype.setSelected=function(a){if(a==this._selected){return}this.layer.toggleClassName(iAd.Control.STATE_SELECTED_CSS,a);this._selected=a;this.notifyPropertyChange("state")};iAd.Control.prototype.setHighlighted=function(a){if(this._snmHighlightedTimer){clearTimeout(this._snmHighlightedTimer)}if(a==this._highlighted){return}this.layer.toggleClassName(iAd.Control.STATE_HIGHLIGHTED_CSS,a);this._highlighted=a;this.notifyPropertyChange("state")};iAd.Control.prototype.handleSNMActivate=function(a){this.highlighted=true;this._snmHighlightedTimer=this.callMethodNameAfterDelay("setHighlighted",iAd.Control.UNHIGHLIGHT_DELAY,false);this.callSuper(a)};iAd.Control.prototype.touchesBegan=function(a){if(!this._enabled){return}this.callSuper(a);this.highlighted=true};iAd.Control.prototype.touchesMoved=function(b){var a=this.touchInside;this.callSuper(b);if(a!=this.touchInside){this.highlighted=this.touchInside}};iAd.Control.prototype.touchesEnded=function(a){this.callSuper(a);this.highlighted=false};iAd.Control.prototype.touchesCancelled=function(a){this.callSuper(a);this.highlighted=false};iAd.Control.isNodeInControlHierarchyBoundedByElement=function(b,a){while(b.parentNode){if(b.hasOwnProperty("_view")&&b._view instanceof iAd.Control){return true}if(b===a){return false}b=b.parentNode}return false};
/**
*
* Copyright © 2009-2016 Apple Inc.  All rights reserved.
*
**/

iAd.Control.prototype.handleSpacebar=function(a){this.highlighted=true;this._snmHighlightedTimer=this.callMethodNameAfterDelay("setHighlighted",iAd.Control.UNHIGHLIGHT_DELAY,false);this.callSuper(a)};
/**
*
* Copyright © 2009-2016 Apple Inc.  All rights reserved.
*
**/

iAd.Class({name:"iAd.Label",superclass:iAd.View,synthesizedProperties:["numberOfLines","text","verticalAlignment"],archivedProperties:["numberOfLines","text","verticalAlignment"],cssClassName:"ad-label",collectionAccessor:"labels"});iAd.Label.VERTICAL_ALIGNMENT_TOP="top";iAd.Label.VERTICAL_ALIGNMENT_MIDDLE="middle";iAd.Label.VERTICAL_ALIGNMENT_BOTTOM="bottom";iAd.Label.prototype.init=function(a){this._text="";this._numberOfLines=1;this._verticalAlignment=iAd.Label.VERTICAL_ALIGNMENT_MIDDLE;this.callSuper(a)};iAd.Label.prototype.layerWasCreated=function(){this.callSuper();this._text=this.layer.textContent;this._textContainer=document.createElement("div");this._textContainer.textContent=this._text;this.layer.textContent="";this.layer.appendChild(this._textContainer)};iAd.Label.prototype.setText=function(a){a=(a==null)?"":String(a);if(a===this._text){return}this._text=a;this._textContainer.textContent=a};iAd.Label.prototype.setNumberOfLines=function(a){this._numberOfLines=a;if(a==0){this._textContainer.style.webkitLineClamp="100%";this._textContainer.style.overflow="visible"}else{this._textContainer.style.webkitLineClamp=a;this._textContainer.style.overflow="hidden"}};iAd.Label.prototype.setVerticalAlignment=function(a){this._verticalAlignment=a;var b="center";if(a==iAd.Label.VERTICAL_ALIGNMENT_TOP){b="start"}else{if(a==iAd.Label.VERTICAL_ALIGNMENT_BOTTOM){b="end"}}this.setLayerStyle({"-webkit-box-pack":b})};
/**
*
* Copyright © 2009-2016 Apple Inc.  All rights reserved.
*
**/

iAd.Utils.replaceMethod(iAd.Label,"layerWasCreated",function(){if(!this.layer.getAttribute("role")){this.layer.setAttribute("role","text")}this.callOriginal.apply(this,arguments)});iAd.Utils.replaceMethod(iAd.Label,"setText",function(b){var a=this._text;this.callOriginal.apply(this,arguments);if(a!=this._text){this._textContainer.setAttribute("aria-label",this._text)}this.removeTextEffectActionFrames()});iAd.Label.prototype.removeTextEffectActionFrames=function(){this._textContainer.style.display="";if(this._frameContainer){this.layer.removeChild(this._frameContainer);this._frameContainer=null}};
/**
*
* Copyright © 2009-2016 Apple Inc.  All rights reserved.
*
**/

iAd.Class({name:"iAd.Button",superclass:iAd.Control,synthesizedProperties:["currentTitle","autosized"],archivedProperties:["autoSized","type","titles"],excludedProperties:["subviews"],cssClassName:"ad-button",collectionAccessor:"buttons"});iAd.Button.TYPE_CUSTOM="ad-custom-type";iAd.Button.TYPE_ROUNDED_RECT="ad-rounded-rect-type";iAd.Button.TYPE_DETAIL_DISCLOSURE="ad-detail-disclosure-type";iAd.Button.TYPE_INFO_LIGHT="ad-info-light-type";iAd.Button.TYPE_INFO_DARK="ad-info-dark-type";iAd.Button.TYPE_CONTACT_ADD="ad-contact-add-type";iAd.Button.TYPE_DELETION_ACCESSORY="ad-deletion-accessory-type";iAd.Button.DEFAULT_HEIGHT=37;iAd.Button.prototype.init=function(a,b){this.type=b||iAd.Button.TYPE_ROUNDED_RECT;this._autosized=true;this.titles=[""];this.titleLabel=null;this.callSuper(a)};iAd.Button.restoreFromArchive=function(a){return new this(null,a.type)};iAd.Button.prototype.initWithDeclarativeBacking=function(){this.callSuper();if(this.layer.hasClassName(iAd.Button.TYPE_ROUNDED_RECT)){this.type=iAd.Button.TYPE_ROUNDED_RECT}else{if(this.layer.hasClassName(iAd.Button.TYPE_CUSTOM)){this.type=iAd.Button.TYPE_CUSTOM}}this.layer.addClassName(this.type)};iAd.Button.prototype.createLayer=function(){this.callSuper();this.layer.addClassName(this.type)};iAd.Button.prototype.layerWasCreated=function(){var a=this.layer;if(!a.getAttribute("role")){a.setAttribute("role","button")}this.callSuper();if(this.type===iAd.Button.TYPE_ROUNDED_RECT||this.type===iAd.Button.TYPE_CUSTOM){this.titleLabel=this.addSubview(new iAd.Label());this.titleLabel.layer.setAttribute("role","presentation")}else{if(this.type===iAd.Button.TYPE_DELETION_ACCESSORY){a.appendChild(document.createElement("div"))}}this.syncTitleToState();this.addPropertyObserver("state",this,"syncTitleToState")};iAd.Button.prototype.setValueForAttribute=function(b,a){switch(a){case"ad-title-for-normal-state":this.setTitleForState(b,iAd.Control.STATE_NORMAL);break;case"ad-title-for-highlighted-state":this.setTitleForState(b,iAd.Control.STATE_HIGHLIGHTED);break;case"ad-title-for-disabled-state":this.setTitleForState(b,iAd.Control.STATE_DISABLED);break;case"ad-title-for-selected-state":this.setTitleForState(b,iAd.Control.STATE_SELECTED);break;default:this.callSuper(b,a)}};iAd.Button.prototype.getSize=function(){var a=window.getComputedStyle(this.layer);return new iAd.Size(parseInt(a.width),parseInt(a.height))};iAd.Button.prototype.setSize=function(a){this._autoSized=false;this.callSuper(a)};iAd.Button.prototype.getCurrentTitle=function(){if(this.titleLabel==null){return null}return this.titleLabel.text};iAd.Button.prototype.setAutosized=function(a){if(a){this.setLayerStyle({width:"auto",height:iAd.Button.DEFAULT_HEIGHT+"px"})}this._autosized=a};iAd.Button.prototype.titleForState=function(a){return this.titles[a]||null};iAd.Button.prototype.setTitleForState=function(b,a){this.titles[a]=b;if(a==this.state){this.syncTitleToState()}};iAd.Button.prototype.syncTitleToState=function(){if(this.titleLabel==null){return}this.titleLabel.text=this.titles[this.state]||this.titles[iAd.Control.STATE_NORMAL]};
/**
*
* Copyright © 2009-2016 Apple Inc.  All rights reserved.
*
**/

iAd.Utils.replaceMethod(iAd.Button,"setValueForAttribute",function(b,a){if(a=="ad-title"){this.setTitleForState(b,iAd.Control.STATE_NORMAL)}else{if(a=="ad-vertical-alignment"){if(this.titleLabel){this.titleLabel.verticalAlignment=b}}else{this.callOriginal(b,a)}}});
/**
*
* Copyright © 2009-2016 Apple Inc.  All rights reserved.
*
**/

iAd.Class({name:"iAd.ScriptAction",mixins:[iAd.EventTarget],synthesizedProperties:["viewController","delay"]});iAd.ScriptAction.ACTION_DID_COMPLETE="scriptActionDidComplete";iAd.ScriptAction.prototype.init=function(a){this.callSuper();this.viewController=a;this.delay=0;this.eventTarget=document};iAd.ScriptAction.prototype.run=function(){return this.callMethodNameAfterDelay("start",this.delay)};iAd.ScriptAction.prototype.prepare=function(){};iAd.ScriptAction.prototype.start=function(){this.end()};iAd.ScriptAction.prototype.end=function(){this.dispatchNotification(iAd.ScriptAction.ACTION_DID_COMPLETE,this.delegate)};iAd.ScriptAction.prototype.reset=function(){};
/**
*
* Copyright © 2009-2016 Apple Inc.  All rights reserved.
*
**/

iAd.Class.synthesizeProperty(iAd.ScriptAction.prototype,"targetView");iAd.ScriptAction.prototype.getTargetView=function(){if(!this._targetView&&this.targetViewId){this._targetView=iAd.View.getViewById(this.targetViewId)}return this._targetView};iAd.Class.synthesizeProperty(iAd.ScriptAction.prototype,"sourceView");
/**
*
* Copyright © 2009-2016 Apple Inc.  All rights reserved.
*
**/

iAd.Class({name:"iAP.DrawingView",superclass:iAd.View,cssClassName:"iap-drawing-view",synthesizedProperties:["defaultCanvasImage","defaultCanvasColor","brushColor","brushSize","brushCompositeOperation","smoothingEnabled","image"],archivedProperties:["defaultCanvasImage","defaultCanvasColor","brushColor","brushSize","brushCompositeOperation","smoothingEnabled"],collectionAccessor:"drawingViews"});iAP.DrawingView.ARCHIVE_PREFIX=window.location.href+":";iAP.DrawingView.prototype.init=function(a){this._brushCompositeOperation="source-over";this._brushSize=50;this._brushColor="#FF0000";this._brushColorOpacity=1;this._smoothingEnabled=false;this.canvas=document.createElement("canvas");this.canvas.width=this.canvas.height=0;this.ctx=this.canvas.getContext("2d");this._previousTouchPoints=[];this._devicePixelMultiplier=1;this._disableSaveToLocalStorage=true;this.callSuper(a);this.layer.appendChild(this.canvas);this.updateSize();delete this._disableSaveToLocalStorage;this.loadFromLocalStorage();this.userInteractionEnabled=true;this.tracksAllTouchesOnceTouchesBegan=true};iAP.DrawingView.prototype.resetToDefault=function(){this.clearToTransparent();this.ctx.globalCompositeOperation="source-over";if(this.defaultCanvasColor){this.ctx.fillStyle=this.defaultCanvasColor;this.ctx.fillRect(0,0,this.canvas.width,this.canvas.height)}if(this.defaultCanvasImage){this.ctx.drawImage(this.defaultCanvasImage.element,0,0,this.canvas.width,this.canvas.height)}this._cloneCanvas(true)};iAP.DrawingView.prototype.clearToTransparent=function(){this._replayStack=[];this.addToReplayStack("setSmoothingEnabled",[this._smoothingEnabled]);this.addToReplayStack("setBrushColor",[this._brushColor]);this.addToReplayStack("setBrushSize",[this._brushSize]);this.addToReplayStack("setBrushCompositeOperation",[this._brushCompositeOperation]);this.canvas.width=this.canvas.width;this._cloneCanvas(true)};iAP.DrawingView.prototype.getImage=function(){return iAd.Image.imageForURL(this.canvas.toDataURL("image/png"),false)};iAP.DrawingView.prototype.setImage=function(){iAd.Console.warn("iAP.DrawingView: .image is read-only.")};iAP.DrawingView.prototype.setBrushColor=function(c){if(this._brushColor==c){return}this.addToReplayStack("setBrushColor",[c]);this._brushColor=c;if(!c){this._brushColorOpacity=undefined}else{var b=document.createElement("canvas");b.width=b.height=1;var a=b.getContext("2d");a.fillStyle=c;a.fillRect(0,0,1,1);this._brushColorOpacity=a.getImageData(0,0,1,1).data[3]/255}this._cloneCanvas(true)};iAP.DrawingView.prototype.setBrushSize=function(a){if(this._brushSize==a){return}this.addToReplayStack("setBrushSize",[a]);this._brushSize=a};iAP.DrawingView.prototype.setBrushCompositeOperation=function(a){if(this._brushCompositeOperation==a){return}this.addToReplayStack("setBrushCompositeOperation",[a]);this._brushCompositeOperation=a;this._cloneCanvas(true)};iAP.DrawingView.prototype.setSmoothingEnabled=function(a){if(this._smoothingEnabled==a){return}this.addToReplayStack("setSmoothingEnabled",[a]);this._smoothingEnabled=a};iAP.DrawingView.prototype.setValueForAttribute=function(b,a){if(a=="ad-default-canvas-image"||a=="ad-brush-image"){if(b){b=iAd.Image.imageForURL(b,true)}this[this.propertyNameForAttribute(a)]=b}else{this.callSuper(b,a)}};iAP.DrawingView.prototype.setSize=function(a){if(!a||this._size.equals(a)){return}this.callSuper(a);this.updateSize()};iAP.DrawingView.prototype.updateSize=function(){var a={height:parseInt(window.getComputedStyle(this.canvas)["height"],10),width:parseInt(window.getComputedStyle(this.canvas)["width"],10)};a.height==100&&a.width==100&&(a=this.size);this._devicePixelMultiplier=window.devicePixelRatio/(this.ctx.webkitBackingStorePixelRatio||1);this.canvas.height=a.height*this._devicePixelMultiplier;this.canvas.width=a.width*this._devicePixelMultiplier;this.resetToDefault()};iAP.DrawingView.prototype._cloneCanvas=function(a){if(this.canvas.width*this.canvas.height==0||!this._useClone()){if(this._canvas_clone){this.layer.removeChild(this._canvas_clone);delete this._canvas_clone}return}if(!this._canvas_clone){this._canvas_clone=this.canvas.cloneNode();this._canvas_clone.style.display="none";this.layer.insertBefore(this._canvas_clone,this.canvas)}else{this._canvas_clone.width=this.canvas.width;this._canvas_clone.height=this.canvas.height}a&&this._canvas_clone.getContext("2d").drawImage(this.canvas,0,0)};iAP.DrawingView.prototype._useClone=function(){return true};iAP.DrawingView.prototype.touchesBegan=function(b){var a=this.tracking;this.callSuper(b);if(!a){this._previousTouchPoints=[];if(this._canvas_clone&&this._brushCompositeOperation=="source-over"){this._canvas_clone.style.display="block"}if(this._brushColorOpacity==1&&this._brushCompositeOperation=="source-over"&&(this.canvas.width>=1024*2||this.canvas.height>=1024*2)){this._quickClear()}this.drawAtEvent(b)}};iAP.DrawingView.prototype.touchesMoved=function(a){this.callSuper(a);this.drawAtEvent(a)};iAP.DrawingView.prototype._preEnd=function(){if(this._brushColorOpacity==1&&this._brushCompositeOperation=="source-over"&&(this.canvas.width>=1024*2||this.canvas.height>=1024*2)){this._quickClear();this.strokeBetweenPoints.apply(this,this._previousTouchPoints)}};iAP.DrawingView.prototype._postEnd=function(){if(this._canvas_clone&&this._brushCompositeOperation=="source-over"){this.ctx.globalCompositeOperation="destination-over";this.ctx.drawImage(this._canvas_clone,0,0);this._canvas_clone.width=this._canvas_clone.width;this._canvas_clone.style.display="none";this._canvas_clone.offsetHeight}this._cloneCanvas(true);this.addToReplayStack("strokeBetweenPoints",this._previousTouchPoints);this._previousTouchPoints=[]};iAP.DrawingView.prototype.touchesCancelled=function(a){this._preEnd();this.callSuper(a);this._postEnd()};iAP.DrawingView.prototype.touchesEnded=function(a){this._preEnd();this.callSuper(a);this._postEnd()};iAP.DrawingView.prototype.drawAtEvent=function(e){var f=(e.touches&&e.touches.length>0)?e.touches:[e];var b,a;for(var c=0,d=f.length;c<d;c++){a=f[c];b=iAd.Point.fromEventInElement(a,this.canvas);if(!this._previousTouchPoints[c]){this._previousTouchPoints[c]=[]}this._previousTouchPoints[c].push(b)}this.strokeBetweenPoints.apply(this,this._previousTouchPoints)};iAP.DrawingView.prototype._quickClear=function(){this.canvas.width=this.canvas.width};iAP.DrawingView.prototype.strokeBetweenPoints=function(p){var m=arguments;var c=0.001;if(this.tracking&&this._canvas_clone){if(this._brushColorOpacity!=1||this._brushCompositeOperation!="source-over"||(this.canvas.width<1024*2&&this.canvas.height<1024*2)){this._quickClear()}if(this._brushCompositeOperation!="source-over"){this.ctx.drawImage(this._canvas_clone,0,0)}}var o=this._brushSize*this._devicePixelMultiplier;this.ctx.globalCompositeOperation=this._brushCompositeOperation;var a=false;if(a){var r=[]}if(this._brushColor){this.ctx.strokeStyle=this._brushColor;this.ctx.lineWidth=o;this.ctx.lineCap="round";this.ctx.lineJoin="round";this.ctx.beginPath();var n,h,f;for(var g=0,q=m.length;g<q;g++){a&&r.push([]);n=m[g][0];m[g].length&&this.ctx.moveTo(n.x*this._devicePixelMultiplier,n.y*this._devicePixelMultiplier);for(var e=1,l=m[g].length;e<l;e++){n=m[g][e];if(n.equals(m[g][e-1])){continue}if(this._smoothingEnabled&&(n._closeEnoughCache||n.distanceToPoint(m[g][e-1])>5)){n._closeEnoughCache=true;h=iAP.DrawingView._controlPointsFromPoints(m[g][e-1],n,m[g][e+1]);f=iAP.DrawingView._controlPointsFromPoints(m[g][e-2],m[g][e-1],n);this.ctx.bezierCurveTo(f[1].x*this._devicePixelMultiplier,f[1].y*this._devicePixelMultiplier,h[0].x*this._devicePixelMultiplier,h[0].y*this._devicePixelMultiplier,n.x*this._devicePixelMultiplier,n.y*this._devicePixelMultiplier);a&&r[g].push([f,h])}else{this.ctx.lineTo(n.x*this._devicePixelMultiplier,n.y*this._devicePixelMultiplier)}}if(m[g].length==1){this.ctx.lineTo(n.x*this._devicePixelMultiplier-c,n.y*this._devicePixelMultiplier+c)}}if(a){this.ctx.stroke();this.ctx.beginPath();this.ctx.lineWidth=o+2}for(var g=0,q=m.length;g<q;g++){if(m[g].length>1){for(var e=0,l=m[g].length;e<l;e++){n=m[g][e];if(e>0&&n.equals(m[g][e-1])){continue}this.ctx.moveTo(n.x*this._devicePixelMultiplier-c,n.y*this._devicePixelMultiplier);this.ctx.lineTo(n.x*this._devicePixelMultiplier,n.y*this._devicePixelMultiplier+c)}}}this.ctx.stroke();if(a){this.ctx.beginPath();this.ctx.strokeStyle="rgba(255,0,0,.5)";this.ctx.lineWidth=2;for(var g=0,q=r.length;g<q;g++){for(var e=0,l=r[g].length;e<l;e++){for(var d=0,b=r[g][e].length;d<b;d++){this.ctx.moveTo(r[g][e][d][0].x*this._devicePixelMultiplier,r[g][e][d][0].y*this._devicePixelMultiplier);this.ctx.lineTo(r[g][e][d][1].x*this._devicePixelMultiplier,r[g][e][d][1].y*this._devicePixelMultiplier)}}}this.ctx.stroke()}}if(!this.tracking){this.addToReplayStack("strokeBetweenPoints",m);this._cloneCanvas(true)}};iAP.DrawingView.prototype.saveToLocalStorage=function(){if(!this.id||this._disableSaveToLocalStorage){return}if(iAP.Context.projectIsOfType("iAdProject")){return}var a=iAP.DrawingView.ARCHIVE_PREFIX+this.id+":replay";window.localStorage[a]=iAd.Archiver.archiveToJSON(this._replayStack)};iAP.DrawingView.prototype.loadFromLocalStorage=function(){if(!this.id){return}if(iAP.Context.projectIsOfType("iAdProject")){return}var c=iAP.DrawingView.ARCHIVE_PREFIX+this.id+":replay";if(window.localStorage[c]){var e={setBrushColor:this._brushColor,setBrushSize:this._brushSize,setBrushCompositeOperation:this._brushCompositeOperation,setSmoothingEnabled:this._smoothingEnabled};var a=iAd.Archiver.restoreWithJSONArchive(window.localStorage[c]);this._disableSaveToLocalStorage=true;for(var b=0,d=a.length;b<d;b++){this[a[b].method]&&this[a[b].method].apply(this,a[b].args)}this._replayStack=a;Object.keys(e).forEach(function(f){this[f](e[f])},this);delete this._disableSaveToLocalStorage;this.saveToLocalStorage()}};iAP.DrawingView.prototype.addToReplayStack=function(b,a){if(!this._replayStack){this._replayStack=[]}this._replayStack.push({method:b,args:a});this.saveToLocalStorage()};iAP.DrawingView._controlPointsFromPoints=function(n,l,j){if(!n||!j){return[l,l]}if(l._controlCache){return l._controlCache}var k=l;var d=n||l;var c=j||l;var i=iAP.DrawingView._midpointOfPoints(d,k);var f=iAP.DrawingView._midpointOfPoints(c,k);var a=d.distanceToPoint(k);var h=c.distanceToPoint(k);var g=iAP.DrawingView._pointPercentageFromPoint(i,f,a/(a+h));i=iAP.DrawingView._pointPercentageFromPoint(i,g,0.25);f=iAP.DrawingView._pointPercentageFromPoint(f,g,0.25);var b=iAP.DrawingView._differenceOfPoints(g,k);var e=iAP.DrawingView._differenceOfPoints(i,b);var m=iAP.DrawingView._differenceOfPoints(f,b);return l._controlCache=[e,m]};iAP.DrawingView._midpointOfPoints=function(b,a){return{x:(b.x+a.x)/2,y:(b.y+a.y)/2}};iAP.DrawingView._sumOfPoints=function(b,a){return{x:b.x+a.x,y:b.y+a.y}};iAP.DrawingView._differenceOfPoints=function(b,a){return{x:b.x-a.x,y:b.y-a.y}};iAP.DrawingView._pointPercentageFromPoint=function(d,c,b){var a=(c.x-d.x)*b+d.x;var e=(c.y-d.y)*b+d.y;return{x:a,y:e}};iAd.Point.prototype.distanceToPoint=function(a){return Math.sqrt(Math.pow(a.x-this.x,2)+Math.pow(a.y-this.y,2))};
/**
*
* Copyright © 2009-2016 Apple Inc.  All rights reserved.
*
**/

iAd.Class({name:"iAP.DrawingBrushAction",superclass:iAd.ScriptAction,synthesizedProperties:["targetViewId","brushColor","brushCompositeOperation"]});iAP.DrawingBrushAction.prototype.prepare=function(){iAd.Utils.archiveOriginalValue(this.targetView,"brushColor");iAd.Utils.archiveOriginalValue(this.targetView,"brushCompositeOperation")};iAP.DrawingBrushAction.prototype.start=function(){this.renderSnapshot();this.end()};iAP.DrawingBrushAction.prototype.renderSnapshot=function(){this.targetView.brushColor=this.brushColor;this.targetView.brushCompositeOperation=this.brushCompositeOperation};iAP.DrawingBrushAction.prototype.reset=function(){iAd.Utils.restoreOriginalValue(this.targetView,"brushColor");iAd.Utils.restoreOriginalValue(this.targetView,"brushCompositeOperation")};
/**
*
* Copyright © 2009-2016 Apple Inc.  All rights reserved.
*
**/

iAd.SpatialNavigationManager={};iAd.SpatialNavigationManager.ENABLED=false;iAd.SpatialNavigationManager.FOCUSED_CSS_CLASS="ad-focused";iAd.SpatialNavigationManager.INACTIVE_CSS_CLASS="ad-inactive";iAd.SpatialNavigationManager.NAVIGABLE_CSS_CLASS="ad-navigable";iAd.SpatialNavigationManager.BACK_CSS_CLASS="ad-back-button";iAd.SpatialNavigationManager.ENABLED_CSS_CLASS="ad-supports-spatial-navigation";iAd.SpatialNavigationManager.INITIALLY_FOCUSED_ATTR="ad-initially-focused";iAd.SpatialNavigationManager.EXPLICIT_LEFT_ATTR="ad-left-navigable-element";iAd.SpatialNavigationManager.EXPLICIT_RIGHT_ATTR="ad-right-navigable-element";iAd.SpatialNavigationManager.EXPLICIT_UP_ATTR="ad-top-navigable-element";iAd.SpatialNavigationManager.EXPLICIT_DOWN_ATTR="ad-bottom-navigable-element";iAd.SpatialNavigationManager.FOCUS_IN_EVENT="ad-focus-in";iAd.SpatialNavigationManager.FOCUS_OUT_EVENT="ad-focus-out";iAd.SpatialNavigationManager.ACTIVATE_EVENT="ad-activate";iAd.SpatialNavigationManager.NAVIGATE_EVENT="ad-navigate";iAd.SpatialNavigationManager.sharedManager={init:function(){}};["navigableElementsInSubtree","registerSubtree","unregisterSubtree","addNavigableElement","removeNavigableElement","handleEvent","handleKeydown","handleNavigationEvent","handleNavigationCommand","navigateBack","activateFocusedElement","navigateInDirection","preferredElementInDirection","nearestElementIndexInDirection","topMostIndex","rightMostIndex","bottomMostIndex","leftMostIndex","metricsForElement","metricsForElementAtIndex","isElementAtIndexNavigable","focusElement"].forEach(function(a){iAd.SpatialNavigationManager.sharedManager[a]=iAd.SpatialNavigationManager.sharedManager.init});
/**
*
* Copyright © 2009-2016 Apple Inc.  All rights reserved.
*
**/

iAd.Class({name:"iAP.StartActionListAction",superclass:iAd.ScriptAction,synthesizedProperties:["actionList"]});iAP.StartActionListAction.prototype.start=function(){if(this.actionList){this.viewController.addEventListener(iAd.ViewController.ACTION_LIST_DID_COMPLETE,this,false);this.viewController.startActionListWithSourceView(this.actionList,this.sourceView)}else{this.end()}};iAP.StartActionListAction.prototype.handleEvent=function(b){var a=b.type;if(a==iAd.ViewController.ACTION_LIST_DID_COMPLETE&&b.ad.actionList.name==this.actionList){this.end();this.removeEventListener(a,this,false)}};iAP.StartActionListAction.prototype.summaryText=function(){return this.actionList||"None"};
/**
*
* Copyright © 2009-2016 Apple Inc.  All rights reserved.
*
**/

iAd.Class({name:"iAP.DrawingBrushSizeAction",superclass:iAd.ScriptAction,synthesizedProperties:["targetViewId","brushSize"]});iAP.DrawingBrushSizeAction.prototype.setBrushSize=function(a){if(a==-1&&this.targetView){a=this.targetView.brushSize+(this.targetView.brushSize>90?-10:10)}this._brushSize=a};iAP.DrawingBrushSizeAction.prototype.setTargetViewId=function(a){this._targetViewId=a;this.brushSize=this._brushSize};iAP.DrawingBrushSizeAction.prototype.setTargetView=function(a){this._targetView=a;this.brushSize=this._brushSize};iAP.DrawingBrushSizeAction.prototype.prepare=function(){iAd.Utils.archiveOriginalValue(this.targetView,"brushSize")};iAP.DrawingBrushSizeAction.prototype.start=function(){this.renderSnapshot();this.end()};iAP.DrawingBrushSizeAction.prototype.renderSnapshot=function(){this.targetView.brushSize=this.brushSize};iAP.DrawingBrushSizeAction.prototype.reset=function(){iAd.Utils.restoreOriginalValue(this.targetView,"brushSize")};
/**
*
* Copyright © 2009-2016 Apple Inc.  All rights reserved.
*
**/

iAd.Class({name:"iAP.SharedView",superclass:iAd.View,cssClassName:"iap-shared-view",synthesizedProperties:["viewControllerId","containedViewController"],archivedProperties:["viewControllerId"],collectionAccessor:"sharedViews"});iAP.SharedView.instances={};iAP.SharedView.prototype.init=function(a){this.archivedIdsByParentId={};this.previousParentId=null;this.callSuper(a);this.isViewControllerContainer=true};iAP.SharedView.prototype.handleEvent=function(a){this.callSuper(a);if(a.type==iAd.ViewController.VIEW_DID_LOAD&&a.ad.sender==this.containedViewController){this.setupContentView()}};iAP.SharedView.prototype.setupContentView=function(){this.contentView=this.containedViewController.contentView;if(this.contentView){this.contentView.layer.addClassName("iap-shared-content-view")}};iAP.SharedView.prototype._updateContentViewHidden=function(a){if(this.contentView){this.contentView.hidden=this.hidden}};iAP.SharedView.prototype.setHidden=function(a){this._hidden=a;this._updateContentViewHidden();if(this.contentView){iAd.Console.warn("Modifying .hidden on an iAP.SharedView; should modify .containedViewController.contentView.hidden instead.")}};iAP.SharedView.prototype.parentViewControllerViewDidLoad=function(){this.parentViewControllerIsLoaded=true;this.updateViewController()};iAP.SharedView.prototype.parentViewControllerViewWillAppear=function(d){var f=iAP.SharedView.instances[this.viewControllerId];var a=this.viewController.id;if(f.previousParentId!=a){f.layer.style.webkitAnimation="";f.id=f.archivedIdsByParentId[a];f.previousParentId=a}this._updateContentViewHidden();var e=this.containedViewController;if(f.superview!=iAd.RootView.sharedRoot){iAd.EventTarget.createAndDispatchEvent.call(e,iAd.ViewController.VIEW_WILL_APPEAR_EVENT,[["animated",d]]);this.shouldDispatchViewDidAppearEvent=true}var c=e.actionListNameByClassName[iAd.TransitionController.VIEW_BUILDS_IN_ACTION_LIST_CLASS];if(c){if(!e.shouldPlayBuildInActionList){var b=e.actionListByName[c];b&&e.enterState(b.cssClassName);this.layer.addClassName(b.cssClassName)}}};iAP.SharedView.prototype.parentViewControllerViewDidAppear=function(b){if(this.shouldDispatchViewDidAppearEvent){var c=this.containedViewController;iAd.EventTarget.createAndDispatchEvent.call(c,iAd.ViewController.VIEW_DID_APPEAR_EVENT,[["animated",b]]);this.shouldDispatchViewDidAppearEvent=false;if(!c.shouldPlayBuildInActionList){return}var a=c.actionListNameByClassName[iAd.TransitionController.VIEW_BUILDS_IN_ACTION_LIST_CLASS];if(a){c.callMethodNameAfterDelay("startActionList",0,a);if(c.buildInActionListShouldOnlyPlayOnce){c.shouldPlayBuildInActionList=false}}}};iAP.SharedView.prototype.parentViewControllerViewWillDisappear=function(b,d){if(!d){return}var e=iAP.SharedView.instances[this.viewControllerId];var c=this.containedViewController;iAP.SharedView.clearWebkitAnimation(e.layer);iAd.EventTarget.createAndDispatchEvent.call(c,iAd.ViewController.VIEW_WILL_DISAPPEAR_EVENT,[["animated",b]]);this.shouldDispatchViewDidDisappearEvent=true;var a=c.actionListNameByClassName[iAd.TransitionController.VIEW_BUILDS_OUT_ACTION_LIST_CLASS];if(a){c.callMethodNameAfterDelay("startActionList",0,a)}};iAP.SharedView.clearWebkitAnimation=function(c){c.style.webkitAnimation="";var b=c.children;for(var a=0,d=b.length;a<d;a++){this.clearWebkitAnimation(b[a])}};iAP.SharedView.prototype.parentViewControllerViewDidDisappear=function(b){if(this.shouldDispatchViewDidDisappearEvent){iAd.EventTarget.createAndDispatchEvent.call(this.containedViewController,iAd.ViewController.VIEW_DID_DISAPPEAR_EVENT,[["animated",b]]);this.shouldDispatchViewDidDisappearEvent=false;var a=iAP.SharedView.instances[this.viewControllerId].layer;iAP.SharedView.clearWebkitAnimation(a)}};iAP.SharedView.prototype.setViewControllerId=function(a){if(this._viewControllerId==a){return}this._viewControllerId=a;this.updateViewController()};iAP.SharedView.prototype.getContainedViewController=function(){return iAP.ViewController.instances[this.viewControllerId]};iAP.SharedView.prototype.updateViewController=function(){if(!this.declarativeLayerWasInitialized||!this.viewControllerId){return}if(this.parentViewControllerIsLoaded){this.processDeferredViewControllerLoad()}else{this.needsDeferredViewControllerUpdate=true}};iAP.SharedView.prototype.processDeferredViewControllerLoad=function(){var f=iAP.SharedView.instances[this.viewControllerId];var a=this.containedViewController;var d=this.viewController.id;if(!f||!a.viewIsLoaded){if(f){f.removeFromSuperview()}f=this;iAP.SharedView.instances[this.viewControllerId]=this;f.archivedIdsByParentId[d]=this.id;if(a.viewIsLoaded){this.setupContentView()}else{a.addEventListener(iAd.ViewController.VIEW_DID_LOAD,this,false)}var c=[iAd.ViewController.VIEW_WILL_APPEAR_EVENT,iAd.ViewController.VIEW_DID_APPEAR_EVENT,iAd.ViewController.VIEW_WILL_DISAPPEAR_EVENT,iAd.ViewController.VIEW_DID_DISAPPEAR_EVENT];a.createAndDispatchEvent=function(g,h){if(c.indexOf(g)==-1){iAd.EventTarget.createAndDispatchEvent.call(a,g,h)}};var e=this.layer;while(e.hasClassName("iap-wrapper")){e=e.firstElementChild}e.appendChild(a.view.layer);if(a.contentView){a.contentView.layerWasInsertedIntoDocument()}}else{this.setupContentView();if(this.viewController){this.viewController.outlets[this.outlet]=f}f.layer.style.webkitAnimation="";f.archivedIdsByParentId[d]=this.id;f.id=this.id;if(f.superview!=iAd.RootView.sharedRoot){var b=this.superview.subviews.indexOf(this);this.superview.insertSubviewAtIndex(f,b)}this.removeFromSuperview()}f.previousParentId=d;this.needsDeferredViewControllerUpdate=false};
/**
*
* Copyright © 2009-2016 Apple Inc.  All rights reserved.
*
**/

iAd.Class({name:"iAP.DrawingClearAction",superclass:iAd.ScriptAction,synthesizedProperties:["targetViewId","confirmBeforeClearing"]});iAP.DrawingClearAction.prototype.start=function(){if(this.confirmBeforeClearing=="true"){if(!confirm("Are you sure you want to clear your drawing?\n\nYou can’t undo this action.")){this.end();return}}this.targetView.clearToTransparent();this.end()};
/**
*
* Copyright © 2009-2016 Apple Inc.  All rights reserved.
*
**/

iAd.View.TRANSITION_DISSOLVE_OUT={properties:["opacity"],from:[1],to:[0]};iAd.View.TRANSITION_DISSOLVE_IN={properties:["opacity"],from:[0],to:[1]};iAd.View.TRANSITION_ZOOM_IN={properties:["opacity","transform"],from:[0,"scale(0.2)"],to:[1,"scale(1)"]};iAd.View.TRANSITION_ZOOM_OUT={properties:["opacity","transform"],from:[0,"scale(1.2)"],to:[1,"scale(1)"]};iAd.View.TRANSITION_CROSS_SPIN_RIGHT={properties:["opacity","transform"],from:[0,"rotate(20deg)"],to:[1,"rotate(0)"]};iAd.View.TRANSITION_CROSS_SPIN_LEFT={properties:["opacity","transform"],from:[0,"rotate(-20deg)"],to:[1,"rotate(0)"]};iAd.View.TRANSITION_FLIP_LEFT_OUT={properties:["transform"],from:["perspective(800) rotateY(0deg) translateZ(0)"],to:["perspective(800) rotateY(-180deg) translateZ(1px)"]};iAd.View.TRANSITION_FLIP_LEFT_IN={properties:["transform"],from:["perspective(800) rotateY(180deg) translateZ(1px)"],to:["perspective(800) rotateY(0deg) translateZ(0)"]};iAd.View.TRANSITION_FLIP_RIGHT_OUT={properties:["transform"],from:["perspective(800) rotateY(0deg) translateZ(0)"],to:["perspective(800) rotateY(180deg) translateZ(1px)"]};iAd.View.TRANSITION_FLIP_RIGHT_IN={properties:["transform"],from:["perspective(800) rotateY(-180deg) translateZ(1px)"],to:["perspective(800) rotateY(0deg) translateZ(0)"]};iAd.View.TRANSITION_CUBE_LEFT_OUT=function(a){var b=-a.size.width/2;return{base:["anchorPoint",new iAd.Point(0.5,0.5),"anchorPointZ",b],properties:["transform"],from:["perspective(800) translateZ("+b+"px) rotateY(0deg)"],to:["perspective(800) translateZ("+b+"px) rotateY(-90deg)"]}};iAd.View.TRANSITION_CUBE_LEFT_IN=function(a){var b=-a.size.width/2;return{base:["anchorPoint",new iAd.Point(0.5,0.5),"anchorPointZ",b],properties:["transform"],from:["perspective(800) translateZ("+b+"px) rotateY(90deg)"],to:["perspective(800) translateZ("+b+"px) rotateY(0deg)"]}};iAd.View.TRANSITION_CUBE_RIGHT_OUT=function(a){var b=-a.size.width/2;return{base:["anchorPoint",new iAd.Point(0.5,0.5),"anchorPointZ",b],properties:["transform"],from:["perspective(800) translateZ("+b+"px) rotateY(0deg)"],to:["perspective(800) translateZ("+b+"px) rotateY(90deg)"]}};iAd.View.TRANSITION_CUBE_RIGHT_IN=function(a){var b=-a.size.width/2;return{base:["anchorPoint",new iAd.Point(0.5,0.5),"anchorPointZ",b],properties:["transform"],from:["perspective(800) translateZ("+b+"px) rotateY(-90deg)"],to:["perspective(800) translateZ("+b+"px) rotateY(0deg)"]}};iAd.View.TRANSITION_DOOR_OPEN_LEFT_OUT={base:["anchorPoint",new iAd.Point(0,0.5)],properties:["transform"],from:["perspective(800) rotateY(0deg)"],to:["perspective(800) rotateY(-90deg)"]};iAd.View.TRANSITION_DOOR_CLOSE_LEFT_IN={base:["anchorPoint",new iAd.Point(0,0.5)],properties:["transform"],from:["perspective(800) rotateY(-90deg)"],to:["perspective(800) rotateY(0deg)"]};iAd.View.TRANSITION_DOOR_OPEN_RIGHT_OUT={base:["anchorPoint",new iAd.Point(1,0.5)],properties:["transform"],from:["perspective(800) rotateY(0deg)"],to:["perspective(800) rotateY(90deg)"]};iAd.View.TRANSITION_DOOR_CLOSE_RIGHT_IN={base:["anchorPoint",new iAd.Point(1,0.5)],properties:["transform"],from:["perspective(800) rotateY(90deg)"],to:["perspective(800) rotateY(0deg)"]};iAd.View.TRANSITION_REVOLVE_TOWARDS_LEFT_OUT={base:["anchorPoint",new iAd.Point(0,0.5)],properties:["transform","opacity"],from:["perspective(800) rotateY(0deg)",1],to:["perspective(800) rotateY(-90deg)",0]};iAd.View.TRANSITION_REVOLVE_TOWARDS_LEFT_IN={base:["anchorPoint",new iAd.Point(0,0.5)],properties:["transform"],from:["perspective(800) rotateY(90deg)"],to:["perspective(800) rotateY(0deg)"]};iAd.View.TRANSITION_REVOLVE_AWAY_LEFT_OUT={base:["anchorPoint",new iAd.Point(0,0.5)],properties:["transform"],from:["perspective(800) rotateY(0deg)"],to:["perspective(800) rotateY(90deg)"]};iAd.View.TRANSITION_REVOLVE_AWAY_LEFT_IN={base:["anchorPoint",new iAd.Point(0,0.5)],properties:["transform","opacity"],from:["perspective(800) rotateY(-90deg)",0],to:["perspective(800) rotateY(0deg)",1]};iAd.View.TRANSITION_REVOLVE_TOWARDS_RIGHT_OUT={base:["anchorPoint",new iAd.Point(1,0.5)],properties:["transform","opacity"],from:["perspective(800) rotateY(0deg)",1],to:["perspective(800) rotateY(90deg)",0]};iAd.View.TRANSITION_REVOLVE_TOWARDS_RIGHT_IN={base:["anchorPoint",new iAd.Point(1,0.5)],properties:["transform"],from:["perspective(800) rotateY(-90deg)"],to:["perspective(800) rotateY(0deg)"]};iAd.View.TRANSITION_REVOLVE_AWAY_RIGHT_OUT={base:["anchorPoint",new iAd.Point(1,0.5)],properties:["transform"],from:["perspective(800) rotateY(0deg)"],to:["perspective(800) rotateY(-90deg)"]};iAd.View.TRANSITION_REVOLVE_AWAY_RIGHT_IN={base:["anchorPoint",new iAd.Point(1,0.5)],properties:["transform","opacity"],from:["perspective(800) rotateY(90deg)",0],to:["perspective(800) rotateY(0deg)",1]};iAd.View.TRANSITION_SPIN_LEFT_OUT={properties:["transform","opacity"],from:["perspective(800) rotate(0)",1],to:["perspective(800) rotate(180deg)",0]};iAd.View.TRANSITION_SPIN_LEFT_IN={base:["zIndex",1],properties:["transform","opacity"],from:["perspective(800) rotate(-180deg)",0],to:["perspective(800) rotate(0)",1]};iAd.View.TRANSITION_SPIN_RIGHT_OUT={properties:["transform","opacity"],from:["perspective(800) rotate(0)",1],to:["perspective(800) rotate(-180deg)",0]};iAd.View.TRANSITION_SPIN_RIGHT_IN={base:["zIndex",1],properties:["transform","opacity"],from:["perspective(800) rotate(180deg)",0],to:["perspective(800) rotate(0)",1]};iAd.View.TRANSITION_SCALE_IN={base:["zIndex",1],properties:["transform"],from:["scale(0.01)"],to:["scale(1)"]};iAd.View.TRANSITION_SCALE_OUT={base:["zIndex",1],properties:["transform"],from:["scale(1)"],to:["scale(0.01)"]};
/**
*
* Copyright © 2009-2016 Apple Inc.  All rights reserved.
*
**/

iAd.View.TRANSITION_DOOR_OPEN_LEFT_TOP_OUT=function(a){var b=Math.max(800,a.size.width*1.5);return{base:["anchorPoint",new iAd.Point(0,0.5),"zIndex",1],properties:["transform"],from:["perspective("+b+") translateZ(1px) rotateY(0deg)"],to:["perspective("+b+") translateZ(1px) rotateY(-90deg)"]}};iAd.View.TRANSITION_DOOR_CLOSE_LEFT_TOP_IN=function(a){var b=Math.max(800,a.size.width*1.5);return{base:["anchorPoint",new iAd.Point(0,0.5),"zIndex",1],properties:["transform"],from:["perspective("+b+") translateZ(1px) rotateY(-90deg)"],to:["perspective("+b+")  translateZ(1px) rotateY(0deg)"]}};iAd.View.TRANSITION_DOOR_OPEN_RIGHT_TOP_OUT=function(a){var b=Math.max(800,a.size.width*1.5);return{base:["anchorPoint",new iAd.Point(1,0.5),"zIndex",1],properties:["transform"],from:["perspective("+b+") translateZ(1px) rotateY(0deg)"],to:["perspective("+b+") translateZ(1px) rotateY(90deg)"]}};iAd.View.TRANSITION_DOOR_CLOSE_RIGHT_TOP_IN=function(a){var b=Math.max(800,a.size.width*1.5);return{base:["anchorPoint",new iAd.Point(1,0.5),"zIndex",1],properties:["transform"],from:["perspective("+b+") translateZ(1px) rotateY(90deg)"],to:["perspective("+b+") translateZ(1px) rotateY(0deg)"]}};(function(){if(!iAP.Context.IS_ITUNES){return}iAd.View.TRANSITION_FLIP_LEFT_OUT.to[0]="perspective(800) rotateY(-179deg) translateZ(-1px)";iAd.View.TRANSITION_FLIP_LEFT_IN.from[0]="perspective(800) rotateY(179deg) translateZ(-1px)";iAd.View.TRANSITION_FLIP_RIGHT_OUT.to[0]="perspective(800) rotateY(179deg) translateZ(-1px)";iAd.View.TRANSITION_FLIP_RIGHT_IN.from[0]="perspective(800) rotateY(-179deg) translateZ(-1px)";var e=function(h){var g=h.properties.indexOf("transform");h.from[g]=new WebKitCSSMatrix(h.from[g]).toString();h.to[g]=new WebKitCSSMatrix(h.to[g]).toString();return h};var f=function(g){if(iAd.Utils.objectIsFunction(g)){return function(h){return e(g(h))}}else{return e(g)}};var a=["TRANSITION_FLIP_LEFT_OUT","TRANSITION_FLIP_LEFT_IN","TRANSITION_FLIP_RIGHT_OUT","TRANSITION_FLIP_RIGHT_IN","TRANSITION_CUBE_LEFT_OUT","TRANSITION_CUBE_LEFT_IN","TRANSITION_CUBE_RIGHT_OUT","TRANSITION_CUBE_RIGHT_IN","TRANSITION_DOOR_OPEN_LEFT_OUT","TRANSITION_DOOR_CLOSE_LEFT_IN","TRANSITION_DOOR_OPEN_RIGHT_OUT","TRANSITION_DOOR_CLOSE_RIGHT_IN","TRANSITION_DOOR_OPEN_LEFT_TOP_OUT","TRANSITION_DOOR_CLOSE_LEFT_TOP_IN","TRANSITION_DOOR_OPEN_RIGHT_TOP_OUT","TRANSITION_DOOR_CLOSE_RIGHT_TOP_IN"];for(var c=0,d=a.length;c<d;c++){var b=a[c];iAd.View[b]=f(iAd.View[b])}})();
/**
*
* Copyright © 2009-2016 Apple Inc.  All rights reserved.
*
**/

iAd.Class({name:"iAP.EventDelegate",superclass:iAd.Object,synthesizedProperties:["eventHandlers","target","userScriptFunction","executionContext"]});iAP.EventDelegate.prototype.init=function(c,b,a){this.renamedEvents={};this.renamedEvents.flipViewDidFlip="containerDidFocusCellAtIndex";this.renamedEvents.audioButtonDidPlay="mediaDidPlay";this.renamedEvents.audioButtonDidPause="mediaDidPause";this.renamedEvents.audioButtonDidEnd="mediaDidEnd";this.renamedEvents.audioButtonDidTimeUpdate="mediaDidTimeUpdate";this.renamedEvents.didReceiveResponseData="mapViewDidReceiveResponseData";this.renamedEvents.didReceiveDataFailure="mapViewDidReceiveDataFailure";this.renamedEvents.annotationCalloutTapped="mapViewAnnotationLeftCalloutTapped";this.renamedEvents.mapViewDidTapAnnotationCallout="mapViewAnnotationLeftCalloutTapped";if(iAd.VideoPlayer&&c instanceof iAd.VideoPlayer){this.renamedEvents.mediaDidPlay="mediaPlaybackDidStart";this.renamedEvents.mediaDidPause="mediaPlaybackDidPause";this.renamedEvents.mediaDidEnd="mediaPlaybackDidEnd";this.renamedEvents.mediaDidTimeUpdate="mediaPlaybackDidProgress";this.renamedEvents.mediaDidEnterWaitingState="mediaPlaybackDidBeginWaiting";this.renamedEvents.mediaDidExitWaitingState="mediaPlaybackDidEndWaiting"}if(iAP.AudioButton&&c instanceof iAP.AudioButton){this.renamedEvents.audioButtonDidPlay="mediaPlaybackDidStart";this.renamedEvents.audioButtonDidPause="mediaPlaybackDidPause";this.renamedEvents.audioButtonDidEnd="mediaPlaybackDidEnd";this.renamedEvents.audioButtonDidTimeUpdate="mediaDidUpdateTime";this.renamedEvents.mediaDidPlay="mediaPlaybackDidStart";this.renamedEvents.mediaDidPause="mediaPlaybackDidPause";this.renamedEvents.mediaDidEnd="mediaPlaybackDidEnd";this.renamedEvents.mediaDidTimeUpdate="mediaDidUpdateTime"}if(iAP.RootViewController&&c instanceof iAP.RootViewController){this.renamedEvents.adDidFinishLaunching="didFinishLaunching";this.renamedEvents.adWillBeDismissed="willBeDismissed"}this.renamedEvents.galleryViewDidSelectCell="containerDidFocusCellAtIndex";this.renamedEvents.carouselViewDidChangeIndex="containerDidFocusCellAtIndex";this.renamedEvents.webGLViewModelDidLoad="webGLViewSceneDidLoad";this.renamedEvents.chapterListDidTapFrontCell="chapterListViewDidActivateChapter";this.renamedEvents.songSelected="songListDidActivateSong";this.renamedEvents.bannerWillAppear="viewControllerViewWillAppear";this.renamedEvents.bannerDidAppear="viewControllerViewDidAppear";this.callSuper();this._target=c;this._executionContext=b;this._userScriptFunction=a;this._eventHandlers={};if(b==null){this._executionContext=this}};iAP.EventDelegate.prototype.processUserScript=function(){for(var b in this.eventHandlers){var d=this.eventHandlers[b];this.target.removeEventListener(b,this,false);this.executionContext["on"+b.substr(0,1).toUpperCase()+b.substr(1)]=null}this._eventHandlers={};var a=this.executionContext.handleEvent;this.userScriptFunction.call(this.executionContext);if(this.executionContext.handleEvent!==a){var c=this.executionContext;var f=this.executionContext.handleEvent;var e=function(h){a.apply(c,[h]);f.apply(c,[h])};this.executionContext.handleEvent=e}for(key in this.executionContext){if(key.substr(0,2)!="on"){continue}var g=this.executionContext[key];if(typeof g=="function"){b=key.substr(2,1).toLowerCase()+key.substr(3);if(this.renamedEvents[b]){b=this.renamedEvents[b]}if(b==iAP.ViewController.VIEW_DID_ACTIVATE){this.target.__handlesActivateEvent=true}this.target.addEventListener(b,this,false);this.eventHandlers[b]=g}}};iAP.EventDelegate.prototype.handleEvent=function(b){var a=this.eventHandlers[b.type];if(a!=null&&b.ad&&b.ad.sender===this.target){if(b["arguments"]){a.apply(this.executionContext,b["arguments"])}else{a.call(this.executionContext,b)}}};iAP.EventDelegate.viewScriptFunctions={};iAP.EventDelegate.viewControllerScriptFunctions={};iAP.EventDelegate.registerViewControllerEventDelegate=function(b,a){iAP.EventDelegate.viewControllerScriptFunctions[b]=a};iAP.EventDelegate.registerViewEventDelegate=function(b,c,a){if(iAP.EventDelegate.viewScriptFunctions[c]==null){iAP.EventDelegate.viewScriptFunctions[c]={}}iAP.EventDelegate.viewScriptFunctions[c][b]=a};
/**
*
* Copyright © 2009-2016 Apple Inc.  All rights reserved.
*
**/

iAd.Class({name:"iAd.ActionListManager",mixins:[iAd.EventTarget]});iAd.ActionListManager.ACTIVE_STATE_SUFFIX="-is-active";iAd.ActionListManager.ACTION_LIST_WILL_START="actionListWillStart";iAd.ActionListManager.ACTION_LIST_DID_START="actionListDidStart";iAd.ActionListManager.ACTION_LIST_WILL_ITERATE="actionListWillIterate";iAd.ActionListManager.ACTION_LIST_DID_ITERATE="actionListDidIterate";iAd.ActionListManager.ACTION_LIST_WILL_COMPLETE="actionListWillComplete";iAd.ActionListManager.ACTION_LIST_DID_COMPLETE="actionListDidComplete";iAd.ActionListManager.ACTION_LIST_DID_CANCEL="actionListDidCancel";iAd.ActionListManager.ACTION_LIST_DID_PROGRESS="actionListDidProgress";iAd.ActionListManager.prototype.init=function(c,d){this.callSuper();this.eventTarget=document;this.id=c.id||iAd.ActionListManager.uniqueId();this.actionList=c;this.viewController=d;this.actionsByName={};this.actions=[];this.executedActions=[];this.seedActions=[];this.actionQueue=[];this.dependency={};this.selectors=[];this.timers=[];this.cachedElements=[];this.usesAnimationIterationCount=true;var b,a;this.actionList.actions.forEach(function(i){var n=i.type;if(n=="css-reset"){this.selectors.push(i.selector);this.cachedElements.push.apply(this.cachedElements,document.querySelectorAll(i.selector));return}var e=i.name,g=i.startAfter||[];if(n=="script"){var j=i.className,f=iAd.Utils.resolveObjectPath(j);if(!f){throw new ReferenceError("Can't find script action class named: "+j)}var l=new f(this.viewController);var m=i.properties;for(var o in m){l[o]=m[o]}if(i.delay){l.delay=i.delay}if(!i.asynchronous){l.delegate=this}l._action=i;l.prepare();i.object=l;this.usesAnimationIterationCount=false}else{if(n=="css"){this.selectors.push(i.selector);this.cachedElements.push.apply(this.cachedElements,document.querySelectorAll(i.selector));var h=i.duration||0;if(!b){b=h}else{if(b!=h){this.usesAnimationIterationCount=false}}var k=i.delay||0;if(!a){a=k}else{if(a!=k){this.usesAnimationIterationCount=false}}}}if(g.length>0){g.forEach(function(p){if(this.dependency[p]){this.dependency[p].push(i)}else{this.dependency[p]=[i]}},this);this.usesAnimationIterationCount=false}else{this.seedActions.push(i)}if(e){this.actionsByName[e]=i}i.completed=false;this.actions.push(i)},this);this.totalIterations=this.actionList.iterationCount||1;this.totalActions=this.actions.length};iAd.ActionListManager.prototype.start=function(){if(this.viewController.isInState(this.actionList.cssClassName)){this.resetActions();this.viewController.exitState(this.actionList.cssClassName);this.timers.push(this.callMethodNameAfterDelay("start",0));return}this.clearCSSAnimationProperties();this.dispatchNotification(iAd.ActionListManager.ACTION_LIST_WILL_START,this.viewController,[["actionList",this.actionList]]);this.viewController.enterState(this.actionList.cssClassName);this.viewController.enterState(this.actionList.cssClassName+iAd.ActionListManager.ACTIVE_STATE_SUFFIX);document.addEventListener("webkitAnimationEnd",this,true);if(this.usesAnimationIterationCount){document.addEventListener("webkitAnimationIteration",this,true)}this.completedIterationCount=0;this.iterate();this.dispatchNotification(iAd.ActionListManager.ACTION_LIST_DID_START,this.viewController,[["actionList",this.actionList]])};iAd.ActionListManager.prototype.iterate=function(){this.dispatchNotification(iAd.ActionListManager.ACTION_LIST_WILL_ITERATE,this.viewController,[["actionList",this.actionList],["iteration",this.completedIterationCount]]);this.completedActionCount=0;this.actionQueue=this.seedActions.slice();this.flushActionQueue()};iAd.ActionListManager.prototype.clearCSSAnimationProperties=function(){if(this.selectors.length===0){return}var d=this.selectors.join(",");var e=Array.prototype.slice.call(document.querySelectorAll(d));var a=this.viewController.view;if(!a.superview){e.push.apply(e,Array.prototype.slice.call(a.layer.querySelectorAll(d)))}for(var c=e.length-1;c>=0;c--){var b=e[c];this.viewController.actionListDidResetAnimation(this,b.style.webkitAnimationName);b.style.webkitAnimationName="";b.style.webkitAnimationDuration="";b.style.webkitAnimationDelay="";b.style.webkitAnimationIterationCount=""}};iAd.ActionListManager.prototype.resetActions=function(){this.clearCSSAnimationProperties();var a;for(a=this.timers.length-1;a>=0;a--){clearTimeout(this.timers[a])}this.timers=[];this.actionQueue=[];for(a=this.executedActions.length-1;a>=0;a--){this.executedActions[a].reset()}this.executedActions=[];this.actions.forEach(function(b){b.completed=false},this)};iAd.ActionListManager.prototype.reset=function(){document.removeEventListener("webkitAnimationEnd",this,true);if(this.usesAnimationIterationCount){document.removeEventListener("webkitAnimationIteration",this,true)}this.resetActions();this.viewController.exitState(this.actionList.cssClassName);this.viewController.exitState(this.actionList.cssClassName+iAd.ActionListManager.ACTIVE_STATE_SUFFIX);this.dispatchNotification(iAd.ActionListManager.ACTION_LIST_DID_CANCEL,this.viewController,[["actionList",this.actionList]])};iAd.ActionListManager.prototype.handleEvent=function(c){var e,b=c.type;if(b=="webkitAnimationEnd"||b=="webkitAnimationIteration"){var f=this.viewController._pageState.name;var d=c.animationName;var a=(f?"-"+f:"")+"(-brightness-fallback)?$";d=d.replace(new RegExp(a),"");e=this.actionsByName[d]}if(!e||e.asynchronous){return}this.handleActionDidComplete(e)};iAd.ActionListManager.prototype.scriptActionDidComplete=function(a){this.handleActionDidComplete(a._action)};iAd.ActionListManager.prototype.handleActionDidComplete=function(g){if(!this.viewController.isInState(this.actionList.cssClassName)){return}if(g.completed){return}g.completed=true;this.completedActionCount++;var b=this.totalIterations=="infinite"?0:(this.completedIterationCount*this.totalActions+this.completedActionCount)/(this.totalActions*this.totalIterations);this.dispatchNotification(iAd.ActionListManager.ACTION_LIST_DID_PROGRESS,this.viewController,[["actionList",this.actionList],["action",g],["progress",b]]);if(this.completedActionCount==this.totalActions){this.dispatchNotification(iAd.ActionListManager.ACTION_LIST_DID_ITERATE,this.viewController,[["actionList",this.actionList],["iteration",this.completedIterationCount]]);this.completedIterationCount++;if(this.totalIterations!="infinite"&&this.completedIterationCount==this.totalIterations){this.dispatchNotification(iAd.ActionListManager.ACTION_LIST_WILL_COMPLETE,this.viewController,[["actionList",this.actionList]]);document.removeEventListener("webkitAnimationEnd",this,true);if(this.usesAnimationIterationCount){document.removeEventListener("webkitAnimationIteration",this,true)}this.dispatchNotification(iAd.ActionListManager.ACTION_LIST_DID_COMPLETE,this.viewController,[["actionList",this.actionList]]);this.viewController.exitState(this.actionList.cssClassName+iAd.ActionListManager.ACTIVE_STATE_SUFFIX)}else{if(this.usesAnimationIterationCount){if(this.totalIterations>1&&this.completedIterationCount>0&&this.actionList.loopDelay>0){var a=this.cachedElements;for(var o=0,c=a.length;o<c;++o){a[o].style.webkitAnimationPlayState="paused"}this.timers.push(setTimeout(function(){for(var j=0,r=a.length;j<r;++j){a[j].style.webkitAnimationPlayState="running"}},this.actionList.loopDelay*1000))}this.dispatchNotification(iAd.ActionListManager.ACTION_LIST_WILL_ITERATE,this.viewController,[["actionList",this.actionList],["iteration",this.completedIterationCount]]);this.actions.forEach(function(i){i.completed=false},this);this.completedActionCount=0}else{this.resetActions();this.timers.push(this.callMethodNameAfterDelay("iterate",this.actionList.loopDelay*1000))}}}else{var h=g.name;if(h){var p=this.dependency[h];if(p){for(var l=0,n=p.length;l<n;l++){var f=p[l];var e=f.startAfter;var q=true;for(var k=0,d=e.length;k<d;k++){var m=this.actionsByName[e[k]];if(m&&!m.completed){q=false;break}}if(q){this.actionQueue.push(f)}}}}}this.flushActionQueue()};iAd.ActionListManager.prototype.flushActionQueue=function(){if(this.actionQueue.length===0){return}var g=this.viewController._pageState.name;var b=g?"-"+g:"";var f=this.actionList.keyframesForBrightnessFallback||[];var e=[];var a={};this.actionQueue.forEach(function(n){var s=n.type;if(s=="css"){var j=document.querySelectorAll(n.selector),l=j.length;if(l>0){var v=n.name+b,q=n.duration+"s",t=n.delay||0+"s";if(!iAP.supportsNewCSSBrightnessFilter){var u=v+"-brightness-fallback";if(f.indexOf(u)!=-1){v=u}}for(var p=0;p<l;p++){var o=j[p];var k=o.id;if(!k){k=o.id=iAd.ActionListManager.uniqueId()}var m=a[k];if(!m){m=a[k]={keyframeNames:[v],durations:[q],delays:[t],element:o}}else{m.keyframeNames.push(v);m.durations.push(q);m.delays.push(t)}}}else{e.push(n)}}else{if(s=="script"){var r=n.object;this.executedActions.push(r);r.sourceView=this.sourceView;this.timers.push(r.run())}}if(n.asynchronous){e.push(n)}},this);for(var c in a){var h=a[c];var d=h.element;d.style.webkitAnimationName=h.keyframeNames.join(",");d.style.webkitAnimationDuration=h.durations.join(",");d.style.webkitAnimationDelay=h.delays.join(",");d.style.webkitAnimationFillMode="both";d.style.webkitAnimationIterationCount=this.usesAnimationIterationCount?this.totalIterations:""}this.actionQueue=[];e.forEach(this.handleActionDidComplete,this);this.flushActionQueue()};iAd.ActionListManager.uniqueId=function(){return"al-"+this._uid++};iAd.ActionListManager._uid=1;
/**
*
* Copyright © 2009-2016 Apple Inc.  All rights reserved.
*
**/

iAd.Class.synthesizeProperty(iAd.ActionListManager.prototype,"sourceView");iAd.ActionListManager._deferredActionLists=[];iAd.Utils.replaceMethod(iAd.ActionListManager,"start",function(){if(iAd.ActionListManager._deferActionLists){iAd.ActionListManager._deferredActionLists.push(this);return}this.callOriginal()});iAd.ActionListManager._resumeDeferredActionLists=function(){if(!iAd.ActionListManager._deferActionLists){return}delete iAd.ActionListManager._deferActionLists;var a=iAd.ActionListManager._deferredActionLists;for(var b=0,c=a.length;b<c;b++){a[b].start()}iAd.ActionListManager._deferredActionLists=[]};
/**
*
* Copyright © 2009-2016 Apple Inc.  All rights reserved.
*
**/

iAd.Class({name:"iAd.Loader",mixins:[iAd.EventTarget],synthesizedProperties:["supportingObject","progress","url","resolvedURL","timeout"]});iAd.Loader.DID_START="loaderDidStart";iAd.Loader.DID_PROGRESS="loaderDidProgress";iAd.Loader.DID_COMPLETE="loaderDidComplete";iAd.Loader.DID_FAIL="loaderDidFail";iAd.Loader.NO_ERROR=0;iAd.Loader.LOAD_ERROR=1;iAd.Loader.LOAD_ABORTED=2;iAd.Loader.LOAD_TIMED_OUT=3;iAd.Loader.DEFAULT_TIMEOUT=0;iAd.Loader.prototype.init=function(a){this.callSuper();this.url=a;this._timeout=-1;this.delegate=null;this.loading=false;this.loaded=false;this.error=iAd.Loader.NO_ERROR;this.eventTarget=document};iAd.Loader.prototype.load=function(){if(this.loading){return false}this.loading=true;this.loaded=false;this.error=iAd.Loader.NO_ERROR;this.startTimeoutTimer();this.notifyLoaderDidStart();this.startLoad();return true};iAd.Loader.prototype.abort=function(){if(!this.loading||this.loaded){return false}this.actuallyAbort();this.notifyLoaderDidFail(iAd.Loader.LOAD_ABORTED);return true};iAd.Loader.prototype.actuallyAbort=function(){this.loading=false;this.loaded=false;this.abortLoad()};iAd.Loader.prototype.getProgress=function(){return this.loaded?1:0};iAd.Loader.prototype.setUrl=function(a){if(this.loading||this.loaded){iAd.Console.warn("iAd.Loader: You cannot change the url after starting the load.");return}this._url=a};iAd.Loader.prototype.getResolvedURL=function(){return iAd.Path.resolveAbsolutePath(this._url)};iAd.Loader.prototype.getTimeout=function(){return this._timeout>=0?this._timeout:this.constructor.DEFAULT_TIMEOUT};iAd.Loader.prototype.startLoad=function(){this.notifyLoaderDidFail(iAd.Loader.LOAD_ERROR)};iAd.Loader.prototype.abortLoad=function(){};iAd.Loader.prototype.startTimeoutTimer=function(){if(this.timeout>0){this.timeoutTimer=this.callMethodNameAfterDelay("handleTimeout",this.timeout)}};iAd.Loader.prototype.cancelTimeoutTimer=function(){if(this.timeoutTimer){clearTimeout(this.timeoutTimer)}this.timeoutTimer=null};iAd.Loader.prototype.handleTimeout=function(){this.actuallyAbort();this.notifyLoaderDidFail(iAd.Loader.LOAD_TIMED_OUT)};iAd.Loader.prototype.notifyLoaderDidStart=function(){this.loading=true;this.dispatchLoaderNotification(iAd.Loader.DID_START)};iAd.Loader.prototype.notifyLoaderDidProgress=function(){this.dispatchLoaderNotification(iAd.Loader.DID_PROGRESS,[["progress",this.progress]])};iAd.Loader.prototype.notifyLoaderDidFail=function(a){this.cancelTimeoutTimer();this.loading=false;this.error=a;this.dispatchLoaderNotification(iAd.Loader.DID_FAIL,[["error",(a||iAd.Loader.LOAD_ERROR)]])};iAd.Loader.prototype.notifyLoaderDidComplete=function(){if(this.loaded&&!this.loading){return}this.cancelTimeoutTimer();this.loading=false;this.loaded=true;this.dispatchLoaderNotification(iAd.Loader.DID_COMPLETE)};iAd.Loader.prototype.dispatchLoaderNotification=function(a,b){this.dispatchNotification(a,this.delegate,b);this.notifyDelegate(a,this._manager,b)};
/**
*
* Copyright © 2009-2016 Apple Inc.  All rights reserved.
*
**/

iAd.Class({name:"iAd.ImageLoader",superclass:iAd.Loader});iAd.ImageLoader.DEFAULT_TIMEOUT=5;iAd.ImageLoader.prototype.init=function(c,b,a){this.callSuper(c);this.hasHiDPIVersion=b;this.hasiPadVersion=a};iAd.ImageLoader.prototype.startLoad=function(){var a=this._img=document.createElement("img");this.addImageEventListeners();a.src=this.processImageURL(this._url,this.hasHiDPIVersion)};iAd.ImageLoader.prototype.processImageURL=function(c,b,a){if(b&&iAd.Device.HAS_HIDPI_DISPLAY){c=iAd.Path.appendHiDPISuffix(c)}if(a&&iAd.Device.IS_IPAD){c=iAd.Path.appendiPadSuffix(c)}return c};iAd.ImageLoader.prototype.abortLoad=function(){this.removeImageEventListeners()};iAd.ImageLoader.prototype.getSupportingObject=function(){return this._img};iAd.ImageLoader.prototype.getResolvedURL=function(){return this.processImageURL(this.callSuper(),this.hasHiDPIVersion,this.hasiPadVersion)};iAd.ImageLoader.prototype.handleEvent=function(a){this.removeImageEventListeners();if(a.type=="load"){this.notifyLoaderDidComplete()}else{if(a.type=="error"){this.notifyLoaderDidFail(iAd.Loader.LOAD_ERROR)}}};iAd.ImageLoader.prototype.addImageEventListeners=function(){if(this._img){this._img.addEventListener("load",this);this._img.addEventListener("error",this)}};iAd.ImageLoader.prototype.removeImageEventListeners=function(){if(this._img){this._img.removeEventListener("load",this);this._img.removeEventListener("error",this)}};
/**
*
* Copyright © 2009-2016 Apple Inc.  All rights reserved.
*
**/

iAd.ImageLoader.prototype.processImageURL=function(c,b,a){var d=iAd.Image.resolvedInfoForURL(c);return d.resolvedURL};
/**
*
* Copyright © 2009-2016 Apple Inc.  All rights reserved.
*
**/

iAd.Class({name:"iAd.StyleLoader",superclass:iAd.Loader});iAd.StyleLoader.DEFAULT_TIMEOUT=0;iAd.StyleLoader.LOAD_EVENT_SUPPORT_DETECTED=false;iAd.StyleLoader.prototype.startLoad=function(){var a=this._element=document.createElement("link");a.rel="stylesheet";a.href=this._url;if(iAd.CSS.isStyleSheetLoaded(this.resolvedURL)){this._element=iAd.CSS.elementForStyleSheet(this.resolvedURL);this.notifyLoaderDidComplete();return}this.addElementListeners();if(!iAd.StyleLoader.LOAD_EVENT_SUPPORT_DETECTED){iAd.StyleLoader.enqueueStyleLoader(this)}document.head.appendChild(a)};iAd.StyleLoader.prototype.abortLoad=function(){if(this._element){this.removeElementListeners();document.head.removeChild(this._element);iAd.StyleLoader.dequeueStyleLoader(this)}};iAd.StyleLoader.prototype.getSupportingObject=function(){return this._element};iAd.StyleLoader.prototype.getResolvedURL=function(){return this._element?this._element.href:this.callSuper()};iAd.StyleLoader.prototype.addElementListeners=function(a){this._element.addEventListener("load",this);this._element.addEventListener("error",this)};iAd.StyleLoader.prototype.removeElementListeners=function(a){this._element.removeEventListener("load",this);this._element.removeEventListener("error",this)};iAd.StyleLoader.prototype.handleEvent=function(a){iAd.StyleLoader.LOAD_EVENT_SUPPORT_DETECTED=true;iAd.StyleLoader.dequeueStyleLoader(this);this.removeElementListeners();switch(a.type){case"load":if(!this.loaded){this.notifyLoaderDidComplete()}break;case"error":this.notifyLoaderDidFail();break}};iAd.StyleLoader.stylesheetsLoadingQueue={};iAd.StyleLoader.stylesheetsLoadPoller=null;iAd.StyleLoader.enqueueStyleLoader=function(b){var c=b.resolvedURL;var a=iAd.StyleLoader.stylesheetsLoadingQueue;if(a.hasOwnProperty(c)){a[c].push(b)}else{a[c]=[b]}if(iAd.StyleLoader.stylesheetsLoadPoller==null){iAd.StyleLoader.stylesheetsLoadPoller=window.setInterval(iAd.StyleLoader.pollStylesheetLoad,50)}};iAd.StyleLoader.dequeueStyleLoader=function(b){var a=iAd.StyleLoader.stylesheetsLoadingQueue;var c=b.resolvedURL;if(a.hasOwnProperty(c)){iAd.Array.removeObjectFromArray(b,a[c])}if(a[c]&&a[c].length==0){delete a[c]}if(iAd.StyleLoader.stylesheetsLoadPoller&&Object.keys(a).length==0){iAd.StyleLoader.stopPolling()}};iAd.StyleLoader.pollStylesheetLoad=function(){var a=iAd.StyleLoader.stylesheetsLoadingQueue;if(iAd.StyleLoader.LOAD_EVENT_SUPPORT_DETECTED){iAd.StyleLoader.stylesheetsLoadingQueue={};iAd.StyleLoader.stopPolling();return}for(var b in a){if(iAd.CSS.isStyleSheetLoaded(b)){a[b].forEach(function(c){c.notifyLoaderDidComplete()});delete a[b]}}if(Object.keys(a).length==0){iAd.StyleLoader.stopPolling()}};iAd.StyleLoader.stopPolling=function(){window.clearInterval(iAd.StyleLoader.stylesheetsLoadPoller);iAd.StyleLoader.stylesheetsLoadPoller=null};
/**
*
* Copyright © 2009-2016 Apple Inc.  All rights reserved.
*
**/

iAd.StyleLoader.prototype.handleEvent=function(){};
/**
*
* Copyright © 2009-2016 Apple Inc.  All rights reserved.
*
**/

iAd.Class({name:"iAd.LoaderManager",superclass:iAd.Loader,synthesizedProperties:["length"]});iAd.LoaderManager.DID_PROGRESS="loaderDidProgress";iAd.LoaderManager.prototype.init=function(a){this.callSuper();this._progress=0;this.loaders=a||[];this.pendingLoaders=this.loaders.slice();this.failedLoaders=[];this.completedLoaders=[];this.openLoaders=[]};iAd.LoaderManager.prototype.add=function(a){if(this.contains(a)){iAd.Console.warn(this.constructor.displayName+": Unable to add loader again if already managed.");return false}if(a.error||a.loaded||a.loading){iAd.Console.warn(this.constructor.displayName+": Unable to add a loader that has already started to load.");return false}this.loaders.push(a);this.pendingLoaders.push(a);if(this.loading){this.updateProgress()}return true};iAd.LoaderManager.prototype.remove=function(a){if(this.loading){iAd.Console.warn(this.constructor.displayName+": Unable to remove loaders from a manager that has already started to load.");return false}if(this.contains(a)&&this.pendingLoaders.indexOf(a)==-1){iAd.Console.warn(this.constructor.displayName+": Unable to remove a loader that has already started to load.");return false}var b=iAd.Array.removeObjectFromArray(a,this.loaders);iAd.Array.removeObjectFromArray(a,this.pendingLoaders);return b};iAd.LoaderManager.prototype.clear=function(){if(this.loading){iAd.Console.warn(this.constructor.displayName+": You cannot clear while loading is in progress.");return}this.resetLoaderArrays();this.updateProgress()};iAd.LoaderManager.prototype.contains=function(a){return this.loaders.indexOf(a)!=-1};iAd.LoaderManager.prototype.resetLoaderArrays=function(){this.pendingLoaders=[];this.completedLoaders=[];this.openLoaders=[];this.failedLoaders=[];this.loaders=[]};iAd.LoaderManager.prototype.getProgress=function(){return this._progress};iAd.LoaderManager.prototype.updateProgress=function(){var g=this.length;if(g==0){this._progress=0;return}var f=this.loaders,d=0,b=0,a,c;for(var e=0;e<g;e++){a=f[e];c=a.length||1;d+=c;b+=c*a.progress}this._progress=b/d};iAd.LoaderManager.prototype.getLength=function(){return this.loaders.length};iAd.LoaderManager.prototype.startLoad=function(){this._progress=0;this.openLoaders=[];this.completedLoaders=[];this.failedLoaders=[]};iAd.LoaderManager.prototype.abortLoad=function(){for(var a=0,b=this.openLoaders.length;a<b;a++){this.openLoaders[a].abort()}return true};iAd.LoaderManager.prototype.loadNextItem=function(){if(this.pendingLoaders.length==0){return}var a=this.pendingLoaders.shift();this.openLoaders.push(a);a._manager=this;a.callMethodNameAfterDelay("load",0)};iAd.LoaderManager.prototype.loaderDidComplete=function(a){this.completedLoaders.push(a);this.loaderDidEnd(a)};iAd.LoaderManager.prototype.loaderDidFail=function(a,b){this.failedLoaders.push(a);this.loaderDidEnd(a)};iAd.LoaderManager.prototype.loaderDidProgress=function(a,c,b){this.notifyLoaderDidProgress(b||a)};iAd.LoaderManager.prototype.loaderDidEnd=function(a){iAd.Array.removeObjectFromArray(a,this.openLoaders);delete a._manager;this.notifyLoaderDidProgress(a)};iAd.LoaderManager.prototype.notifyLoaderDidProgress=function(a){this.updateProgress();this.dispatchLoaderNotification(iAd.Loader.DID_PROGRESS,[["progress",this.progress],["relatedLoader",a]])};
/**
*
* Copyright © 2009-2016 Apple Inc.  All rights reserved.
*
**/

iAd.Class({name:"iAd.LoaderBatch",superclass:iAd.LoaderManager});iAd.LoaderBatch.prototype.add=function(a){var b=this.callSuper(a);if(b&&this.loading){this.loadNextItem();this.notifyLoaderDidProgress()}};iAd.LoaderBatch.prototype.startLoad=function(){this.callSuper();var a=this.pendingLoaders;while(a.length>0){this.loadNextItem()}return true};iAd.LoaderBatch.prototype.loaderDidComplete=function(a){this.callSuper(a);this.checkLoaderDidComplete()};iAd.LoaderBatch.prototype.loaderDidFail=function(a,b){this.callSuper(a,b);this.checkLoaderDidComplete()};iAd.LoaderBatch.prototype.checkLoaderDidComplete=function(){if(this.openLoaders.length==0){this.notifyLoaderDidComplete()}};
/**
*
* Copyright © 2009-2016 Apple Inc.  All rights reserved.
*
**/

iAd.Class({name:"iAd.XHRLoader",superclass:iAd.Loader,synthesizedProperties:["xmlContent","content"]});iAd.XHRLoader.SUPPORTS_CONTENT_TYPE=(new XMLHttpRequest()).hasOwnProperty("responseType");iAd.XHRLoader.XHR_EVENTS=["loadstart","progress","abort","error","load","timeout","loadend","readystatechange"];iAd.XHRLoader.DEFAULT_TIMEOUT=0;iAd.XHRLoader.prototype.init=function(a,c,b){this.callSuper(a);this.method=c||"GET";this.params=b;this.headers={};this.urlEncoded=true;this.contentType=""};iAd.XHRLoader.prototype.getContent=function(){if(this._xhr){return iAd.XHRLoader.SUPPORTS_CONTENT_TYPE?this._xhr.response:this._xhr.responseText}return null};iAd.XHRLoader.prototype.getXmlContent=function(){try{return this._xhr?this._xhr.responseXML:null}catch(a){return null}};iAd.XHRLoader.prototype.getSupportingObject=function(){return this._xhr};iAd.XHRLoader.prototype.getProgress=function(){if(this.loaded){return 1}return this.bytesTotal?this.bytesLoaded/this.bytesTotal:0};iAd.XHRLoader.prototype.getResolvedURL=function(){return iAd.Path.resolveAbsolutePath(this.shouldSerializeURL()?this.serializeURL():this._url)};iAd.XHRLoader.prototype.startLoad=function(){var a=this.shouldSerializeURL()?this.serializeURL():this._url;var f=this.method.toUpperCase();var b=this.params;if(f=="GET"){b=null}if(this.urlEncoded&&(f=="POST"||f=="PUT")){this.headers["Content-type"]="application/x-www-form-urlencoded; charset=utf-8";if(b){b=this.serializeParams()}}if(!this._xhr){this._xhr=new XMLHttpRequest()}this.addXHRListeners();this._xhr.open(f,a,true);for(var d in this.headers){try{this._xhr.setRequestHeader(d,this.headers[d])}catch(c){iAd.Console.warn('iAd.XHRLoader: Error when attempting to set header "'+d+'".')}}if(iAd.XHRLoader.SUPPORTS_CONTENT_TYPE){try{this._xhr.responseType=this.contentType}catch(c){iAd.Console.warn('iAd.XHRLoader: Invalid contentType "'+this.contentType+'".');this.contentType=""}}this.bytesTotal=0;this.bytesLoaded=0;this._xhr.send(b)};iAd.XHRLoader.prototype.abortLoad=function(){if(this._xhr){this.removeXHRListeners();this._xhr.abort();this._xhr=null}};iAd.XHRLoader.prototype.serializeURL=function(){var a=this._url;var b=(a.indexOf("?")!=-1)?"&":"?";return this.params?a+b+this.serializeParams():a};iAd.XHRLoader.prototype.serializeParams=function(){return iAd.Path.objectToQueryString(this.params)};iAd.XHRLoader.prototype.shouldSerializeURL=function(){return this.method.toUpperCase()=="GET"&&!!this.params};iAd.XHRLoader.prototype.addXHRListeners=function(){var b=iAd.XHRLoader.XHR_EVENTS;for(var a=0,c=b.length;a<c;a++){this._xhr.addEventListener(b[a],this)}};iAd.XHRLoader.prototype.removeXHRListeners=function(){var b=iAd.XHRLoader.XHR_EVENTS;for(var a=0,c=b.length;a<c;a++){this._xhr.removeEventListener(b[a],this)}};iAd.XHRLoader.prototype.handleEvent=function(a){switch(a.type){case"load":this.handleLoadEvent(a);break;case"progress":this.handleProgressEvent(a);break;case"abort":this.handleAbortEvent(a);break;case"error":this.handleErrorEvent(a);break}};iAd.XHRLoader.prototype.handleLoadEvent=function(a){this.notifyLoaderDidComplete()};iAd.XHRLoader.prototype.handleProgressEvent=function(a){if(a.lengthComputable){this.bytesLoaded=a.loaded;this.bytesTotal=a.total}this.notifyLoaderDidProgress()};iAd.XHRLoader.prototype.handleAbortEvent=function(a){this.notifyLoaderDidFail(iAd.Loader.LOAD_ABORTED)};iAd.XHRLoader.prototype.handleErrorEvent=function(a){this.notifyLoaderDidFail(iAd.Loader.LOAD_ERROR)};
/**
*
* Copyright © 2009-2016 Apple Inc.  All rights reserved.
*
**/

iAd.Class({name:"iAd.VideoLoader",superclass:iAd.Loader});iAd.VideoLoader.DEFAULT_TIMEOUT=5;iAd.VideoLoader.prototype.startLoad=function(){this.video=iAd.Video.videoForURL(this._url);this.video.delegate=this;if(this.video.loadReady){this.notifyLoaderDidComplete()}else{this.video.load()}};iAd.VideoLoader.prototype.notifyLoaderDidComplete=function(){iAd.Media.preloadedMedia=this.video;this.callSuper()};iAd.VideoLoader.prototype.getSupportingObject=function(){return this.video};iAd.VideoLoader.prototype.getResolvedURL=function(){return this.video.resolvedURL};iAd.VideoLoader.prototype.mediaLoadIsReady=function(a){this.notifyLoaderDidComplete()};iAd.VideoLoader.prototype.mediaLoadDidFail=function(b,a){this.notifyLoaderDidFail(iAd.Loader.LOAD_ERROR)};
/**
*
* Copyright © 2009-2016 Apple Inc.  All rights reserved.
*
**/

iAd.Class({name:"iAd.ScriptLoader",superclass:iAd.Loader});iAd.ScriptLoader.DEFAULT_TIMEOUT=0;iAd.ScriptLoader.prototype.startLoad=function(){var b=this._element=document.createElement("script");b.type="text/javascript";b.src=this._url;var a=iAd.ScriptLoader.elementForScript(b.src);if(a){this._element=a;this.notifyLoaderDidComplete();return}this.addElementListeners();document.head.appendChild(b)};iAd.ScriptLoader.prototype.abortLoad=function(){if(this._element){this.removeElementListeners();document.head.removeChild(this._element)}};iAd.ScriptLoader.prototype.getSupportingObject=function(){return this._element};iAd.ScriptLoader.prototype.getResolvedURL=function(){return this._element?this._element.src:this.callSuper()};iAd.ScriptLoader.prototype.addElementListeners=function(){if(this._element){this._element.addEventListener("load",this,false);this._element.addEventListener("error",this,false)}};iAd.ScriptLoader.prototype.removeElementListeners=function(){if(this._element){this._element.removeEventListener("load",this,false);this._element.removeEventListener("error",this,false)}};iAd.ScriptLoader.prototype.handleEvent=function(a){this.removeElementListeners();if(a.type=="load"){this.notifyLoaderDidComplete()}else{if(a.type=="error"){this.notifyLoaderDidFail(iAd.Loader.LOAD_ERROR)}}};iAd.ScriptLoader.elementForScript=function(c){var b,a=document.scripts;for(var d=0,e=a.length;d<e;d++){b=a[d];if(b.href==c){return b}}return null};
/**
*
* Copyright © 2009-2016 Apple Inc.  All rights reserved.
*
**/

iAd.Class({name:"iAd.ViewControllerRequiredFilesLoader",superclass:iAd.LoaderBatch,synthesizedProperties:["contentViewMarkup"]});iAd.ViewControllerRequiredFilesLoader.LOADER_CLASSES={stylesheets:iAd.StyleLoader,scripts:iAd.ScriptLoader,images:iAd.ImageLoader,video:iAd.VideoLoader,contentView:iAd.XHRLoader};iAd.ViewControllerRequiredFilesLoader.prototype.init=function(a){this.callSuper();this.viewController=a;var b=a.configuration;if(b.requiredFileURIs){this.processFiles(b.requiredFileURIs)}};iAd.ViewControllerRequiredFilesLoader.prototype.getContentViewMarkup=function(){return this.contentViewLoader.content};iAd.ViewControllerRequiredFilesLoader.prototype.processFiles=function(b){for(var c in b){if(b.hasOwnProperty(c)){switch(c){case"contentView":var a=this.addFilesOfType([b[c]],c);this.contentViewLoader=a[0];break;case"stylesheets":this.addFilesOfType(b[c],c);break;case"scripts":this.addFilesOfType(b[c],c);break;case"images":this.addFilesOfType(b[c],c);break;case"video":this.addFilesOfType([b[c]],c);break;default:iAd.Console.warn('iAd.ViewController # loadRequiredFiles : unknown key "'+c+'" in configuration.requiredFileURIs');break}}}};iAd.ViewControllerRequiredFilesLoader.prototype.addFilesOfType=function(a,j){var h=iAd.ViewControllerRequiredFilesLoader.LOADER_CLASSES[j];if(!h){iAd.Console.warn('iAd.ViewController #loadRequiredFiles : No known loader for type "'+j+'"');return}var f=[];for(var e=0,g=a.length;e<g;e++){var b=a[e];var l;if(h==iAd.ImageLoader){var c=this.viewController.configuration;var k=c.hasHiDPIVersion==null||c.hasHiDPIVersion;var d=c.hasiPadVersion==null||c.hasiPadVersion;l=new h(b,k,d)}else{l=new h(b)}this.add(l);f.push(l)}return f};iAd.ViewControllerRequiredFilesLoader.prototype.notifyLoaderDidProgress=function(a){this.callSuper(a);this.viewController.requiredFilesLoaderDidProgress(this,this.progress,a)};iAd.ViewControllerRequiredFilesLoader.prototype.notifyLoaderDidFail=function(a){this.callSuper(a);this.viewController.requiredFilesLoaderDidFail(this,a)};iAd.ViewControllerRequiredFilesLoader.prototype.notifyLoaderDidComplete=function(){this.callSuper();this.viewController.requiredFilesLoaderDidComplete(this)};
/**
*
* Copyright © 2009-2016 Apple Inc.  All rights reserved.
*
**/

iAd.Utils.replaceMethod(iAd.ViewControllerRequiredFilesLoader,"init",function(e){this.callOriginal.apply(this,arguments);var d=[];d.push.apply(d,e.topAnchoredSharedViewIDs);d.push.apply(d,e.bottomAnchoredSharedViewIDs);var c;for(var a=0,b=d.length;a<b;a++){c=iAd.ViewController.instances[d[a]];if(!c.loadedAllRequiredFiles){if(!c.requiredFilesLoader){c.requiredFilesLoader=new iAd.ViewControllerRequiredFilesLoader(c)}else{if(c.requiredFilesLoader.loading){continue}}this.add(c.requiredFilesLoader);c.loadRequiredFiles()}}});
/**
*
* Copyright © 2009-2016 Apple Inc.  All rights reserved.
*
**/

iAd.Archiver={};iAd.Archiver._uid=1;iAd.Archiver.WILL_ENCODE_OBJECT="willEncodeObjectToArchive";iAd.Archiver.DID_ENCODE_OBJECT="didEncodeObjectToArchive";iAd.Archiver.WILL_RESTORE_OBJECT="willRestoreFromArchive";iAd.Archiver.DID_RESTORE_OBJECT="didRestoreFromArchive";iAd.Archiver.archive=function(c,a){if(!a){a={};return{__root:this.archive(c,a),__objects:a}}if(iAd.Utils.objectIsPrimitive(c)){return c}else{if(iAd.Utils.objectIsArray(c)){return c.map(function(h){return this.archive(h,a)},this)}}var f=c._uid||(c._uid=this._uid++);if(!a[f]){var e=a[f]={};if(iAd.Utils.objectIsInstanceOfClass(c,iAd.Object)){var d=c.constructor;e.__className=d._name;var b=this.archivePropertiesForClass(d);if(iAd.Utils.objectHasMethod(c,iAd.Archiver.WILL_ENCODE_OBJECT)){c[iAd.Archiver.WILL_ENCODE_OBJECT](e)}for(var g in b){e[g]=this.archive(c.archiveProperty(g),a)}if(iAd.Utils.objectHasMethod(c,iAd.Archiver.DID_ENCODE_OBJECT)){c[iAd.Archiver.DID_ENCODE_OBJECT](e)}}else{for(var g in c){if(g!="_uid"){e[g]=this.archive(c[g],a)}}}}return{_uid:f}};iAd.Archiver.archiveToJSON=function(a){return JSON.stringify(this.archive(a))};iAd.Archiver.archivePropertiesForClass=function(g){var d=g._archivePropertyMap;if(d){return d}d=g._archivePropertyMap={};var f=g.superclass;if(f){iAd.Utils.copyPropertiesFromSourceToTarget(this.archivePropertiesForClass(f),d)}var e=g.archivedProperties||[];for(var a=0,c=e.length;a<c;a++){d[e[a]]=true}var b=g.excludedProperties||[];for(a=0,c=b.length;a<c;a++){delete d[b[a]]}return d};iAd.Archiver.restoreFromArchive=function(b,a,j){if(iAd.Utils.objectIsPrimitive(b)){return b}else{if(b.__root){return this.restoreFromArchive(b.__root,b.__objects,{})}else{if(b._uid){var f=b._uid;return j[f]||(j[f]=this.restoreFromArchive(a[f],a,j))}else{if(iAd.Utils.objectIsArray(b)){return b.map(function(k){return this.restoreFromArchive(k,a,j)},this)}else{var g={};for(var i in b){if(i!="__className"){g[i]=this.restoreFromArchive(b[i],a,j)}}if(b.__className){var d=iAd.Utils.resolveObjectPath(b.__className);var c=d;var e;do{e=c.restoreFromArchive}while(!e&&(c=c.superclass));var h=e?e.call(d,g):new d();if(iAd.Utils.objectHasMethod(h,iAd.Archiver.WILL_RESTORE_OBJECT)){h[iAd.Archiver.WILL_RESTORE_OBJECT](b)}for(var i in g){h.restoreProperty(i,g[i])}if(iAd.Utils.objectHasMethod(h,iAd.Archiver.DID_RESTORE_OBJECT)){h[iAd.Archiver.DID_RESTORE_OBJECT](b)}return h}else{return g}}}}}};iAd.Archiver.restoreWithJSONArchive=function(a){return a?this.restoreFromArchive(JSON.parse(a)):null};iAd.Archiver.objectReferences={};iAd.Archiver.referenceForObject=function(b){var a=this.objectReferences,c;if(b.__archiveReference){c=b.__archiveReference;a[c].count++;return c}c=++this._uid;a[c]={object:b,count:1};b.__archiveReference=c;return c};iAd.Archiver.objectForReference=function(c){var a=this.objectReferences;var d=a[c];if(!d){return null}var b=d.object;d.count--;if(d.count<=0){delete a[c];delete b.__archiveReference}return b};
/**
*
* Copyright © 2009-2016 Apple Inc.  All rights reserved.
*
**/

iAd.Class({name:"iAd.ViewController",superclass:iAd.Object,mixins:[iAd.EventTarget],synthesizedProperties:["view","title","loadingRequiredFiles","loadedAllRequiredFiles","viewWasProcessed","contentView","interfaceOrientation","contentSizeForViewInPopover"],archivedProperties:["configuration","viewWasArchived","title","toolbarItems","requiredFilesLoadDelegate","stateChangeDelegate","actionListDelegate","wasBackItemTransition","becomesBackItemTransition","wasTopItemTransition","becomesTopItemTransition","becomesHiddenTransition","becomesVisibleTransition","buildInActionListShouldOccurAfterTransition","buildOutActionListShouldDelayTransition","disableLoadingViewController","viewLoadingDelaysTransition","contentSizeForViewInPopover","modalInPopover"]});iAd.ViewController.__minimalViewLoadingTime=0;iAd.ViewController.prototype.init=function(d){this.requiredFilesLoadDelegate=null;this.stateChangeDelegate=null;this.actionListDelegate=null;this.callSuper();this.configuration={};this.shouldSetUpContentViewUponLoad=false;this.shouldProcessViewUponRequestsCompleted=false;this.viewIsLoaded=false;this.viewWasArchived=false;this.shouldArchiveView=true;if(iAd.Utils.objectIsString(d)){this.configuration={id:d}}else{if(d!==undefined&&d!==null){this.configuration=d}}this.id=this.configuration.id||iAd.ViewController.uniqueId();this._view=null;this._contentView=null;this._title="";this._tabBarItem=null;this._navigationItem=null;this._toolbarItems=[];this._viewWasProcessed=false;this.outlets={};this.eventTarget=document;this.modalViewController=null;this.parentViewController=null;this.viewAppearancePropagationProperty=null;this.modalTransitionStyle=null;this.searchDisplayController=null;this.wasBackItemTransition=iAd.ViewController.TRANSITION_IN_FROM_LEFT;this.becomesBackItemTransition=iAd.ViewController.TRANSITION_OUT_TO_LEFT;this.wasTopItemTransition=iAd.ViewController.TRANSITION_OUT_TO_RIGHT;this.becomesTopItemTransition=iAd.ViewController.TRANSITION_IN_FROM_RIGHT;this.becomesHiddenTransition=iAd.ViewController.TRANSITION_DISSOLVE_OUT;this.becomesVisibleTransition=iAd.ViewController.TRANSITION_DISSOLVE_IN;this.buildInActionListShouldOccurAfterTransition=false;this.buildOutActionListShouldDelayTransition=false;this.disableLoadingViewController=false;this.viewLoadingDelaysTransition=true;this.__minimalViewLoadingTime=iAd.ViewController.__minimalViewLoadingTime;this.contentSizeForViewInPopover=new iAd.Size(320,1100);this.modalInPopover=false;iAd.ViewController.instances[this.id]=this;iAd.Utils.copyPropertiesFromSourceToTarget(this.configuration.properties,this);this.actionListManagersByName={};this.actionListByName={};this.actionListNameByClassName={};var a=this.configuration.actionLists;if(a){for(var b=0,c=a.length;b<c;b++){this.loadActionList(a[b])}}};iAd.ViewController.restoreFromArchive=function(a){return new this(a.configuration)};iAd.ViewController.instances={};iAd.ViewController.viewProcessors=[];iAd.ViewController.WILL_LOAD_REQUIRED_FILES="viewControllerWillLoadRequiredFiles";iAd.ViewController.PROGRESS_LOADING_REQUIRED_FILES="viewControllerProgressLoadingRequiredFiles";iAd.ViewController.DID_LOAD_REQUIRED_FILES="viewControllerDidLoadRequiredFiles";iAd.ViewController.DID_ABORT_LOAD_REQUIRED_FILES="viewControllerDidAbortLoadRequiredFiles";iAd.ViewController.DID_ENTER_STATE="viewControllerDidEnterState";iAd.ViewController.DID_EXIT_STATE="viewControllerDidExitState";iAd.ViewController.ACTION_LIST_WILL_START="viewControllerActionListWillStart";iAd.ViewController.ACTION_LIST_DID_START="viewControllerActionListDidStart";iAd.ViewController.ACTION_LIST_WILL_ITERATE="viewControllerActionListWillIterate";iAd.ViewController.ACTION_LIST_DID_ITERATE="viewControllerActionListDidIterate";iAd.ViewController.ACTION_LIST_WILL_COMPLETE="viewControllerActionListWillComplete";iAd.ViewController.ACTION_LIST_DID_COMPLETE="viewControllerActionListDidComplete";iAd.ViewController.ACTION_LIST_DID_CANCEL="viewControllerActionListDidCancel";iAd.ViewController.ACTION_LIST_DID_PROGRESS="viewControllerActionListDidProgress";iAd.ViewController.VIEW_WILL_APPEAR_STATE="ad-view-will-appear";iAd.ViewController.VIEW_DID_APPEAR_STATE="ad-view-did-appear";iAd.ViewController.VIEW_WILL_DISAPPEAR_STATE="ad-view-will-disappear";iAd.ViewController.VIEW_DID_DISAPPEAR_STATE="ad-view-did-disappear";iAd.ViewController.APPEARANCE_STATES=[iAd.ViewController.VIEW_WILL_APPEAR_STATE,iAd.ViewController.VIEW_DID_APPEAR_STATE,iAd.ViewController.VIEW_WILL_DISAPPEAR_STATE,iAd.ViewController.VIEW_DID_DISAPPEAR_STATE];iAd.ViewController.VIEW_WILL_APPEAR_EVENT="viewControllerViewWillAppear";iAd.ViewController.VIEW_DID_APPEAR_EVENT="viewControllerViewDidAppear";iAd.ViewController.VIEW_WILL_DISAPPEAR_EVENT="viewControllerViewWillDisappear";iAd.ViewController.VIEW_DID_DISAPPEAR_EVENT="viewControllerViewDidDisappear";iAd.ViewController.VIEW_DID_LOAD="viewControllerViewDidLoad";iAd.ViewController.VIEW_DID_UNLOAD="viewControllerViewDidUnload";iAd.ViewController.TRANSITION_IN_FROM_RIGHT={properties:["transform"],from:["translateX(100%)"],to:["translateX(0)"]};iAd.ViewController.TRANSITION_IN_FROM_LEFT={properties:["transform"],from:["translateX(-100%)"],to:["translateX(0)"]};iAd.ViewController.TRANSITION_OUT_TO_RIGHT={properties:["transform"],from:["translateX(0)"],to:["translateX(100%)"]};iAd.ViewController.TRANSITION_OUT_TO_LEFT={properties:["transform"],from:["translateX(0)"],to:["translateX(-100%)"]};iAd.ViewController.TRANSITION_DISSOLVE_OUT={properties:["opacity"],from:[1],to:[0]};iAd.ViewController.TRANSITION_DISSOLVE_IN={properties:["opacity"],from:[0],to:[1]};iAd.ViewController.DECLARATIVE_MIME_TYPE="application/vnd.apple.iadjs; type=view-controllers";iAd.ViewController.ARCHIVE_PREFIX=window.location.href+":";iAd.ViewController.VIEW_ARCHIVE_PREFIX=window.location.href+"-view:";iAd.ViewController.prototype.getView=function(){if(this._view){return this._view}if(this.viewWasArchived){var b=iAd.ViewController.VIEW_ARCHIVE_PREFIX+this.id;var a=window.localStorage[b];delete window.localStorage[b];this.viewWasArchived=false;this.view=iAd.Archiver.restoreWithJSONArchive(a)}if(this._view==null){this.loadView()}return this._view};iAd.ViewController.prototype.setView=function(b){if(this._view instanceof iAd.View){delete this._view._viewController}if(b==null){var a=this.shouldArchiveView;this.shouldArchiveView=false;this.unloadView();this.shouldArchiveView=a;return}if(this.__minimalViewLoadingTime>0){this.__loadViewStartTime=new Date()}b._viewController=this;this._view=b;var c=this.configuration;if(b.usesDeclarativeBacking&&b.layerHasCustomAttribute("ad-content-view")){if(!c.requiredFileURIs){c.requiredFileURIs={}}c.requiredFileURIs.contentView=b.getLayerCustomAttributeValue("ad-content-view")}if(c.requiredFileURIs&&c.requiredFileURIs.contentView){this.loadContentView()}else{if(c.requiredFileURIs&&!this.loadedAllRequiredFiles){this.shouldProcessViewUponRequestsCompleted=true;if(!this.loadingRequiredFiles){this.loadRequiredFiles()}}else{this.processView()}}};iAd.ViewController.prototype.setContentView=function(a){a.autoresizingMask=iAd.View.AUTORESIZING_FLEXIBLE_WIDTH|iAd.View.AUTORESIZING_FLEXIBLE_HEIGHT;this._contentView=a};iAd.ViewController.prototype.loadView=function(){this.view=new iAd.View()};iAd.ViewController.prototype.loadContentView=function(){if(this.loadingRequiredFiles){this.shouldSetUpContentViewUponLoad=true}else{if(this.loadedAllRequiredFiles){this.setupContentViewFromLayer()}else{this.shouldSetUpContentViewUponLoad=true;this.loadRequiredFiles()}}};iAd.ViewController.prototype.unloadView=function(){if(this._view==null||!this.isViewLoaded()){return}this.archiveView();this._contentView=null;this._view.removeFromSuperview();this.cleanViewProcessors();this._view=null;this.viewIsLoaded=false;this.viewDidUnload()};iAd.ViewController.prototype.archiveView=function(){if(!this.shouldArchiveView||!this._view||this._contentView){return}window.localStorage[iAd.ViewController.VIEW_ARCHIVE_PREFIX+this.id]=iAd.Archiver.archiveToJSON(this._view);this.viewWasArchived=true};iAd.ViewController.prototype.willEncodeObjectToArchive=function(a){this.archiveView();this.callSuper(a)};iAd.ViewController.prototype.archiveProperty=function(b){var a=this.callSuper(b);if(b=="configuration"){a.id=this.id}return a};iAd.ViewController.prototype.isViewLoading=function(){return(this.loadingRequiredFiles||(this.loadedAllRequiredFiles&&!this.viewIsLoaded))};iAd.ViewController.prototype.isViewLoaded=function(){return this.viewIsLoaded};iAd.ViewController.prototype.viewDidLoad=function(){this.createAndDispatchEvent(iAd.ViewController.VIEW_DID_LOAD)};iAd.ViewController.prototype.viewDidUnload=function(){this.createAndDispatchEvent(iAd.ViewController.VIEW_DID_UNLOAD)};iAd.ViewController.prototype.didReceiveMemoryWarning=function(){if(this.parentViewController==null&&this.isViewLoaded()&&!document.body.contains(this.view.layer)){this.unloadView()}};iAd.ViewController.prototype.setTitle=function(b){this._title=b;var a=this.parentViewController;if(a==null){return}else{if(iAd.Utils.objectIsInstanceOfClass(a,iAd.TabBarController)){this.tabBarItem.title=b}else{if(iAd.Utils.objectIsInstanceOfClass(a,iAd.NavigationController)){this.navigationItem.title=b}}}};iAd.ViewController.prototype.isInState=function(a){return this.view.layer.hasClassName(a)};iAd.ViewController.prototype.enterState=function(b){var a=this.view.layer.addClassName(b);if(a){this.dispatchNotification(iAd.ViewController.DID_ENTER_STATE,this.stateChangeDelegate,[["state",b]])}return a};iAd.ViewController.prototype.exitState=function(a){var b=this.view.layer.removeClassName(a);if(b){this.dispatchNotification(iAd.ViewController.DID_EXIT_STATE,this.stateChangeDelegate,[["state",a]])}return b};iAd.ViewController.prototype.toggleState=function(a,b){if(b==null){b=!this.isInState(a)}this[b?"enterState":"exitState"](a)};iAd.ViewController.prototype.enterExclusiveAppearanceState=function(d){var a;for(var b=0,c=iAd.ViewController.APPEARANCE_STATES.length;b<c;b++){a=iAd.ViewController.APPEARANCE_STATES[b];this[(a===d)?"enterState":"exitState"](a)}};iAd.ViewController.prototype.propagateViewAppearanceIfNotInState=function(e,a,d){var c=this.viewAppearancePropagationProperty;var b=c?this[c]:null;if(b&&!b.isInState(d)){b[e](a)}};iAd.ViewController.prototype.viewWillAppear=function(a){this.createAndDispatchEvent(iAd.ViewController.VIEW_WILL_APPEAR_EVENT,[["animated",a]]);this.enterExclusiveAppearanceState(iAd.ViewController.VIEW_WILL_APPEAR_STATE);this.propagateViewAppearanceIfNotInState("viewWillAppear",a,iAd.ViewController.VIEW_DID_APPEAR_STATE)};iAd.ViewController.prototype.viewDidAppear=function(a){this.enterExclusiveAppearanceState(iAd.ViewController.VIEW_DID_APPEAR_STATE);this.createAndDispatchEvent(iAd.ViewController.VIEW_DID_APPEAR_EVENT,[["animated",a]]);this.propagateViewAppearanceIfNotInState("viewDidAppear",a,iAd.ViewController.VIEW_DID_APPEAR_STATE)};iAd.ViewController.prototype.viewWillDisappear=function(a){this.createAndDispatchEvent(iAd.ViewController.VIEW_WILL_DISAPPEAR_EVENT,[["animated",a]]);this.enterExclusiveAppearanceState(iAd.ViewController.VIEW_WILL_DISAPPEAR_STATE);this.propagateViewAppearanceIfNotInState("viewWillDisappear",a,iAd.ViewController.VIEW_DID_DISAPPEAR_STATE)};iAd.ViewController.prototype.viewDidDisappear=function(a){this.enterExclusiveAppearanceState(iAd.ViewController.VIEW_DID_DISAPPEAR_STATE);this.createAndDispatchEvent(iAd.ViewController.VIEW_DID_DISAPPEAR_EVENT,[["animated",a]]);this.propagateViewAppearanceIfNotInState("viewDidDisappear",a,iAd.ViewController.VIEW_DID_DISAPPEAR_STATE);this.resetAllActionLists()};iAd.ViewController.prototype.presentModalViewControllerAnimated=function(b,a){this.modalViewController=b};iAd.ViewController.prototype.dismissModalViewControllerAnimated=function(a){this.modalViewController=null};iAd.ViewController.prototype.parentControllerOfKind=function(b){var a=this;while((a=a.parentViewController)){if(iAd.Utils.objectIsInstanceOfClass(a,b)){return a}}return null};iAd.ViewController.prototype.getLoadingRequiredFiles=function(){return(this.requiredFilesLoader&&this.requiredFilesLoader.loading)};iAd.ViewController.prototype.getLoadedAllRequiredFiles=function(){var a=this.requiredFilesLoader;return(a&&(a.loaded||a.length==0))};iAd.ViewController.prototype.loadRequiredFiles=function(){if(this.loadedAllRequiredFiles){return}if(!this.requiredFilesLoader){this.requiredFilesLoader=new iAd.ViewControllerRequiredFilesLoader(this)}this.dispatchNotification(iAd.ViewController.WILL_LOAD_REQUIRED_FILES,this.requiredFilesLoadDelegate);var a=this.requiredFilesLoader;if(a.length>0){a.load();this.notifyPropertyChange("loadingRequiredFiles")}else{this.dispatchNotification(iAd.ViewController.DID_LOAD_REQUIRED_FILES,this.requiredFilesLoadDelegate)}};iAd.ViewController.prototype.abortLoadRequiredFiles=function(){if(this.requiredFilesLoader.loading){this.requiredFilesLoader.abort()}};iAd.ViewController.prototype.handleEvent=function(a){};iAd.ViewController.prototype.setupContentViewFromLayer=function(){var a=iAd.Element.elementFromString(this.requiredFilesLoader.contentViewMarkup);this._view.hostingLayer.appendChild(a);if(!a.hasAttribute("id")){a.id=this.id}var b=iAd.View.viewForLayer(a);b.superview=this._view;b._indexInSuperviewSubviews=this._view.subviews.push(b)-1;this.contentView=b;if(b.declarativeLayerWasInitialized){this.processView()}else{b.addPropertyObserver("declarativeLayerWasInitialized",this,"processView")}};iAd.ViewController.prototype.requiredFilesLoaderDidProgress=function(a,c,b){if(b.loaded){this.dispatchNotification(iAd.ViewController.PROGRESS_LOADING_REQUIRED_FILES,this.requiredFilesLoadDelegate,[["progress",c],["url",b.url]])}else{if(b.error){iAd.Console.warn("iAd.ViewController — could not load required file with URI "+b.url)}}};iAd.ViewController.prototype.requiredFilesLoaderDidComplete=function(a){this.dispatchNotification(iAd.ViewController.DID_LOAD_REQUIRED_FILES,this.requiredFilesLoadDelegate);this.notifyPropertyChange("loadingRequiredFiles");if(this.shouldSetUpContentViewUponLoad){this.setupContentViewFromLayer()}else{if(this.shouldProcessViewUponRequestsCompleted){this.processView()}}};iAd.ViewController.prototype.requiredFilesLoaderDidFail=function(a,b){if(b!=iAd.Loader.LOAD_ABORTED){return}var e=[];var f=this.requiredFilesLoader.openLoaders;for(var c=0,d=f.length;c<d;c++){e.push(f[c].url)}this.notifyPropertyChange("loadingRequiredFiles");this.dispatchNotification(iAd.ViewController.DID_ABORT_LOAD_REQUIRED_FILES,this.requiredFilesLoadDelegate,[["uris",e]])};iAd.ViewController.prototype.processView=function(){if(!this._view.layer.hasAttribute("id")){this._view.id=this.id+((this.configuration.hasOwnProperty("requiredFileURIs")&&this.configuration.requiredFileURIs.hasOwnProperty("contentView"))?"-container":"")}this.viewProcessors=[];var d;for(var b=0,c=iAd.ViewController.viewProcessors.length;b<c;b++){d=new iAd.ViewController.viewProcessors[b](this);d.processView(this._view);this.viewProcessors.push(d)}if(this.__minimalViewLoadingTime>0){var a=(Date.now()-this.__loadViewStartTime)/1000;if(a<this.__minimalViewLoadingTime){this.callMethodNameAfterDelay("viewProcessingDidComplete",this.__minimalViewLoadingTime-a);return}}this.viewProcessingDidComplete()};iAd.ViewController.prototype.viewProcessingDidComplete=function(){if(!this.viewIsLoaded){this.viewIsLoaded=true;this.viewDidLoad()}this.viewWasProcessed=true};iAd.ViewController.prototype.cleanViewProcessors=function(){while(this.viewProcessors.length){this.viewProcessors.pop().cleanUp()}this.viewWasProcessed=false};iAd.ViewController.uniqueId=function(){return"vc-"+Math.floor(Math.random()*10000000000)};iAd.ViewController.addViewProcessor=function(a){iAd.ViewController.viewProcessors.push(a)};iAd.ViewController.init=function(){iAd.Class.processAllClasses();var c=document.scripts;var a;for(var b=0,d=c.length;b<d;b++){a=c[b];if(a.type==iAd.ViewController.DECLARATIVE_MIME_TYPE){iAd.ViewController.handleScriptElementForDeclarativeViewControllers(a)}}window.addEventListener("ADMemoryLevelWarning",iAd.ViewController.handleMemoryWarning,true);window.addEventListener("ADMemoryLevelUrgent",iAd.ViewController.handleMemoryWarning,true)};iAd.ViewController.handleScriptElementForDeclarativeViewControllers=function(c){if(c.src!=""){var b=new XMLHttpRequest();b._url=c.src;b.addEventListener("load",this.handleEventProxy,false);b.addEventListener("error",this.handleEventProxy,false);b.open("GET",b._url,true);b.send()}else{var a=Function("undefined","return ("+c.textContent+");")();setTimeout(function(){iAd.ViewController.handleDeclarativeViewControllerDefinitions(a)},0)}};iAd.ViewController.handleEventProxy=function(a){iAd.ViewController.handleEvent(a)};iAd.ViewController.handleEvent=function(c){var b=c.target;switch(c.type){case"load":var a=Function("undefined","return ("+b.responseText+");")();iAd.ViewController.handleDeclarativeViewControllerDefinitions(a);break;case"error":iAd.Console.error("Failed to read content from JSON file "+b._url);break}};iAd.ViewController.handleDeclarativeViewControllerDefinitions=function(b){if(iAd.Utils.objectIsArray(b)){for(var a=0,c=b.length;a<c;a++){iAd.ViewController.viewControllerWithConfiguration(b[a])}}else{iAd.ViewController.viewControllerWithConfiguration(b)}};iAd.ViewController.viewControllerWithConfiguration=function(a){if(iAd.ViewController.instances.hasOwnProperty(a.id)){return}return new (iAd.ViewController.constructorMap[a.type]||iAd.ViewController)(a)};iAd.ViewController.constructorMap={};iAd.ViewController.handleMemoryWarning=function(b){var c=iAd.ViewController.instances;for(var a in c){c[a].didReceiveMemoryWarning()}};iAd.ViewController.prototype.startAction=function(c){var d=iAd.Utils.resolveObjectPath(c.className);if(!d){throw iAd.ActionListManager.INVALID_CLASS_NAME_EXCEPTION}var e=new d(this);var b=c.properties;for(var a in b){e[a]=b[a]}if(c.delay){e.delay=c.delay}e.prepare();e.run()};iAd.ViewController.prototype.loadActionList=function(c){var a=c.name,b=c.cssClassName;if(!a){return}if(this.actionListManagersByName[a]){if(c.reset){this.cancelActionList(a)}delete this.actionListManagersByName[a]}if(c.actions.length>0){this.actionListByName[a]=c;if(b==null){c.cssClassName=b=a.replace(/\s+/g,"-").toLowerCase()}this.actionListNameByClassName[b]=a}};iAd.ViewController.prototype.startActionList=function(a){var b=this.actionListByName[a];if(!b){return}var c=this.actionListManagersByName[a];if(!c){this.actionListManagersByName[a]=c=new iAd.ActionListManager(b,this)}c.callMethodNameAfterDelay("start",0)};iAd.ViewController.prototype.cancelActionList=function(a){var b=this.actionListManagersByName[a];if(!b){return}b.reset()};iAd.ViewController.prototype.resetAllActionLists=function(){for(var a in this.actionListManagersByName){this.actionListManagersByName[a].reset()}};iAd.ViewController.prototype.hasActionList=function(a){return !!this.actionListByName[a]};iAd.ViewController.prototype.dispatchActionListNotification=function(a,b){this.notifyDelegate(a,this.transitionController,b);this.dispatchNotification(a,this.actionListDelegate,b)};iAd.ViewController.prototype.actionListWillStart=function(b,a){this.dispatchActionListNotification(iAd.ViewController.ACTION_LIST_WILL_START,[["actionList",a]])};iAd.ViewController.prototype.actionListDidStart=function(b,a){this.dispatchActionListNotification(iAd.ViewController.ACTION_LIST_DID_START,[["actionList",a]])};iAd.ViewController.prototype.actionListWillIterate=function(c,a,b){this.dispatchActionListNotification(iAd.ViewController.ACTION_LIST_WILL_ITERATE,[["actionList",a],["iteration",b]])};iAd.ViewController.prototype.actionListDidIterate=function(c,a,b){this.dispatchActionListNotification(iAd.ViewController.ACTION_LIST_DID_ITERATE,[["actionList",a],["iteration",b]])};iAd.ViewController.prototype.actionListWillComplete=function(b,a){this.dispatchActionListNotification(iAd.ViewController.ACTION_LIST_WILL_COMPLETE,[["actionList",a]])};iAd.ViewController.prototype.actionListDidComplete=function(b,a){this.dispatchActionListNotification(iAd.ViewController.ACTION_LIST_DID_COMPLETE,[["actionList",a]])};iAd.ViewController.prototype.actionListDidCancel=function(b,a){this.dispatchActionListNotification(iAd.ViewController.ACTION_LIST_DID_CANCEL,[["actionList",a]])};iAd.ViewController.prototype.actionListDidProgress=function(d,b,c,a){this.dispatchActionListNotification(iAd.ViewController.ACTION_LIST_DID_PROGRESS,[["actionList",b],["action",c],["progress",a]])};iAd.ViewController.orientationDidChange=function(a){var b=this.instances;for(var c in b){b[c].didRotateFromInterfaceOrientation(a)}};iAd.ViewController.prototype.getInterfaceOrientation=function(){return iAd.Device.interfaceOrientation};iAd.ViewController.prototype.didRotateFromInterfaceOrientation=function(a){};iAd.ViewController.prototype.archive=function(){var a=iAd.ViewController.ARCHIVE_PREFIX+this.id;window.localStorage[a]=iAd.Archiver.archiveToJSON(this)};iAd.ViewController.restore=function(c){var b=iAd.ViewController.ARCHIVE_PREFIX+c;var a=window.localStorage[b];return a?iAd.Archiver.restoreWithJSONArchive(a):null};iAd.ViewController.clearArchives=function(){for(var a in window.localStorage){if(a.indexOf(iAd.ViewController.ARCHIVE_PREFIX)==0||a.indexOf(iAd.ViewController.VIEW_ARCHIVE_PREFIX)==0){delete window.localStorage[a]}}};iAd.ViewController.initialize=function(){iAd.ViewController.constructorMap[this.displayName]=this};iAd.View.prototype.containingViewController=function(){var a=this;while(a){if(a._viewController){return a._viewController}a=a.superview}};iAd.Class.processMethods(iAd.View,["containingViewController"]);window.addEventListener("DOMContentLoaded",iAd.ViewController.init,true);
/**
*
* Copyright © 2009-2016 Apple Inc.  All rights reserved.
*
**/

iAd.ViewController.prototype.startActionListWithSourceView=function(b,a){var c=this.actionListByName[b];if(!c){return}var d=this.actionListManagersByName[b];if(!d){this.actionListManagersByName[b]=d=new iAd.ActionListManager(c,this)}d.sourceView=a;d.callMethodNameAfterDelay("start",0)};iAd.ViewController.prototype.startActionList=function(a){this.startActionListWithSourceView(a,undefined)};iAd.ViewController.prototype.startActionWithSourceView=function(d,a){var e=iAd.Utils.resolveObjectPath(d.className);if(!e){throw iAd.ActionListManager.INVALID_CLASS_NAME_EXCEPTION}var f=new e(this);var c=d.properties;for(var b in c){f[b]=c[b]}if(d.delay){f.delay=d.delay}f.prepare();f.sourceView=a;f.run()};iAd.ViewController.prototype.actionListDidResetAnimation=function(f,h){var k=h.split(","),m=k.length;if(m==0){return}var g,d,l=[];for(var c in this.actionListManagersByName){d=this.actionListManagersByName[c];if(d!=f){l.push(d)}}var b=l.length;if(b==0){return}var e,a={type:"webkitAnimationEnd",animationName:""};for(g=0;g<m;g++){a.animationName=k[g];for(e=0;e<b;e++){l[e].handleEvent(a)}}};(function(){var a=iAd.ViewController.handleDeclarativeViewControllerDefinitions;iAd.ViewController.handleDeclarativeViewControllerDefinitions=function(e){var d=iAd.RootViewController.sharedRootViewController;var b=iAd.RootViewController.sharedRootViewController.initialViewControllerID;if(iAP.Context.IS_IBOOKS){if(!iAd.Utils.objectIsArray(e)){e=[e]}var f={id:iAP.iBooksLoadingViewController.VIEW_CONTROLLER_ID,actionLists:[],hasHiDPIVersion:true,properties:{nextViewControllerID:b},requiredFileURIs:{images:["Default.png"]},type:"iAP.iBooksLoadingViewController"};e.push(f);b=d.initialViewControllerID=iAP.iBooksLoadingViewController.VIEW_CONTROLLER_ID}a(e);var c=iAd.ViewController.instances[b];if(window.editorProxy||d.navigationController==null){d.transitionController.setVisibleViewControllerAnimated(c,true)}else{d.navigationController.pushViewControllerAnimated(c,true);d.navigationController.autoReversesTransitions=true}}})();
/**
*
* Copyright © 2009-2016 Apple Inc.  All rights reserved.
*
**/

iAd.EventTriage={};iAd.EventTriage.handleEvent=function(c){if(iAd.Utils.objectIsInstanceOfClass(this,iAd.Object)){this.callSuper(c)}var b=c.type;var a="handle"+b.charAt(0).toUpperCase()+b.substr(1);if(iAd.Utils.objectHasMethod(this,a)){this[a](c)}};iAd.Utils.setupDisplayNames(iAd.EventTriage,"iAd.EventTriage");
/**
*
* Copyright © 2009-2016 Apple Inc.  All rights reserved.
*
**/

iAd.Analytics={};iAd.Analytics._TRACKABLE_VIEW_DID_APPEAR="trackableViewDidAppear";iAd.Analytics._TRACKABLE_VIEW_DID_DISAPPEAR="trackableViewDidDisappear";iAd.Analytics._DEFAULT_VIEW_STATE_ID="default";iAd.Analytics.enabled=true;iAd.Analytics.logsToConsole=false;iAd.Analytics._OBJECT_ID_HIERARCHY=["analyticsId","id","outlet"];iAd.Analytics._NAME_TO_SYMBOL_MAP={analyticsObjectId:"as",analyticsName:"an",analyticsType:"at",analyticsSectionId:"k"};iAd.Analytics._analyticsSectionId="root";iAd.Analytics._sectionTimeStamp=null;iAd.Analytics._rootTransitionController=null;iAd.Analytics._trackableViews=[];iAd.Analytics._visibleViewControllersForAnalyticsId={};iAd.Class.mixin(iAd.Analytics,[iAd.EventTriage]);Object.defineProperty(iAd.Analytics,"bannerImpressionId",{get:function(){if(iAd.Analytics._bannerImpressionId){return iAd.Analytics._bannerImpressionId}if(!window.hasOwnProperty("ad")){return false}var a=window.ad.bannerParameters;if(a.hasOwnProperty("bannerImpressionId")){return iAd.Analytics._bannerImpressionId=a.bannerImpressionId}return false}});Object.defineProperty(iAd.Analytics,"viewStateIdentifiers",{get:function(){var a=[];Object.keys(iAd.Analytics._visibleViewControllersForAnalyticsId).forEach(function(b){var c=iAd.Analytics._visibleViewControllersForAnalyticsId[b];a=a.concat(c._analyticsHandler.trackingIdsForViewControllersTrackableViews())});return !a.length?[iAd.Analytics._DEFAULT_VIEW_STATE_ID]:a}});iAd.Analytics.registerHandlerForClass=function(a,c,b){iAd.Console.assert(a,"[iAd.Analytics.registerHandlerForClass]: Missing analyticsEventHandler.");iAd.Console.assert(c,"[iAd.Analytics.registerHandlerForClass]: Missing iAd.Class object to associate the handler with.");if("_analyticsHandler" in c){iAd.Console.error("[iAd.Analytics]: "+c.displayName+" already has a registered analytics event handler.");return}Object.defineProperty(c.prototype,"_analyticsHandler",{get:function(){if(this.__analyticsHandler){return this.__analyticsHandler}this.__analyticsHandler=new a(this);return this.__analyticsHandler}});if(b){iAd.Analytics._addTrackableView(c)}};iAd.Analytics._addTrackableView=function(b){var a=b;while(a&&a.displayName!=="iAd.View"){a=a.superclass}if(a){iAd.Analytics._trackableViews.push(b)}else{iAd.Console.error("[iAd.Analytics]: "+b.displayName+" is not a valid trackable view. Trackable views must inherit from iAd.View")}};iAd.Analytics._viewControllerViewDidAppear=function(a){if(!iAd.Analytics._rootTransitionController){iAd.Analytics._rootTransitionController=iAd.Analytics._rootTransitionControllerForViewController(a)}if(a.transitionController===iAd.Analytics._rootTransitionController){iAd.Analytics._sectionTimeStamp=Date.now();iAd.Analytics._analyticsSectionId=a.analyticsId}iAd.Analytics._visibleViewControllersForAnalyticsId[a.analyticsId]=a};iAd.Analytics._viewControllerViewDidDisappear=function(a){delete iAd.Analytics._visibleViewControllersForAnalyticsId[a.analyticsId]};iAd.Analytics._rootTransitionControllerForViewController=function(a){if(iAd.RootViewController.sharedRootViewController.hasOwnProperty("_navigationController")){return iAd.RootViewController.sharedRootViewController.navigationController.backingTransitionController}return iAd.RootViewController.sharedRootViewController.transitionController};iAd.Analytics._routeEventToHandler=function(a){var d=a.sender;var e="_analyticsHandler" in d;if(!e){return}var b="handle"+iAd.String.capitalizeString(a.type);var c=d._analyticsHandler;if(!iAd.Utils.objectHasMethod(c,b)){return}if(!d.hasOwnProperty("analyticsId")&&!d.hasOwnProperty("_analyticsId")){d.analyticsId=iAd.Analytics.objectIdForSender(d)}c[b](a)};iAd.Analytics.objectIdForSender=function(b){if(iAd.Utils.objectIsInstanceOfClass(b,iAd.ViewController)){return b.configuration.analyticsId||b.id}var a=iAd.Utils.objectIsInstanceOfClass(b,iAd.View)?b:iAd.View.nearestViewForElement(b);if(a){return iAd.Analytics._objectIdForView(a)}return null};iAd.Analytics._objectIdForView=function(c){var b=c[iAd.Analytics._OBJECT_ID_HIERARCHY[0]]||c.layer.getAttribute("data-ad-analytics-id");if(b){return b}for(var d=1,e=this._OBJECT_ID_HIERARCHY.length;d<e;d++){var a=c[iAd.Analytics._OBJECT_ID_HIERARCHY[d]];if(a){return a}}iAd.Analytics._warnIfTrackableViewIsMissingAnalyticsId(c);if(c.superview){return iAd.Analytics._objectIdForView(c.superview)}if(c==iAd.RootView.sharedRoot){return"root"}return null};iAd.Analytics._warnIfTrackableViewIsMissingAnalyticsId=function(a){for(var b=0,c=iAd.Analytics._trackableViews.length;b<c;b++){var d=iAd.Analytics._trackableViews[b];if(iAd.Utils.objectIsInstanceOfClass(a,d)){iAd.Console.warn("[iAd.Analytics]: Consider adding an analyticsId to the "+d.displayName);return}}};iAd.Analytics.addViewState=function(c,b,a){iAd.Console.assert(c,"[iAd.Analytics.addViewState]: A view controller is required.");iAd.Console.assert(b,"[iAd.Analytics.addViewState]: A view is required.");c._analyticsHandler.addViewState(b,a)};iAd.Analytics.removeViewState=function(c,b,a){iAd.Console.assert(c,"[iAd.Analytics.removeViewState]: A view controller is required.");iAd.Console.assert(b,"[iAd.Analytics.removeViewState]: A view is required.");c._analyticsHandler.removeViewState(b,a)};iAd.Analytics.composeAndLogMessage=function(a,c,d,b){iAd.Console.assert(a,"[iAd.Analytics.composeAndLogMessage]: Missing analyticsObjectId.");iAd.Console.assert(c,"[iAd.Analytics.composeAndLogMessage]: Missing analyticsName.");iAd.Console.assert(d,"[iAd.Analytics.composeAndLogMessage]: Missing analyticsType.");var h=b!==undefined;var g;if(h&&b.hasOwnProperty("viewController")){g=b.viewController}var f=iAd.Analytics._messageForEvent(a,c,d,g);var e=!h?f:this._attachAdditionalArgumentsToMessage(b,f);iAd.Analytics._log(e)};iAd.Analytics._messageForEvent=function(a,b,c){return Object.create(null,{analyticsObjectId:{value:a,enumerable:true},analyticsSectionId:{value:iAd.Analytics._analyticsSectionId,enumerable:true},analyticsType:{value:c,enumerable:true},analyticsName:{value:b,enumerable:true}})};iAd.Analytics._attachAdditionalArgumentsToMessage=function(a,c){for(var b in a){if(!a.hasOwnProperty(b)){continue}c[b]=a[b]}return c};iAd.Analytics._log=function(e){if(e==null){iAd.Console.warn("iAd.Analytics.log requires a valid parameter.");return}var a={};var b={};for(var d in e){if(d in iAd.Analytics._NAME_TO_SYMBOL_MAP){a[iAd.Analytics._NAME_TO_SYMBOL_MAP[d]]=e[d]}else{b[d]=e[d]}}var c=iAd.Analytics.bannerImpressionId;if(c){b.bannerImpressionId=c}if(Object.keys(b).length>0){a.a=b}var f={v:iAd.VERSION};f[Date.now()]=a;iAd.Analytics._composeMessage(f)};iAd.Analytics._composeMessage=function(b){if(!iAd.Analytics.enabled){return}var a=JSON.stringify(b);if(window.hasOwnProperty("ad")){window.ad.reportClickEvent(a)}if(iAd.Analytics.logsToConsole){iAd.Console.log("[ANALYTICS]: "+a)}};iAd.Analytics.logMessageWithId=function(c,a,b){iAd.Console.warn("iAd.Analytics.logMessageWithId is deprecated and will not log an analytics detail message. Please use iAd.Analytics.composeAndLogMessage instead.")};iAd.Analytics.updateMessageWithId=function(){iAd.Console.warn("iAd.Analytics.updateMessageWithId is deprecated and will not log an analytics detail message. Please use iAd.Analytics.composeAndLogMessage instead.")};iAd.Utils.setupDisplayNames(iAd.Analytics,"iAd.Analytics");
/**
*
* Copyright © 2009-2016 Apple Inc.  All rights reserved.
*
**/

iAd.Class({name:"iAd.AnalyticsEventHandler"});iAd.AnalyticsEventHandler.ANALYTICS_TYPE_VIEW="view";iAd.AnalyticsEventHandler.ANALYTICS_TYPE_DEBUG="debug";iAd.AnalyticsEventHandler.ANALYTICS_TYPE_CONVERSION="conversion";iAd.AnalyticsEventHandler.ANALYTICS_NAME_SCREEN_UPDATE="screen update";iAd.AnalyticsEventHandler.ANALYTICS_NAME_COMPLETION="completion";iAd.AnalyticsEventHandler.ANALYTICS_NAME_CANCEL="cancel";iAd.AnalyticsEventHandler.ANALYTICS_NAME_ERROR="error";iAd.AnalyticsEventHandler.ANALYTICS_OBJECT_ID_ACTION_SAVE="Save";iAd.AnalyticsEventHandler.ANALYTICS_OBJECT_ID_ACTION_COMPLETE="Complete";iAd.AnalyticsEventHandler.ANALYTICS_OBJECT_ID_ACTION_CONVERSION="Conversion";iAd.AnalyticsEventHandler.ANALYTICS_OBJECT_ID_ACTION_SENT="Sent";iAd.AnalyticsEventHandler.ANALYTICS_OBJECT_ID_ACTION_PRESENT="Present";iAd.AnalyticsEventHandler.ANALYTICS_OBJECT_ID_ACTION_CANCEL="Cancel";iAd.AnalyticsEventHandler.ANALYTICS_OBJECT_ID_ACTION_FAIL="Fail";iAd.AnalyticsEventHandler.ANALYTICS_OBJECT_ID_ACTION_SHARE="Share";iAd.AnalyticsEventHandler.ANALYTICS_OBJECT_ID_ACTION_GO_TO_STORE="GoToStore";iAd.AnalyticsEventHandler.ANALYTICS_ADDITIONAL_ARGUMENTS_URI="uri";iAd.AnalyticsEventHandler.ANALYTICS_ADDITIONAL_ARGUMENTS_ADAM_ID="adamId";iAd.AnalyticsEventHandler.STRING_SEPARATOR="-";iAd.AnalyticsEventHandler.prototype.init=function(a){this.callSuper();iAd.Console.assert(a,"[iAd.AnalyticsEventHandler]: The instance of the object must be passed in the constructor.");this._instance=a};iAd.AnalyticsEventHandler.prototype.composeAndLogMessage=function(a,d,e,c){if(!a){var b=this.concatenatedStringForArray(["UNKNOWN",e]);iAd.Analytics.composeAndLogMessage(b,d,iAd.AnalyticsEventHandler.ANALYTICS_TYPE_DEBUG,c);return}iAd.Analytics.composeAndLogMessage(a,d,e,c)};iAd.AnalyticsEventHandler.prototype.concatenatedStringForArray=function(a){if(!a||!iAd.Utils.objectIsArray(a)){throw new Error("[iAd.AnalyticsEventHandler]: The concatenatedStringForArray method must be passed an array as an argument.")}return a.join(iAd.AnalyticsEventHandler.STRING_SEPARATOR)};iAd.Utils.setupDisplayNames(iAd.AnalyticsEventHandler,"iAd.AnalyticsEventHandler");
/**
*
* Copyright © 2009-2016 Apple Inc.  All rights reserved.
*
**/

iAd.Class({name:"iAd.ViewControllerAnalyticsEventHandler",superclass:iAd.AnalyticsEventHandler});iAd.ViewControllerAnalyticsEventHandler.ANALYTICS_NAME_START="start";iAd.ViewControllerAnalyticsEventHandler.ANALYTICS_TYPE_PAGE="page";iAd.ViewControllerAnalyticsEventHandler._hasFiredFirstViewControllerDebugEvent=true;iAd.ViewControllerAnalyticsEventHandler.prototype.init=function(a){this._trackableViews={};this._isViewControllerAnalyticsIdEqualToSectionId=iAd.Utils.objectIsInstanceOfClass(a,iAd.RootViewController);if(this._isViewControllerAnalyticsIdEqualToSectionId){iAd.RootViewController.sharedRootViewController.analyticsId="root"}this.callSuper(a)};iAd.ViewControllerAnalyticsEventHandler.prototype.handleViewControllerViewDidAppear=function(c){var b=this._instance;if(b.disablesAnalytics){return}iAd.Analytics._viewControllerViewDidAppear(b);if(iAd.ViewControllerAnalyticsEventHandler._hasFiredFirstViewControllerDebugEvent){this.composeAndLogMessage(b.analyticsId,iAd.ViewControllerAnalyticsEventHandler.ANALYTICS_NAME_START,iAd.AnalyticsEventHandler.ANALYTICS_TYPE_DEBUG);iAd.ViewControllerAnalyticsEventHandler._hasFiredFirstViewControllerDebugEvent=false}this._isViewControllerAnalyticsIdEqualToSectionId=this._instance.analyticsId===iAd.Analytics._analyticsSectionId;var a=this._isViewControllerAnalyticsIdEqualToSectionId?iAd.ViewControllerAnalyticsEventHandler.ANALYTICS_TYPE_PAGE:iAd.AnalyticsEventHandler.ANALYTICS_TYPE_VIEW;this.composeAndLogMessage(c.sender.analyticsId,iAd.AnalyticsEventHandler.ANALYTICS_NAME_SCREEN_UPDATE,a);this._findTrackableViewsInViewController(b)};iAd.ViewControllerAnalyticsEventHandler.prototype.handleViewControllerViewDidDisappear=function(a){iAd.Analytics._viewControllerViewDidDisappear(this._instance);this._isViewControllerAnalyticsIdEqualToSectionId=false;if(!Object.keys(this._trackableViews).length){return}Object.keys(this._trackableViews).forEach(function(b){var c=this._trackableViews[b];c.view.dispatchNotification(iAd.Analytics._TRACKABLE_VIEW_DID_DISAPPEAR,null,[["viewController",this._instance]]);delete this._trackableViews[b]},this)};iAd.ViewControllerAnalyticsEventHandler.prototype.addViewState=function(c,b){var a=this._createViewStateTrackingId(c,b);this._updateTrackingId(c,a)};iAd.ViewControllerAnalyticsEventHandler.prototype.removeViewState=function(c,b){var a=this._createViewStateTrackingId(c,b);this._updateTrackingId(c,a,true)};iAd.ViewControllerAnalyticsEventHandler.prototype.trackingIdsForViewControllersTrackableViews=function(a){var b=Object.keys(this._trackableViews).map(function(c){return this._trackableViews[c].trackingId},this);if(!this._isViewControllerAnalyticsIdEqualToSectionId){b.unshift(this._instance.analyticsId)}return b};iAd.ViewControllerAnalyticsEventHandler.prototype._findTrackableViewsInViewController=function(e){var b=e.view;for(var c=0,d=iAd.Analytics._trackableViews.length;c<d;c++){var a=iAd.View.viewsForClassAndNode(iAd.Analytics._trackableViews[c],b.layer);if(a.length){this._dispatchTrackableViewDidAppearEvent(a,e)}}};iAd.ViewControllerAnalyticsEventHandler.prototype._dispatchTrackableViewDidAppearEvent=function(b,e){for(var c=0,d=b.length;c<d;c++){var a=b[c];a.dispatchNotification(iAd.Analytics._TRACKABLE_VIEW_DID_APPEAR,null,[["viewController",e]])}};iAd.ViewControllerAnalyticsEventHandler.prototype._updateTrackingId=function(c,b,a){var d=c.analyticsId||iAd.Analytics.objectIdForSender(c);this._trackableViews[d]={view:c,trackingId:!a?b:null}};iAd.ViewControllerAnalyticsEventHandler.prototype._createViewStateTrackingId=function(b,a){var c=b.hasOwnProperty("analyticsId")?b.analyticsId:iAd.Analytics.objectIdForSender(b);var d=a===undefined?c:this.concatenatedStringForArray([c,a]);return this._isViewControllerAnalyticsIdEqualToSectionId?d:this.concatenatedStringForArray([this._instance.analyticsId,d])};iAd.Analytics.registerHandlerForClass(iAd.ViewControllerAnalyticsEventHandler,iAd.ViewController);iAd.Utils.setupDisplayNames(iAd.ViewControllerAnalyticsEventHandler,"iAd.ViewControllerAnalyticsEventHandler");
/**
*
* Copyright © 2009-2016 Apple Inc.  All rights reserved.
*
**/

iAd.Class({name:"iAd.RootView",superclass:iAd.View,synthesizedProperties:["disablesDefaultScrolling","scrollsHorizontally","scrollsVertically"],archivedProperties:["disablesDefaultScrolling","scrollsHorizontally","scrollsVertically"],cssClassName:"ad-root-view"});iAd.RootView.prototype.init=function(a){this.callSuper(a);if(this.layer===document.body){this.layerIsInDocument=true;this._size=new iAd.Size(window.innerWidth,window.innerHeight);this.layer.removeClassName("ad-view");window.addEventListener(iAd.Device.iOS_VERSION?"orientationchange":"resize",this,true)}this._scrollsHorizontally=false;this._scrollsVertically=true;this.disablesDefaultScrolling=true;iAd.RootView.sharedRoot=this};iAd.RootView.prototype.createLayer=function(){this.layer=document.body};iAd.RootView.prototype.setDisablesDefaultScrolling=function(a){this._disablesDefaultScrolling=a;this.updateSize();if(!iAd.HostScrollView){this.layer[a?"addEventListener":"removeEventListener"](iAd.Event.MOVE_EVENT,iAd.Event.preventDefault,false)}};iAd.RootView.prototype.handleEvent=function(a){this.callSuper(a);if(a.type=="resize"||a.type=="orientationchange"){this.updateSize();if(this._disablesDefaultScrolling){window.scrollTo(0,0)}}};iAd.RootView.prototype.updateSize=function(){if(this.layer!==document.body){return}if(this._disablesDefaultScrolling){this.size=new iAd.Size(window.innerWidth,window.innerHeight)}else{this._size=new iAd.Size(document.body.offsetWidth,document.body.offsetHeight);this.notifyPropertyChange("size")}};iAd.RootView._sharedRoot=null;Object.defineProperty(iAd.RootView,"sharedRoot",{get:function(){if(iAd.RootView._sharedRoot==null){iAd.RootView._sharedRoot=new iAd.RootView()}return iAd.RootView._sharedRoot},set:function(a){iAd.RootView._sharedRoot=a}});iAd.RootView.init=function(){document.body.addClassName("ad-"+window.devicePixelRatio+"x");document.body.addClassName(iAd.Device.HAS_HIDPI_DISPLAY?"ad-HiDPI":"ad-LoDPI");if(iAd.Device.IS_IPAD){document.body.addClassName("ad-iPad")}if(iAd.RootView._sharedRoot==null){var a=document.querySelector("."+iAd.RootView.cssClassName);if(a!=null){iAd.RootView._sharedRoot=new iAd.RootView(a)}}};window.addEventListener("DOMContentLoaded",iAd.RootView.init,true);
/**
*
* Copyright © 2009-2016 Apple Inc.  All rights reserved.
*
**/

(function(){iAd.Class.processMethod(iAd.RootView,"init");var b=iAd.RootView.prototype.init;iAd.RootView.prototype.init=function(f){b.apply(this,arguments);if(!iAP.supportsNewCSSBrightnessFilter){document.body.addClassName("iap-brightness-fallback")}var e=iAd.RootViewController.sharedRootViewController.rootViewSize;if(e){this._size=new iAd.Size(e.width,e.height)}else{if(iAP.Context.IS_SAFARI){this._size=new iAd.Size(document.body.offsetWidth,document.body.offsetHeight)}}if(iAP.Context.IS_IAD_PRODUCER||iAP.Context.IS_SAFARI){window.removeEventListener("resize",this,true)}};iAd.Class.processMethod(iAd.RootView,"updateSize");var c=iAd.RootView.prototype.updateSize;var a=768;var d=414;iAd.RootView.prototype.updateSize=function(){if(iAP.Context.IS_IOS){var i=iAd.Device.supportedOrientations;var h=i.indexOf(iAd.Device.ORIENTATION_PORTRAIT)!==-1;var g=iAd.Device.IS_IPAD?a:d;var f=window.innerWidth;var j=window.innerHeight;if(h&&f>g||!h&&j>g){this.size=new iAd.Size(j,f)}else{c.apply(this)}}else{var e=this;setTimeout(function(){if(iAP.Context.IS_SAFARI){e._size=new iAd.Size(document.body.offsetWidth,document.body.offsetHeight);e.notifyPropertyChange("size")}else{c.apply(e)}},0)}};iAd.RootView.prototype.setIsLandscape=function(h){if(iAP.Context.projectIsOfType("radio-audio-banner")){return}if(document.body.hasClassName("iap-custom-page-size")){return}var g=this.size.width,e=this.size.height,f=g>e;if(f!=h){this.size=new iAd.Size(e,g)}}})();
/**
*
* Copyright © 2009-2016 Apple Inc.  All rights reserved.
*
**/

iAd.Class({name:"iAd.RootViewController",superclass:iAd.ViewController,archivedProperties:["navigationController"]});iAd.RootViewController.ID="root";iAd.RootViewController.prototype.init=function(b){b=b||{};b.id=iAd.RootViewController.ID;if(b.requiredFileURIs){delete b.requiredFileURIs.contentView}this.callSuper(b);this.openBeginIgnoringInteractionEventsCalls=0;this.shouldArchiveView=false;iAd.RootViewController.sharedRootViewController=this;var a=this.view};iAd.RootViewController.prototype.loadView=function(){this.view=iAd.RootView.sharedRoot};iAd.RootViewController.prototype.archiveProperty=function(a){if(a=="navigationController"){return this._navigationController}else{return this.callSuper(a)}};iAd.RootViewController.prototype.beginIgnoringInteractionEvents=function(){this.openBeginIgnoringInteractionEventsCalls++;if(this.openBeginIgnoringInteractionEventsCalls==1){this.view.layer.style.pointerEvents="none"}};iAd.RootViewController.prototype.endIgnoringInteractionEvents=function(){if(this.openBeginIgnoringInteractionEventsCalls==0){return}this.openBeginIgnoringInteractionEventsCalls--;if(this.openBeginIgnoringInteractionEventsCalls==0){this.view.layer.style.pointerEvents="auto"}};iAd.RootViewController.prototype.isIgnoringInteractionEvents=function(){return(this.openBeginIgnoringInteractionEventsCalls>0)};Object.defineProperty(iAd.RootViewController,"sharedRootViewController",{get:function(){if(!iAd.RootViewController.hasOwnProperty("_sharedRootViewController")){var a=new iAd.RootViewController()}return iAd.RootViewController._sharedRootViewController},set:function(a){iAd.RootViewController._sharedRootViewController=a}});
/**
*
* Copyright © 2009-2016 Apple Inc.  All rights reserved.
*
**/

iAd.Class("iAd.ViewProcessor");iAd.ViewProcessor.prototype.init=function(a){this.callSuper();this.viewController=a};iAd.ViewProcessor.prototype.processView=function(a){};iAd.ViewProcessor.prototype.cleanUp=function(){};
/**
*
* Copyright © 2009-2016 Apple Inc.  All rights reserved.
*
**/

iAd.Class({name:"iAd.ViewControllerReferencingViewProcessor",superclass:iAd.ViewProcessor});iAd.ViewControllerReferencingViewProcessor.prototype.init=function(a){this.callSuper(a);this.anchors=[]};iAd.ViewControllerReferencingViewProcessor.prototype.processView=function(b){var f=this.constructor.PROCESSED_KEY;var a=this.constructor.ATTR_NAME;var e=iAd.Element.HTML5_CUSTOM_ATTRIBUTE_PREFIX+a;var c;var h=b.layer.querySelectorAll("["+e+"],["+a+"]");for(var d=0,g=h.length;d<g;d++){c=h[d];if(c.hasOwnProperty(f)){continue}if(c._view){c._view.userInteractionEnabled=true}iAd.Event.registerForNotificationEvent(iAd.View.ACTIVATE_EVENT);c.addEventListener(iAd.View.ACTIVATE_EVENT,this,false);c.addEventListener("click",this,false);iAd.SpatialNavigationManager.sharedManager.addNavigableElement(c);c.addEventListener(iAd.SpatialNavigationManager.ACTIVATE_EVENT,this,false);c[f]=true;this.anchors.push(c)}};iAd.ViewControllerReferencingViewProcessor.prototype.cleanUp=function(){var b=this.constructor.PROCESSED_KEY;var a;while(this.anchors.length){a=this.anchors.pop();a.removeEventListener(iAd.View.ACTIVATE_EVENT,this,false);a.removeEventListener("click",this,false);a.removeEventListener(iAd.SpatialNavigationManager.ACTIVATE_EVENT,this,false);iAd.SpatialNavigationManager.sharedManager.removeNavigableElement(a);delete a[b]}};iAd.ViewControllerReferencingViewProcessor.prototype.shouldHandleEvent=function(b){var a=b.currentTarget;if(!iAd.Element.hasCustomAttribute(a,this.constructor.ATTR_NAME)){return false}if(b.type=="click"&&iAd.Control.isNodeInControlHierarchyBoundedByElement(b.target,a)){return false}return true};
/**
*
* Copyright © 2009-2016 Apple Inc.  All rights reserved.
*
**/

iAd.Transaction={transitions:[],openTransactions:0,defaults:{},defaultsStates:[]};iAd.Transaction.begin=function(){if(this.openTransactions==0){this.transitions=[];this.defaults={}}else{var a={};iAd.Utils.copyPropertiesFromSourceToTarget(this.defaults,a);this.defaultsStates.push(a)}this.openTransactions++};iAd.Transaction.addTransition=function(b){for(var a in this.defaults){if(b[a]==null){b[a]=this.defaults[a]}}this.transitions.push(b)};iAd.Transaction.commit=function(){if(this.openTransactions==0){return}this.openTransactions--;if(this.openTransactions!=0){this.defaults=this.defaultsStates.pop();return}var c=this.transitions;for(var a=0,b=c.length;a<b;a++){c[a].applyFromState()}iAd.CSS.flushPendingUpdates();setTimeout(function(){while(c.length){c.pop().applyToState()}},0)};iAd.Utils.setupDisplayNames(iAd.Transaction,"iAd.Transaction");
/**
*
* Copyright © 2009-2016 Apple Inc.  All rights reserved.
*
**/

iAd.Class({name:"iAd.TransitionController",superclass:iAd.ViewController,synthesizedProperties:["visibleViewController","cachedViewControllers","loadingViewController"],archivedProperties:["visibleViewController","previouslyVisibleViewController","loadingViewController","loadingViewControllerMinimumDisplayTime"]});iAd.TransitionController.WILL_MAKE_VIEW_CONTROLLER_VISIBLE="transitionControllerWillMakeViewControllerVisibleAnimated";iAd.TransitionController.DID_MAKE_VIEW_CONTROLLER_VISIBLE="transitionControllerDidMakeViewControllerVisibleAnimated";iAd.TransitionController.VIEW_IS_VISIBLE_STATE="ad-transition-controller-visible";iAd.TransitionController.VIEW_IS_HIDDEN_STATE="ad-transition-controller-hidden";iAd.TransitionController.VIEW_BUILDS_IN_STATE="ad-view-builds-in";iAd.TransitionController.VIEW_BUILDS_OUT_STATE="ad-view-builds-out";iAd.TransitionController.VIEW_BUILDS_IN_ACTION_LIST_CLASS="ad-view-builds-in-action-list";iAd.TransitionController.VIEW_BUILDS_OUT_ACTION_LIST_CLASS="ad-view-builds-out-action-list";iAd.TransitionController.VIEW_IDLE_STATE="ad-view-is-idle";iAd.TransitionController.DEFAULT_TRANSITION_DURATION=0.35;iAd.TransitionController.WAITING_ON_DISPLAY_CSS_CLASS="ad-waiting-on-display";iAd.TransitionController.prototype.init=function(b,a){this.callSuper(b);this._cachedViewControllers=[];this._visibleViewController=null;this._loadingViewController=null;this.loadingViewControllerMinimumDisplayTime=0;this.loadingViewControllerVisible=false;this.delegate=null;this.hidesLoadingViewControllerWithTransition=true;this.previouslyVisibleViewController=null;this.busy=false;if(a!=undefined){this.visibleViewController=a}};iAd.TransitionController.prototype.loadView=function(){this.view=new iAd.TransitionControllerView()};iAd.TransitionController.prototype.setCachedViewControllers=function(c){var a;var e=this._cachedViewControllers;for(var b=0,d=e.length;b<d;b++){a=e[b];if(a!==this._visibleViewController&&c.indexOf(a)==-1){a.view.removeFromSuperview()}}for(b=0,d=c.length;b<d;b++){a=c[b];if(a!==this._visibleViewController&&e.indexOf(a)==-1){this.attachViewController(a)}}this._cachedViewControllers=c.slice()};iAd.TransitionController.prototype.attachViewController=function(b){var a=b.view;a.layer.addClassName(iAd.TransitionController.WAITING_ON_DISPLAY_CSS_CLASS);if(a.superview!==this._view){this._view.addSubview(a)}};iAd.TransitionController.prototype.setVisibleViewController=function(a){this.setVisibleViewControllerAnimated(a,false)};iAd.TransitionController.prototype.setVisibleViewControllerAnimated=function(b,a){if(this.busy||this._visibleViewController===b){return}iAd.RootViewController.sharedRootViewController.beginIgnoringInteractionEvents();this.transitionIsDelayedByPreviouslyVisibleViewController=false;this.previouslyVisibleViewController=this._visibleViewController;this._visibleViewController=b;if(b){b._transitionController=this}if(this.previouslyVisibleViewController!=null){this.previouslyVisibleViewController.viewWillDisappear(a);this.transitionIsDelayedByPreviouslyVisibleViewController=this.prepareToHideViewController(this.previouslyVisibleViewController);iAd.SpatialNavigationManager.sharedManager.unregisterSubtree(this.previouslyVisibleViewController.view.layer)}if(b==null){this.performTransitionToViewController(b,a);return}this.attachViewController(b);this.nextVisibleViewController=b;this.willUseAnimationToTransitionToNextVisibleViewController=a;if(!this.transitionIsDelayedByPreviouslyVisibleViewController){this.previousViewControllerDidUnblockTransitions()}if(!b.isViewLoaded()){b.addPropertyObserver("viewWasProcessed",this,"viewControllerFinishedProcessingView")}};iAd.TransitionController.prototype.performTransitionToViewController=function(c,b){if(c!=null){c.viewWillAppear(b)}this.dispatchNotification(iAd.TransitionController.WILL_MAKE_VIEW_CONTROLLER_VISIBLE,this.delegate,[["newlyVisibleViewController",c],["previouslyVisibleViewController",this.previouslyVisibleViewController],["animated",b]]);if(c!=null){this.prepareToShowViewController(c)}iAd.Transaction.begin();var d,a=null;this.busy=b;iAd.Transaction.begin();iAd.Transaction.defaults.duration=b?iAd.TransitionController.DEFAULT_TRANSITION_DURATION:0;if(this.previouslyVisibleViewController!=null){d=b?this.previouslyVisibleViewController.becomesHiddenTransition:null;if(d!=null){d=this.viewForTransition(this.previouslyVisibleViewController).applyTransition(d,false)}}if(c!=null){a=b?c.becomesVisibleTransition:null;if(a!=null){a=this.viewForTransition(c).applyTransition(a,false)}}if(a instanceof iAd.Transition){a.delegate=this}else{if(d instanceof iAd.Transition){d.delegate=this}else{b=false}}iAd.Transaction.commit();if(c!=null){if(a){setTimeout(function(){c.view.layer.removeClassName(iAd.TransitionController.WAITING_ON_DISPLAY_CSS_CLASS)},0)}else{c.view.layer.removeClassName(iAd.TransitionController.WAITING_ON_DISPLAY_CSS_CLASS)}iAd.SpatialNavigationManager.sharedManager.registerSubtree(c.view.layer)}if(this.hidesLoadingViewControllerWithTransition){this.hideLoadingViewController()}iAd.Transaction.commit();if(!b){this.transitionDidComplete()}};iAd.TransitionController.prototype.performBuildInToViewController=function(b){if(!b.shouldPlayBuildInActionList){return}var a=b.actionListNameByClassName[iAd.TransitionController.VIEW_BUILDS_IN_ACTION_LIST_CLASS];if(a){b.enterState(iAd.TransitionController.VIEW_BUILDS_IN_STATE);b.callMethodNameAfterDelay("startActionList",0,a);if(b.buildInActionListShouldOnlyPlayOnce){b.shouldPlayBuildInActionList=false}}};iAd.TransitionController.prototype.performBuildOutToViewController=function(b){if(!b.shouldPlayBuildOutActionList){return false}var a=b.actionListNameByClassName[iAd.TransitionController.VIEW_BUILDS_OUT_ACTION_LIST_CLASS];if(a){b.enterState(iAd.TransitionController.VIEW_BUILDS_OUT_STATE);b.startActionList(a);if(b.buildOutActionListShouldOnlyPlayOnce){b.shouldPlayBuildOutActionList=false}if(b.buildOutActionListShouldDelayTransition){return true}}return false};iAd.TransitionController.prototype.prepareToHideViewController=function(a){var b=false;a.exitState(iAd.TransitionController.VIEW_IS_VISIBLE_STATE);a.enterState(iAd.TransitionController.VIEW_IS_HIDDEN_STATE);a.exitState(iAd.TransitionController.VIEW_IDLE_STATE);b=this.performBuildOutToViewController(a);return b};iAd.TransitionController.prototype.prepareToShowViewController=function(a){a.exitState(iAd.TransitionController.VIEW_BUILDS_OUT_STATE);a.exitState(iAd.TransitionController.VIEW_IS_HIDDEN_STATE);a.enterState(iAd.TransitionController.VIEW_IS_VISIBLE_STATE);a.exitState(iAd.TransitionController.VIEW_IDLE_STATE);if(!a.buildInActionListShouldOccurAfterTransition){this.performBuildInToViewController(a)}};iAd.TransitionController.prototype.viewControllerActionListDidComplete=function(d,a){if(!d.isInState(iAd.TransitionController.VIEW_BUILDS_IN_STATE)&&!d.isInState(iAd.TransitionController.VIEW_BUILDS_OUT_STATE)){return}var c=a.cssClassName;if(c===iAd.TransitionController.VIEW_BUILDS_OUT_ACTION_LIST_CLASS){d.exitState(iAd.TransitionController.VIEW_BUILDS_OUT_STATE);if(this.transitionIsDelayedByPreviouslyVisibleViewController){this.transitionIsDelayedByPreviouslyVisibleViewController=false;this.previousViewControllerDidUnblockTransitions()}else{if(d===this._loadingViewController){var b=(d.becomesHiddenTransition!=null);this.detachLoadingViewControllerAnimated(b);if(d.buildOutActionListShouldDelayTransition){this.showNextViewControllerIfReady()}}}}else{if(c===iAd.TransitionController.VIEW_BUILDS_IN_ACTION_LIST_CLASS){d.exitState(iAd.TransitionController.VIEW_BUILDS_IN_STATE);if(!this.busy){d.enterState(iAd.TransitionController.VIEW_IDLE_STATE);if(d===this._loadingViewController){this.showNextViewControllerIfReady()}}}}};iAd.TransitionController.prototype.viewControllerFinishedProcessingView=function(b,a){b.removePropertyObserver("viewWasProcessed",this);this.showNextViewControllerIfReady()};iAd.TransitionController.prototype.previousViewControllerDidUnblockTransitions=function(){var a=this.nextVisibleViewController;var b=a.viewLoadingDelaysTransition&&!a.isViewLoaded();if(!a.disableLoadingViewController&&this._loadingViewController&&b){this.showLoadingViewController();return}if(!b){this.performTransitionToViewController(a,this.willUseAnimationToTransitionToNextVisibleViewController)}};iAd.TransitionController.prototype.viewForTransition=function(b){var a=b.view;if(a.size.equals(iAd.Size.ZERO_SIZE)&&b.contentView!=null){a=b.contentView}return a};iAd.TransitionController.prototype.viewControllerViewDidAppear=function(b,a){if(b.buildInActionListShouldOccurAfterTransition){this.performBuildInToViewController(b)}b.viewDidAppear(a)};iAd.TransitionController.prototype.viewControllerViewDidDisappear=function(b,a){b.viewDidDisappear(a)};iAd.TransitionController.prototype.contentTransitionDidComplete=function(b){iAd.RootViewController.sharedRootViewController.endIgnoringInteractionEvents();var a=this._wasAnimatedTransition=this.busy;if(this.previouslyVisibleViewController!=null){if(this._cachedViewControllers.indexOf(this.previouslyVisibleViewController)==-1){this.previouslyVisibleViewController.view.removeFromSuperview()}else{this.previouslyVisibleViewController.view.layer.addClassName(iAd.TransitionController.WAITING_ON_DISPLAY_CSS_CLASS)}this.viewControllerViewDidDisappear(this.previouslyVisibleViewController,a)}if(this._visibleViewController!=null){if(this.loadingViewControllerVisible&&!this.hidesLoadingViewControllerWithTransition){this.hideLoadingViewController()}else{this.notifyVisibleViewControllerDidAppear()}}this.busy=false;this.dispatchNotification(iAd.TransitionController.DID_MAKE_VIEW_CONTROLLER_VISIBLE,this.delegate,[["newlyVisibleViewController",this._visibleViewController],["previouslyVisibleViewController",this.previouslyVisibleViewController],["animated",a]])};iAd.TransitionController.prototype.notifyVisibleViewControllerDidAppear=function(){var a=this._visibleViewController;if(a.isInState(iAd.ViewController.VIEW_DID_APPEAR_STATE)&&!iAd.TransitionController.__forceNotifyVisibleViewControllerDidAppear){return}this.viewControllerViewDidAppear(a,this._wasAnimatedTransition);this._wasAnimatedTransition=false;var b=a.actionListNameByClassName[iAd.TransitionController.VIEW_BUILDS_IN_ACTION_LIST_CLASS];if(!b||!a.isInState(iAd.TransitionController.VIEW_BUILDS_IN_STATE)){a.enterState(iAd.TransitionController.VIEW_IDLE_STATE)}};iAd.TransitionController.prototype.setLoadingViewController=function(a){if(this.loadingViewControllerVisible){return}if(a&&!a.isViewLoading()&&!a.isViewLoaded()){this.attachViewController(a)}this._loadingViewController=a;if(a){a._transitionController=this}};iAd.TransitionController.prototype.showLoadingViewController=function(){if(this.loadingViewControllerVisible||this._loadingViewController==null){return}var c=this._loadingViewController;var b=c.view;var a=(c.becomesVisibleTransition!=null);c.view.layer.removeClassName(iAd.TransitionController.WAITING_ON_DISPLAY_CSS_CLASS);c.viewWillAppear(a);this.prepareToShowViewController(this._loadingViewController);if(a){b.size=this._view.size.copy();b.autoresizingMask=iAd.View.AUTORESIZING_FLEXIBLE_WIDTH|iAd.View.AUTORESIZING_FLEXIBLE_HEIGHT;var d=b.applyTransition(c.becomesVisibleTransition,false);d.delegate=this;this._loadingViewControllerBecomesVisibleTransition=d}this._view.addSubview(b);this.loadingViewControllerVisible=true;if(this.loadingViewControllerMinimumDisplayTime>0){this.loadingViewDisplayTime=new Date();this.callMethodNameAfterDelay("showNextViewControllerIfReady",this.loadingViewControllerMinimumDisplayTime)}if(!a){this.viewControllerViewDidAppear(c,false);this.showNextViewControllerIfReady()}};iAd.TransitionController.prototype.hideLoadingViewController=function(){if(!this.loadingViewControllerVisible){return}var b=this._loadingViewController;if(b.isInState(iAd.ViewController.VIEW_WILL_DISAPPEAR_STATE)){return}var a=(b.becomesHiddenTransition!=null);b.viewWillDisappear(a);this.prepareToHideViewController(b);var c=b.actionListNameByClassName[iAd.TransitionController.VIEW_BUILDS_OUT_ACTION_LIST_CLASS];if(!c){this.detachLoadingViewControllerAnimated(a)}};iAd.TransitionController.prototype.detachLoadingViewControllerAnimated=function(b){var a=this._loadingViewController;if(b){var c=a.view.applyTransition(a.becomesHiddenTransition,false);c.delegate=this}else{a.view.removeFromSuperview();this.viewControllerViewDidDisappear(a,false)}this.loadingViewControllerVisible=false};iAd.TransitionController.prototype.loadingViewControllerTransitionDidComplete=function(a){if(this.loadingViewControllerVisible){this.viewControllerViewDidAppear(this._loadingViewController,true);this.showNextViewControllerIfReady()}else{this._loadingViewController.view.removeFromSuperview();this.viewControllerViewDidDisappear(this._loadingViewController,true);if(!this.hidesLoadingViewControllerWithTransition){this.notifyVisibleViewControllerDidAppear()}}};iAd.TransitionController.prototype.showNextViewControllerIfReady=function(){if(this.transitionIsDelayedByPreviouslyVisibleViewController){return}if(this.loadingViewControllerVisible){var c=this._loadingViewController;if(c.isInState(iAd.TransitionController.VIEW_BUILDS_IN_STATE)||c.isInState(iAd.ViewController.VIEW_WILL_APPEAR_STATE)){return}if(this.loadingViewControllerMinimumDisplayTime>0){var a=(Date.now()-this.loadingViewDisplayTime)/1000;if(a<this.loadingViewControllerMinimumDisplayTime){return}}if(this.hidesLoadingViewControllerWithTransition){var d=c.actionListNameByClassName[iAd.TransitionController.VIEW_BUILDS_OUT_ACTION_LIST_CLASS];if(d&&c.buildOutActionListShouldDelayTransition){this.hideLoadingViewController();return}}}var b=this.nextVisibleViewController;if(b&&b.viewLoadingDelaysTransition&&!b.isViewLoaded()){return}if(b.isInState(iAd.ViewController.VIEW_WILL_APPEAR_STATE)||b.isInState(iAd.ViewController.VIEW_DID_APPEAR_STATE)){return}this.performTransitionToViewController(b,this.willUseAnimationToTransitionToNextVisibleViewController)};iAd.TransitionController.prototype.transitionDidComplete=function(a){if(a&&this._loadingViewController!=null&&a.target===this._loadingViewController.view){this.loadingViewControllerTransitionDidComplete(a)}else{this.contentTransitionDidComplete(a)}};iAd.Class({name:"iAd.TransitionControllerView",superclass:iAd.View,cssClassName:"ad-transition-controller-view"});iAd.TransitionControllerView.prototype.init=function(a){this.callSuper(a);this.autoresizingMask=iAd.View.AUTORESIZING_FLEXIBLE_WIDTH|iAd.View.AUTORESIZING_FLEXIBLE_HEIGHT};iAd.TransitionControllerView.prototype.willMoveToSuperview=function(a){this.callSuper(a);if(a!=null&&this._size.equals(iAd.Size.ZERO_SIZE)){this.size=a.size.copy()}};iAd.ViewController.prototype.getTransitionController=function(){return this._transitionController||this.parentControllerOfKind(iAd.TransitionController)};iAd.Class.synthesizeProperties(iAd.ViewController,["transitionController"]);iAd.RootViewController.prototype.getTransitionController=function(){if(!this.hasOwnProperty("_transitionController")){var b=iAd.RootView.sharedRoot;var a=new iAd.TransitionController();a.view.size=b.size.copy();a.delegate=this;b.addSubview(a.view,0);this._transitionController=a}return this._transitionController};iAd.Class.synthesizeProperties(iAd.RootViewController,["transitionController"]);
/**
*
* Copyright © 2009-2016 Apple Inc.  All rights reserved.
*
**/

iAd.TransitionController.prototype.setLoadingViewController=function(a){if(this.loadingViewControllerVisible){return}this._loadingViewController=a;if(a){a._transitionController=this}};iAd.TransitionController.prototype.transitionDidComplete=function(a){if(a&&this._loadingViewController!=null&&a.target===this._loadingViewController._view){clearTimeout(this._loadingViewTransitionFallbackTimeout);this.loadingViewControllerTransitionDidComplete(a)}else{this.contentTransitionDidComplete(a)}};iAd.Utils.replaceMethod(iAd.TransitionController,"showLoadingViewController",function(){this._loadingViewControllerBecomesVisibleTransition=null;this.callOriginal.apply(this,arguments);if(this._loadingViewControllerBecomesVisibleTransition){var b=this;var e=this._loadingViewControllerBecomesVisibleTransition;var a=100;var d=(iAd.Utils.objectIsArray(e.duration))?Math.max.apply(Math.max,e.duration):e.duration;var c=(iAd.Utils.objectIsArray(e.delay))?Math.max.apply(Math.max,e.delay):e.delay;this._loadingViewTransitionFallbackTimeout=setTimeout(function(){e.delegate=null;b.transitionDidComplete.call(b,e);this._loadingViewControllerBecomesVisibleTransition=null},(c+d)*1000+a)}});
/**
*
* Copyright © 2009-2016 Apple Inc.  All rights reserved.
*
**/

iAd.Class({name:"iAd.NavigationController",superclass:iAd.ViewController,synthesizedProperties:["viewControllers","topViewController","visibleViewController","navigationBarHidden","toolbar","navigationBar","toolbarHidden"],archivedProperties:["viewControllers","navigationBarHidden","toolbarHidden","autoReversesTransitions"]});iAd.NavigationController.WILL_SHOW_VIEW_CONTROLLER="navigationControllerWillShowViewControllerAnimated";iAd.NavigationController.DID_SHOW_VIEW_CONTROLLER="navigationControllerDidShowViewControllerAnimated";iAd.NavigationController.HIDE_SHOW_BAR_DURATION=0.2;iAd.NavigationController.POPOVER_OFFSET=6;iAd.NavigationController.prototype.init=function(b,a){this.callSuper(b);this.delegate=null;this._viewControllers=[];this.autoReversesTransitions=false;this.shouldAnimateInitialViewController=false;this.previousController=null;this.viewAppearancePropagationProperty="visibleViewController";this.shouldArchiveView=false;this.delayedSetOperationArguments=null;this.backingTransitionController=new iAd.TransitionController();this.backingTransitionController.delegate=this;this._navigationBarHidden=false;this._toolbarHidden=true;this._navigationBar=null;this._toolbar=null;this.requiresDeferredHostViewSizeUpdate=false;if(a!=null){this.viewControllers=[a]}};iAd.NavigationController.prototype.loadView=function(){var a=new iAd.NavigationView(this);this.view=a;a.layer.addClassName("ad-navigation-controller-view");a.size=new iAd.Size(window.innerWidth,window.innerHeight);a.autoresizingMask=iAd.View.AUTORESIZING_FLEXIBLE_WIDTH|iAd.View.AUTORESIZING_FLEXIBLE_HEIGHT;a.clipsToBounds=true;if(!this._navigationBarHidden&&this.navigationBar){a.addSubview(this.navigationBar)}this.hostView=a.addSubview(this.backingTransitionController.view);this.hostView.layer.addClassName("ad-navigation-controller-host-view");if(!this._toolbarHidden&&this.toolbar){a.addSubview(this.toolbar)}a.addPropertyObserver("size",this,"sizeChanged");this.sizeChanged();this.performDelayedSetOperation();var b=this.topViewController?this.topViewController.view:null;if(b&&b.superview!=this.hostView){b.size=this.hostView.size.copy();b.autoresizingMask=iAd.View.AUTORESIZING_FLEXIBLE_WIDTH|iAd.View.AUTORESIZING_FLEXIBLE_HEIGHT;this.hostView.addSubview(b)}a.layer.addEventListener(iAd.SpatialNavigationManager.NAVIGATE_EVENT,this,false)};iAd.NavigationController.prototype.viewMovedToNewSuperview=function(){var a=this._navigationBar;if(!a){return}var b=a.topItem;if(b!=null){b.updateLayoutIfTopItem()}};iAd.NavigationController.prototype.unloadView=function(){if(this.hostView){this.hostView.removeFromSuperview();this.hostView=null}if(this._toolbar){this._toolbar.removeFromSuperview();this._toolbar=null}if(this._navigationBar){this._navigationBar.removeFromSuperview();this._navigationBar=null}this.callSuper()};iAd.NavigationController.prototype.didReceiveMemoryWarning=function(){this.callSuper();var b=this._viewControllers.length-(this._view?2:0);for(var a=0;a<b;a++){this._viewControllers[a].unloadView()}};iAd.NavigationController.prototype.handleEvent=function(a){if(iAd.SpatialNavigationManager&&a.type==iAd.SpatialNavigationManager.NAVIGATE_EVENT){if(a.ad.command==iAd.Event.KEYBOARD_BACKSPACE){this.popViewControllerAnimated(true);a.preventDefault()}}else{this.callSuper(a)}};iAd.NavigationController.prototype.getNavigationBar=function(){var a=this._navigationBar;if(!a){if(!iAd.NavigationBar){iAd.Console.warn("iAd.NavigationController: Attempting to create a navigation bar but iAd.NavigationBar is undefined; navigationBarHidden will be set to true. You must explicitly require iAd.NavigationBar in your project.");this._navigationBarHidden=true;return null}var a=this._navigationBar=new iAd.NavigationBar();a.autoresizingMask=iAd.View.AUTORESIZING_FLEXIBLE_WIDTH;if(this.isViewLoaded()){a.size=new iAd.Size(this.view.size.width,iAd.NavigationBar.DEFAULT_HEIGHT)}}return a};iAd.NavigationController.prototype.getToolbar=function(){var a=this._toolbar;if(!a){if(!iAd.Toolbar){iAd.Console.warn("iAd.NavigationController: Attempting to create a toolbar but iAd.Toolbar is undefined; toolbarHidden will be set to true. You must explicitly require iAd.Toolbar in your project.");this._toolbarHidden=true;return null}var a=this._toolbar=new iAd.Toolbar();a.autoresizingMask=iAd.View.AUTORESIZING_FLEXIBLE_WIDTH;if(this.isViewLoaded()){a.size=new iAd.Size(this.view.size.width,iAd.Toolbar.DEFAULT_HEIGHT)}}return a};iAd.NavigationController.prototype.getTopViewController=function(){return(this.viewControllers.length>0)?this.viewControllers[this.viewControllers.length-1]:null};iAd.NavigationController.prototype.getVisibleViewController=function(){var a=this.topViewController;return a.modalViewController||a};iAd.NavigationController.prototype.getViewControllers=function(){return(this.delayedSetOperationArguments!=null)?this.delayedSetOperationArguments[0]:this._viewControllers};iAd.NavigationController.prototype.setViewControllers=function(a){this.setViewControllersAnimated(a,false)};iAd.NavigationController.prototype.setViewControllersAnimated=function(g,e){if(g.length==0){return}if(this.shouldDelaySetOperation()){this.delayedSetOperationArguments=arguments;return}iAd.Transaction.begin();var f=(this._viewControllers.length>0)?this._viewControllers[this._viewControllers.length-1]:null;var a=g[g.length-1];var h=(this._viewControllers.indexOf(a)!=-1);var c=(!f&&e)?this.shouldAnimateInitialViewController:e;this.dispatchWillShowNotification(a,c);for(var b=0,d=this._viewControllers.length;b<d;b++){this._viewControllers[b].parentViewController=null}for(var b=0,d=g.length;b<d;b++){g[b].parentViewController=this}this._viewControllers=g;this.prepareViewControllersForTransition(f,a,h);this.backingTransitionController.setVisibleViewControllerAnimated(a,c);iAd.Transaction.commit()};iAd.NavigationController.prototype.prepareViewControllersForTransition=function(b,c,a){if(b==null){c.becomesVisibleTransition=c.becomesTopItemTransition}else{if(b!==c){if(this.autoReversesTransitions){b.becomesHiddenTransition=a?b.wasTopItemTransition:c.becomesBackItemTransition;c.becomesVisibleTransition=a?b.wasBackItemTransition:c.becomesTopItemTransition}else{b.becomesHiddenTransition=a?b.wasTopItemTransition:b.becomesBackItemTransition;c.becomesVisibleTransition=a?c.wasBackItemTransition:c.becomesTopItemTransition}}}c.view.size=this.hostView.size.copy();c.view.autoresizingMask=iAd.View.AUTORESIZING_FLEXIBLE_WIDTH|iAd.View.AUTORESIZING_FLEXIBLE_HEIGHT};iAd.NavigationController.prototype.shouldDelaySetOperation=function(){return !this.isViewLoaded()||this.backingTransitionController.busy||(!this.navigationBarHidden&&this.navigationBar.busy)};iAd.NavigationController.prototype.pushViewControllerAnimated=function(a,b){if(this.viewControllers.indexOf(a)!=-1){iAd.Console.warn("iAd.NavigationController.prototype.pushViewControllerAnimated: attempt to push a view controller already in the stack");return}this.setViewControllersAnimated(this.viewControllers.concat([a]),b)};iAd.NavigationController.prototype.popViewControllerAnimated=function(b){if(this.viewControllers.length>1){var a=this.topViewController;this.setViewControllersAnimated(this.viewControllers.slice(0,this.viewControllers.length-1),b);return a}return null};iAd.NavigationController.prototype.popToRootViewControllerAnimated=function(a){return this.popToViewControllerAnimated(this.viewControllers[0],a)};iAd.NavigationController.prototype.popToViewControllerAnimated=function(a,c){var d=this.viewControllers.indexOf(a);if(d<0||d>=this.viewControllers.length-1){return[]}var b=this.viewControllers.slice(d+1);this.setViewControllersAnimated(this.viewControllers.slice(0,d+1),c);return b};iAd.NavigationController.prototype.transitionControllerWillMakeViewControllerVisibleAnimated=function(d,b,c,e){var a=this._navigationBar;if(a){var h=[];for(var f=0,g=this._viewControllers.length;f<g;f++){h.push(this._viewControllers[f].navigationItem)}a.setItemsAnimated(h,this.navigationBarHidden?false:e)}var j=this._toolbar;if(j){j.setItemsAnimated(b.toolbarItems,e)}};iAd.NavigationController.prototype.transitionControllerDidMakeViewControllerVisibleAnimated=function(b,d,a,c){this.dispatchDidShowNotification(d,c);this.callMethodNameAfterDelay("performDelayedSetOperation",0)};iAd.NavigationController.prototype.dispatchDidShowNotification=function(b,a){this.dispatchNotification(iAd.NavigationController.DID_SHOW_VIEW_CONTROLLER,this.delegate,[["viewController",b],["animated",a]])};iAd.NavigationController.prototype.dispatchWillShowNotification=function(b,a){this.dispatchNotification(iAd.NavigationController.WILL_SHOW_VIEW_CONTROLLER,this.delegate,[["viewController",b],["animated",a]])};iAd.NavigationController.prototype.performDelayedSetOperation=function(){if(this.delayedSetOperationArguments==null){return}if(this._navigationBar&&this.navigationBar.busy){this.navigationBar.addPropertyObserver("busy",this,"navigationBarBusyStateChanged")}else{this.setViewControllersAnimated(this.delayedSetOperationArguments[0],this.delayedSetOperationArguments[1]);this.delayedSetOperationArguments=null}};iAd.NavigationController.prototype.navigationBarBusyStateChanged=function(){if(this._navigationBar&&this.navigationBar.busy){return}this.navigationBar.removePropertyObserver("busy",this,"navigationBarBusyStateChanged");this.performDelayedSetOperation()};iAd.NavigationController.prototype.sizeChanged=function(){var d=this.hostedInPopoverController();var c=iAd.NavigationBar?-iAd.NavigationBar.DEFAULT_HEIGHT:0;var b=0;var f=this._view.size.height;if(!this._navigationBarHidden){c=d?-iAd.NavigationController.POPOVER_OFFSET:0;b+=iAd.NavigationBar.DEFAULT_HEIGHT-(d?iAd.NavigationController.POPOVER_OFFSET:0)}if(!this._toolbarHidden){f-=iAd.Toolbar.DEFAULT_HEIGHT-(d?iAd.NavigationController.POPOVER_OFFSET+1:0)}this.hostView.position=new iAd.Point(0,b);var a=this._navigationBar;if(a){a.position=new iAd.Point(0,c)}var e=this._toolbar;if(e){this.toolbar.position=new iAd.Point(0,f)}this.updateHostViewSize()};iAd.NavigationController.prototype.updateHostViewSize=function(){var a=this._view.size.height;var b=this.hostedInPopoverController();if(!this._navigationBarHidden){a-=iAd.NavigationBar.DEFAULT_HEIGHT-(b?iAd.NavigationController.POPOVER_OFFSET:0)}if(!this._toolbarHidden){a-=iAd.Toolbar.DEFAULT_HEIGHT-(b?iAd.NavigationController.POPOVER_OFFSET:0)}this.hostView.size=new iAd.Size(this._view.size.width,a)};iAd.NavigationController.prototype.hostedInPopoverController=function(){return iAd.Utils.objectIsInstanceOfClass(this.parentViewController,iAd.PopoverController)};iAd.NavigationController.prototype.setNavigationBarHidden=function(a){this.setNavigationBarHiddenAnimated(a,false)};iAd.NavigationController.prototype.setNavigationBarHiddenAnimated=function(f,e){if(this._navigationBarHidden==f){return}this._navigationBarHidden=f;if(!this.isViewLoaded()){return}var a=this._navigationBar;if(!a&&f){return}var c=this.hostedInPopoverController();var b=new iAd.Point(0,f?-iAd.NavigationBar.DEFAULT_HEIGHT:(c?-iAd.NavigationController.POPOVER_OFFSET:0));var d=new iAd.Point(0,f?0:iAd.NavigationBar.DEFAULT_HEIGHT-(c?iAd.NavigationController.POPOVER_OFFSET:0));if(!f){this.view.addSubview(this.navigationBar)}if(!e){a.position=b;this.hostView.position=d;this.updateHostViewSize();if(f){a.removeFromSuperview()}return}iAd.Transaction.begin();iAd.Transaction.defaults.duration=e?iAd.NavigationController.HIDE_SHOW_BAR_DURATION:0;iAd.Transaction.defaults.properties=["position"];a.applyTransition({to:[b],removesTargetUponCompletion:f});this.hostView.applyTransition({to:[d],delegate:this});iAd.Transaction.commit();if(f){this.updateHostViewSize()}else{this.requiresDeferredHostViewSizeUpdate=true}};iAd.NavigationController.prototype.transitionDidComplete=function(a){if(this.requiresDeferredHostViewSizeUpdate){this.requiresDeferredHostViewSizeUpdate=false;this.updateHostViewSize()}};iAd.NavigationController.prototype.setToolbarHidden=function(a){this.setToolbarHiddenAnimated(a,false)};iAd.NavigationController.prototype.setToolbarHiddenAnimated=function(b,a){if(this._toolbarHidden==b){return}this._toolbarHidden=b;if(!this.isViewLoaded()){return}if(!this._toolbar&&b){return}var c=new iAd.Point(0,this._view.size.height-(b?0:iAd.Toolbar.DEFAULT_HEIGHT));if(this.hostedInPopoverController()){c.y+=iAd.NavigationController.POPOVER_OFFSET}if(!b){this.view.addSubview(this.toolbar)}if(!a){this.toolbar.position=c;this.updateHostViewSize();if(b){this.toolbar.removeFromSuperview()}return}new iAd.Transition({target:this.toolbar,properties:["position"],to:[c],duration:a?iAd.NavigationController.HIDE_SHOW_BAR_DURATION:0,delegate:this,removesTargetUponCompletion:b}).start();if(b){this.updateHostViewSize()}else{this.requiresDeferredHostViewSizeUpdate=true}this.notifyPropertyChange("toolbarHidden")};iAd.Class({name:"iAd.NavigationView",superclass:iAd.View});iAd.NavigationView.prototype.init=function(a){this.callSuper();this.viewController=a};iAd.NavigationView.prototype.didMoveToSuperview=function(a){this.callSuper(a);if(a!=null){this.viewController.viewMovedToNewSuperview()}};iAd.ViewController.prototype.getNavigationController=function(){return this.parentControllerOfKind(iAd.NavigationController)};iAd.ViewController.prototype.getNavigationItem=function(){if(this._navigationItem==null){this._navigationItem=new iAd.NavigationItem(this.title);this._navigationItem.viewController=this}return this._navigationItem};iAd.ViewController.prototype.setToolbarItems=function(a){this.setToolbarItemsAnimated(a,false)};iAd.ViewController.prototype.setToolbarItemsAnimated=function(b,c){if(!b){return}this._toolbarItems=b;var a=this.parentViewController;if(a!=null&&a instanceof iAd.NavigationController){a.toolbar.setItemsAnimated(b,c)}};iAd.Class.synthesizeProperties(iAd.ViewController,["navigationController","navigationItem","toolbarItems"]);iAd.Class.processMethods(iAd.ViewController,["setToolbarItemsAnimated"]);iAd.RootViewController.prototype.getNavigationController=function(){if(!this.hasOwnProperty("_navigationController")){this.navigationController=new iAd.NavigationController()}return this._navigationController};iAd.RootViewController.prototype.setNavigationController=function(b){b.navigationBarHidden=true;b.shouldAnimateInitialViewController=true;b.delegate=this;var a=this.view;b.view.size=a._size.copy();a.addSubview(b.view);this._navigationController=b};iAd.Class.synthesizeProperties(iAd.RootViewController,["navigationController"]);
/**
*
* Copyright © 2009-2016 Apple Inc.  All rights reserved.
*
**/

iAd.Utils.replaceMethod(iAd.NavigationView,"init",function(){this.callOriginal.apply(this,arguments);if(iAP.Context.IS_SAFARI){this.autoresizesSubviews=false}});
/**
*
* Copyright © 2009-2016 Apple Inc.  All rights reserved.
*
**/

iAd.Class({name:"iAd.NavigationViewProcessor",superclass:iAd.ViewControllerReferencingViewProcessor});iAd.NavigationViewProcessor.PREVIOUS_ITEM_ID="{previous-item}";iAd.NavigationViewProcessor.ATTR_NAME="ad-navigates-to";iAd.NavigationViewProcessor.PROCESSED_KEY="_adProcessedNavigatesTo";iAd.NavigationViewProcessor.prototype.handleEvent=function(e){if(!this.shouldHandleEvent(e)){return}var d=e.currentTarget;var f=iAd.Element.getCustomAttribute(d,iAd.NavigationViewProcessor.ATTR_NAME);var b=iAd.RootViewController.sharedRootViewController.navigationController;if(f==iAd.NavigationViewProcessor.PREVIOUS_ITEM_ID){b.popViewControllerAnimated(true)}else{var a=iAd.ViewController.instances[f];if(a){var c=(b.viewControllers.indexOf(a)!=-1);if(c){b.popToViewControllerAnimated(a,true)}else{b.pushViewControllerAnimated(a,true)}}}};iAd.ViewController.addViewProcessor(iAd.NavigationViewProcessor);
/**
*
* Copyright © 2009-2016 Apple Inc.  All rights reserved.
*
**/

iAd.Class({name:"iAd.OutletsViewProcessor",superclass:iAd.ViewProcessor});iAd.OutletsViewProcessor.prototype.init=function(a){this.callSuper(a);this.outlets=[]};iAd.OutletsViewProcessor.prototype.processView=function(b){var a="ad-outlet";var d=iAd.Element.HTML5_CUSTOM_ATTRIBUTE_PREFIX+a;var g;var f=b.layer.querySelectorAll("["+d+"],["+a+"]");for(var c=0,e=f.length;c<e;c++){g=f[c];this.viewController.outlets[iAd.Element.getCustomAttribute(g,a)]=(g.hasOwnProperty("_view"))?g._view:g}};iAd.OutletsViewProcessor.prototype.cleanUp=function(){for(var a in this.viewController.outlets){delete this.viewController.outlets[a]}};iAd.ViewController.addViewProcessor(iAd.OutletsViewProcessor);
/**
*
* Copyright © 2009-2016 Apple Inc.  All rights reserved.
*
**/

iAd.Bindings={};iAd.Bindings.SHIMS_ENABLED=false;iAd.BindingUtils={};iAd.BindingUtils.BINDING_UNAVAILABLE_ERROR="This binding is unavailable.";iAd.BindingUtils.initializeBindingObject=function(b,a){var c=a?b:b.constructor;b._binding=c.BINDING_OBJECT;if(!iAd.Bindings.SHIMS_ENABLED&&b._binding.shim){b._binding=null}b._bindingClass=c.BINDING_CLASS;b._bindingProtocol=c.BINDING_PROTOCOL};iAd.BindingUtils.registerBindingClass=function(a){Object.defineProperty(a,"available",{get:function(){if(this.hasOwnProperty("getAvailable")){return this.getAvailable()}else{return iAd.BindingUtils.isBindingClassAvailable(this)}}})};iAd.BindingUtils.isBindingClassAvailable=function(a){return !!(a.BINDING_OBJECT&&(iAd.Bindings.SHIMS_ENABLED||!a.BINDING_OBJECT.shim))};iAd.BindingUtils.isErrorFromModalActivity=function(a){var b=this.sanitizeMessageFromError(a);return(b&&b.indexOf("modal activity is in progress")!==-1)};iAd.BindingUtils.sanitizeMessageFromError=function(a){if(!a){return""}if(a.hasOwnProperty("message")){return a.message}return a.toString()};
/**
*
* Copyright © 2009-2016 Apple Inc.  All rights reserved.
*
**/

window._ad={shim:true};if(!window.ADAd){window._ADAd={ADInterfaceOrientationLandscapeLeft:4,ADInterfaceOrientationLandscapeRight:8,ADInterfaceOrientationPortrait:1,ADInterfaceOrientationPortraitUpsideDown:2,kInvalidOrCorruptImageError:4,kInvalidURL:100,kURLInvalidSchemeViolation:105,kURLRelativePathViolation:103,kURLSameOriginPolicyViolation:104}}if(!window.ADNetworkTypeListener){window._ADNetworkTypeListener={kADNetworkTypeListenerNetworkType3G:3,kADNetworkTypeListenerNetworkTypeEDGE:2,kADNetworkTypeListenerNetworkTypeGPRS:1,kADNetworkTypeListenerNetworkTypeUnknown:0,kADNetworkTypeListenerNetworkTypeWiFi:4};window._ad.networkType=window._ADNetworkTypeListener.kADNetworkTypeListenerNetworkTypeUnknown}if(!window.ad||!window.ad.hasOwnProperty("currentSupportedInterfaceOrientations")){window._ad.currentSupportedInterfaceOrientations=0}if(!window.ad||!window.ad.hasOwnProperty("locationServicesEnabled")){window._ad.locationServicesEnabled=false}if(!window.ad){Object.defineProperty(window._ad,"deviceOrientationListener",{set:function(a){if(iAd.Bindings.SHIMS_ENABLED){a.deviceOrientationDidChange(0)}}})}if(!window.ad||!window.ad.hasOwnProperty("canOpenURL")){window._ad.canOpenURL=function(){return false}}if(!window.ad||!window.ad.hasOwnProperty("isTargetApplicationInstalled")){window._ad.isTargetApplicationInstalled=function(){return false}};
/**
*
* Copyright © 2009-2016 Apple Inc.  All rights reserved.
*
**/

if(!Function.prototype.hasOwnProperty("bind")){Function.prototype.bind=function(b){if(typeof this!=="function"){throw new TypeError("Function.prototype.bind - cannot bind something that is not callable")}var e=Array.prototype.slice.call(arguments,1),d=this,c=function(){},a=function(){var f=(this instanceof c)?this:(b||window);return d.apply(f,e.concat(Array.prototype.slice.call(arguments)))};c.prototype=this.prototype;a.prototype=new c();return a}};
/**
*
* Copyright © 2009-2016 Apple Inc.  All rights reserved.
*
**/

iAd.Device._binding=window.ad||window._ad;iAd.Device._bindingProtocol=window._ADAd||window.ADAd;iAd.Device._bindingNetworkProtocol=window._ADNetworkTypeListener||window.ADNetworkTypeListener;iAd.Device.SHAKE_EVENT="deviceShakeDidOccur";iAd.Device.NETWORK_TYPE_CHANGE_EVENT="deviceNetworkTypeDidChange";iAd.Device.ORIENTATION_DID_CHANGE_EVENT="deviceOrientationDidChange";iAd.Device.NETWORK_TYPE_UNKNOWN=iAd.Device._bindingNetworkProtocol.kADNetworkTypeListenerNetworkTypeUnknown;iAd.Device.NETWORK_TYPE_GPRS=iAd.Device._bindingNetworkProtocol.kADNetworkTypeListenerNetworkTypeGPRS;iAd.Device.NETWORK_TYPE_EDGE=iAd.Device._bindingNetworkProtocol.kADNetworkTypeListenerNetworkTypeEDGE;iAd.Device.NETWORK_TYPE_3G=iAd.Device._bindingNetworkProtocol.kADNetworkTypeListenerNetworkType3G;iAd.Device.NETWORK_TYPE_WIFI=iAd.Device._bindingNetworkProtocol.kADNetworkTypeListenerNetworkTypeWiFi;iAd.Device.ORIENTATION_UNKNOWN=-1;iAd.Device.ORIENTATION_FACE_UP=5;iAd.Device.ORIENTATION_FACE_DOWN=6;iAd.Device.BINDING_DEVICE_ORIENTATION_UNKNOWN=0;iAd.Device.BINDING_DEVICE_ORIENTATION_PORTRAIT=1;iAd.Device.BINDING_DEVICE_ORIENTATION_PORTRAIT_UPSIDE_DOWN=2;iAd.Device.BINDING_DEVICE_ORIENTATION_LANDSCAPE_LEFT=3;iAd.Device.BINDING_DEVICE_ORIENTATION_LANDSCAPE_RIGHT=4;iAd.Device.BINDING_DEVICE_ORIENTATION_FACE_UP=5;iAd.Device.BINDING_DEVICE_ORIENTATION_FACE_DOWN=6;iAd.Device.orientationForBindingDeviceOrientation=function(a){switch(a){case iAd.Device.BINDING_DEVICE_ORIENTATION_PORTRAIT:return iAd.Device.ORIENTATION_PORTRAIT;case iAd.Device.BINDING_DEVICE_ORIENTATION_PORTRAIT_UPSIDE_DOWN:return iAd.Device.ORIENTATION_PORTRAIT_UPSIDE_DOWN;case iAd.Device.BINDING_DEVICE_ORIENTATION_LANDSCAPE_LEFT:return iAd.Device.ORIENTATION_LANDSCAPE_LEFT;case iAd.Device.BINDING_DEVICE_ORIENTATION_LANDSCAPE_RIGHT:return iAd.Device.ORIENTATION_LANDSCAPE_RIGHT;case iAd.Device.BINDING_DEVICE_ORIENTATION_FACE_UP:return iAd.Device.ORIENTATION_FACE_UP;case iAd.Device.BINDING_DEVICE_ORIENTATION_FACE_DOWN:return iAd.Device.ORIENTATION_FACE_DOWN;default:return iAd.Device.ORIENTATION_UNKNOWN}};iAd.Device.BINDING_ORIENTATION_UNKNOWN=0;iAd.Device.BINDING_ORIENTATION_PORTRAIT=iAd.Device._bindingProtocol.ADInterfaceOrientationPortrait;iAd.Device.BINDING_ORIENTATION_PORTRAIT_UPSIDE_DOWN=iAd.Device._bindingProtocol.ADInterfaceOrientationPortraitUpsideDown;iAd.Device.BINDING_ORIENTATION_LANDSCAPE_LEFT=iAd.Device._bindingProtocol.ADInterfaceOrientationLandscapeLeft;iAd.Device.BINDING_ORIENTATION_LANDSCAPE_RIGHT=iAd.Device._bindingProtocol.ADInterfaceOrientationLandscapeRight;iAd.Device.BINDING_ORIENTATIONS=[iAd.Device.BINDING_ORIENTATION_PORTRAIT,iAd.Device.BINDING_ORIENTATION_PORTRAIT_UPSIDE_DOWN,iAd.Device.BINDING_ORIENTATION_LANDSCAPE_LEFT,iAd.Device.BINDING_ORIENTATION_LANDSCAPE_RIGHT];iAd.Device.orientationForBindingOrientation=function(a){switch(a){case iAd.Device.BINDING_ORIENTATION_PORTRAIT:return iAd.Device.ORIENTATION_PORTRAIT;case iAd.Device.BINDING_ORIENTATION_PORTRAIT_UPSIDE_DOWN:return iAd.Device.ORIENTATION_PORTRAIT_UPSIDE_DOWN;case iAd.Device.BINDING_ORIENTATION_LANDSCAPE_LEFT:return iAd.Device.ORIENTATION_LANDSCAPE_LEFT;case iAd.Device.BINDING_ORIENTATION_LANDSCAPE_RIGHT:return iAd.Device.ORIENTATION_LANDSCAPE_RIGHT;default:return null}};iAd.Device.bindingOrientationForOrientation=function(a){switch(a){case iAd.Device.ORIENTATION_PORTRAIT:return iAd.Device.BINDING_ORIENTATION_PORTRAIT;case iAd.Device.ORIENTATION_PORTRAIT_UPSIDE_DOWN:return iAd.Device.BINDING_ORIENTATION_PORTRAIT_UPSIDE_DOWN;case iAd.Device.ORIENTATION_LANDSCAPE_LEFT:return iAd.Device.BINDING_ORIENTATION_LANDSCAPE_LEFT;case iAd.Device.ORIENTATION_LANDSCAPE_RIGHT:return iAd.Device.BINDING_ORIENTATION_LANDSCAPE_RIGHT;default:return null}};iAd.Device.eventTarget=document;iAd.Device.setupBindings=function(){iAd.Utils.copyPropertiesFromSourceToTarget(iAd.EventTarget,this);var a=iAd.Device._binding;a.networkTypeListener=this;a.shakeEventsListener=this;a.deviceOrientationListener=this};iAd.Device.shakeEventDidOccur=function(){this.createAndDispatchEvent(iAd.Device.SHAKE_EVENT)};iAd.Device.networkTypeDidChange=function(a){this.createAndDispatchEvent(iAd.Device.NETWORK_TYPE_CHANGE_EVENT,[["networkType",a]])};iAd.Device.deviceOrientationDidChange=function(a){this.orientation=iAd.Device.orientationForBindingDeviceOrientation(a);this.createAndDispatchEvent(iAd.Device.ORIENTATION_DID_CHANGE_EVENT,[["orientation",this.orientation]])};iAd.Device.getSupportedOrientations=function(){var b=iAd.Device._binding.currentSupportedInterfaceOrientations,e=[],a;for(var c=0,d=iAd.Device.BINDING_ORIENTATIONS.length;c<d;c++){a=iAd.Device.BINDING_ORIENTATIONS[c];if(b&a){e.push(iAd.Device.orientationForBindingOrientation(a))}}return e};iAd.Device.setSupportedOrientations=function(d){var a;for(var b=0,c=d.length;b<c;b++){a|=iAd.Device.bindingOrientationForOrientation(d[b])}try{iAd.Device._binding.currentSupportedInterfaceOrientations=a}catch(f){iAd.Console.warn("iAd.Device: There was an error setting .supportedOrientations")}};Object.defineProperty(iAd.Device,"supportedOrientations",{get:iAd.Device.getSupportedOrientations,set:iAd.Device.setSupportedOrientations});iAd.Device.getNetworkType=function(){return this._binding.networkType};Object.defineProperty(iAd.Device,"networkType",{get:iAd.Device.getNetworkType});iAd.Device.getLocationServicesEnabled=function(){return this._binding.locationServicesEnabled};Object.defineProperty(iAd.Device,"locationServicesEnabled",{get:iAd.Device.getLocationServicesEnabled});iAd.Device.canOpenURL=function(a){return !!(this._binding.canOpenURL&&this._binding.canOpenURL(a))};iAd.Device.isTargetApplicationInstalled=function(){return !!(this._binding.isTargetApplicationInstalled&&this._binding.isTargetApplicationInstalled())};window.addEventListener("DOMContentLoaded",iAd.Device.setupBindings.bind(iAd.Device),true);
/**
*
* Copyright © 2009-2016 Apple Inc.  All rights reserved.
*
**/

iAd.Class({name:"iAP.ViewController",superclass:iAd.ViewController,synthesizedProperties:["readyToTransition","nextViewController","autoAdvanceToNextViewController","autoAdvanceCondition","minimumDelayBeforeTransition"],archivedProperties:["readyToTransition","nextViewController","autoAdvanceToNextViewController","autoAdvanceCondition","minimumDelayBeforeTransition"]});iAP.ViewController.ORIENTATION_UNKNOWN=0;iAP.ViewController.ORIENTATION_PORTRAIT=1;iAP.ViewController.ORIENTATION_PORTRAIT_UPSIDE_DOWN=2;iAP.ViewController.ORIENTATION_LANDSCAPE_LEFT=3;iAP.ViewController.ORIENTATION_LANDSCAPE_RIGHT=4;iAP.ViewController.VIEW_DID_SHAKE="viewControllerViewDidShake";iAP.ViewController.VIEW_DID_ACTIVATE="viewControllerViewDidActivate";iAd.ViewController.TRANSITION_IN_FROM_RIGHT=function(b){var a=b.size.width;return{properties:["transform"],from:["translateX("+a+"px)"],to:["translateX(0)"]}};iAd.ViewController.TRANSITION_IN_FROM_LEFT=function(b){var a=-b.size.width;return{properties:["transform"],from:["translateX("+a+"px)"],to:["translateX(0)"]}};iAd.ViewController.TRANSITION_OUT_TO_RIGHT=function(b){var a=b.size.width;return{properties:["transform"],from:["translateX(0)"],to:["translateX("+a+"px)"]}};iAd.ViewController.TRANSITION_OUT_TO_LEFT=function(b){var a=-b.size.width;return{properties:["transform"],from:["translateX(0)"],to:["translateX("+a+"px)"]}};iAP.ViewController.prototype.init=function(a){this.shouldPlayBuildOutActionList=true;this.shouldPlayBuildInActionList=true;this.buildInActionListShouldOnlyPlayOnce=false;this.buildOutActionListShouldOnlyPlayOnce=false;this.buildInActionListShouldDelayTransition=true;this.nextViewControllerID=null;this._autoAdvanceToNextViewController=false;this._autoAdvanceCondition="no-activity";this._minimumDelayBeforeTransition=0;this._loadingTimeoutDuration=3;this._autoAdvanceToNextViewControllerOnTimeout=false;this.callSuper(a);if(!this.configuration.properties){this.configuration.properties={}}var l=this;Object.defineProperty(this.configuration.properties,"autoAdvanceToNextViewController",{get:function(){iAd.Console.warn('Checking "viewController.configuration.properties.autoAdvanceToNextViewController" is no longer supported. Use "viewController.autoAdvanceToNextViewController" instead.');return l.autoAdvanceToNextViewController},set:function(i){iAd.Console.warn('Setting "viewController.configuration.properties.autoAdvanceToNextViewController" is no longer supported. Use "viewController.autoAdvanceToNextViewController" instead.');l.autoAdvanceToNextViewController=i;return l.autoAdvanceToNextViewController}});this._readyToTransition=false;this._shouldPreloadNextViewControllers=true;this._orientationCode=iAP.ViewController.ORIENTATION_UNKNOWN;this._additionalImages=[];this.becomesReadyToTransitionWhenViewsAreLoaded=true;this.viewControllerContainers=[];if(a.isBackgroundLayer){this.view.autoresizingMask=iAd.View.AUTORESIZING_FLEXIBLE_WIDTH|iAd.View.AUTORESIZING_FLEXIBLE_HEIGHT;this.view.resizeWithOldSuperviewSize(this.view.size)}if(a.disablesAnalytics){this.disablesAnalytics=a.disablesAnalytics}if(a.analyticsId){this.analyticsID=a.analyticsId}var j=iAP.EventDelegate.viewControllerScriptFunctions[a.id];if(j){var d=new iAP.EventDelegate(this,this,j);d.processUserScript()}var k=null;if(this.transitionDuration){k=parseFloat(this.transitionDuration)}var b=["wasBackItemTransition","becomesBackItemTransition","wasTopItemTransition","becomesTopItemTransition","becomesHiddenTransition"];for(var c=0,f=b.length;c<f;c++){var e=b[c];var g=this[e];if(g){if(k>0){if(iAd.Utils.objectIsFunction(g)){this[e]=(function(i){return function(m){var n=i(m);n.revertsToOriginalValues=true;n.duration=k;return n}})(g)}else{var h={};iAd.Utils.copyPropertiesFromSourceToTarget(g,h);this[e]=g=h;g.revertsToOriginalValues=true;g.duration=k}}else{this[e]=null}}}if(iAP.Context.IS_IOS){document.addEventListener("focus",this,true);document.addEventListener("blur",this,true)}};iAP.ViewController.prototype.loadView=function(){if(this.configuration.isBackgroundLayer){this.view=iAd.View.getViewById(this.id);this.__visible=false}else{this.callSuper()}};iAP.ViewController.prototype.setContentView=function(a){if(this._contentView==a){return}if(a&&this.__handlesActivateEvent){a.userInteractionEnabled=true;a.addEventListener(iAd.View.ACTIVATE_EVENT,this,false)}this.callSuper.apply(this,arguments);if(!this.view.size.equals(iAd.Size.ZERO_SIZE)){a.size=this.view.size}};iAP.ViewController.prototype.clearScrollToTopTimer=function(){if(this._scrollToTopTimer){clearTimeout(this._scrollToTopTimer);this._scrollToTopTimer=null}};iAP.ViewController.prototype.clearAutoAdvanceTimer=function(){if(this._autoAdvanceTimer){clearTimeout(this._autoAdvanceTimer);this._autoAdvanceTimer=null}};iAP.ViewController.prototype.handleEvent=function(b){var a=b.type;if(a==iAd.Device.SHAKE_EVENT){this.createAndDispatchEvent(iAP.ViewController.VIEW_DID_SHAKE)}else{if(a==iAd.View.ACTIVATE_EVENT&&this.contentView&&this.contentView.layer==b.ad.originalEvent.target){this.createAndDispatchEvent(iAP.ViewController.VIEW_DID_ACTIVATE)}else{if(a=="orientationchange"&&this.orientation==iAP.ViewController.ORIENTATION_UNKNOWN){if(window.orientation==0){this.setOrientation(iAP.ViewController.ORIENTATION_PORTRAIT)}else{if(window.orientation==-90){this.setOrientation(iAP.ViewController.ORIENTATION_LANDSCAPE_RIGHT)}else{if(window.orientation==180){this.setOrientation(iAP.ViewController.ORIENTATION_PORTRAIT_UPSIDE_DOWN)}else{if(window.orientation==90){this.setOrientation(iAP.ViewController.ORIENTATION_LANDSCAPE_LEFT)}}}}}else{if(this.contentView&&["TEXTAREA","INPUT"].indexOf(b.target.nodeName)!=-1){if(a=="focus"){this.contentView.layer.style.overflow="hidden";this.clearScrollToTopTimer()}else{if(a=="blur"){this.contentView.layer.style.overflow="visible";if(!iAd.Device.iOSVersionLessThan("5.0")){this.clearScrollToTopTimer();this._scrollToTopTimer=setTimeout(function(){window.scrollTo(0,0)},100)}}}}}}}if(this._autoAdvanceToNextViewController){if(a==iAd.Event.START_EVENT){this.clearAutoAdvanceTimer();window.addEventListener(iAd.Event.END_EVENT,this,true)}else{if(a==iAd.Event.END_EVENT){this._idleStartTime=Date.now();this._autoAdvanceTimer=this.callMethodNameAfterDelay("transitionToNextViewController",this._minimumDelayBeforeTransition);window.removeEventListener(iAd.Event.END_EVENT,this,true)}}}this.callSuper(b)};iAP.ViewController.prototype.getNextViewController=function(){return this.nextViewControllerID?iAd.ViewController.instances[this.nextViewControllerID]:null};iAP.ViewController.prototype.setNextViewController=function(a){this.nextViewControllerID=a.id};iAP.ViewController.prototype.isInitialViewController=function(){return this.id==iAd.RootViewController.sharedRootViewController.initialViewControllerID};iAP.ViewController.prototype.preloadNextViewController=function(){if(!this.nextViewController){return}if(this.nextViewController.readyToTransition){this.nextViewControllerIsReadyToTransition(this.nextViewController)}else{this.nextViewController.addPropertyObserver("readyToTransition",this,"nextViewControllerIsReadyToTransition")}this.nextViewController.loadRequiredFiles()};iAP.ViewController.prototype.preloadViewControllers=function(){var d=this.nextViewController;if(d){if(d._autoAdvanceToNextViewControllerOnTimeout){this.callMethodNameAfterDelay("skipNextViewController",d.loadingTimeoutDuration)}this.preloadNextViewController()}if(this.viewControllerIDsToPreload){for(var a=0,c=this.viewControllerIDsToPreload.length;a<c;a++){var b=iAd.ViewController.instances[this.viewControllerIDsToPreload[a]];b.loadRequiredFiles()}}};iAP.ViewController.prototype.skipNextViewController=function(){var a=this.nextViewController;if(a.readyToTransition){return}if(!a._autoAdvanceToNextViewController){return}if(!a.nextViewController){return}a.removePropertyObserver("readyToTransition",this);this.nextViewController=a.nextViewController;this.preloadNextViewController()};iAP.ViewController.prototype.transitionToViewControllerWithID=function(a){this.transitionToViewControllerWithIDAnimated(a,true)};iAP.ViewController.prototype.transitionToViewControllerWithIDAnimated=function(e,b){var c=iAd.ViewController.instances[e];if(c==null){iAd.Console.warn("Attempted to transition to a view controller with an invalid id: "+e);return}var a=iAd.RootViewController.sharedRootViewController.navigationController;var d=(a.viewControllers.indexOf(c)!=-1);if(d){a.popToViewControllerAnimated(c,b)}else{a.pushViewControllerAnimated(c,b)}};iAP.ViewController.prototype.nextViewControllerIsReadyToTransition=function(a){if(!a.readyToTransition){return}a.removePropertyObserver("readyToTransition",this);if(a.configuration.id!=this.nextViewController.id){return}if(this._autoAdvanceToNextViewController){this.transitionToNextViewController()}};iAP.ViewController.prototype.transitionToNextViewController=function(){var d=this.nextViewController;if(!d){return}if(!d.readyToTransition){return}if(this.buildInActionListShouldDelayTransition&&this.isInState(iAd.TransitionController.VIEW_BUILDS_IN_STATE)){return}if(this._autoAdvanceToNextViewController){var c=this._idleStartTime;if(c==null){return}var b=this._minimumDelayBeforeTransition;var a=(Date.now()-c)/1000;if(a<b){this.clearAutoAdvanceTimer();this._autoAdvanceTimer=this.callMethodNameAfterDelay("transitionToNextViewController",b-a);return}}this.transitionToViewControllerWithID(d.configuration.id)};iAP.ViewController.prototype.setPageState=function(b){if(iAd.Utils.objectIsString(b)){b=iAP.PageState.pageStateNamed(b)}if(this._pageState==b){return}var f=iAP.PageState.supportedPageStates;for(var a=0,c=f.length;a<c;a++){this.exitState(f[a].name)}var d=[];var e=b;while(e){d.unshift(e);e=e.parentState}for(var a=0,c=d.length;a<c;a++){this.enterState(d[a].name)}this._pageState=b};iAP.ViewController.prototype.enterState=function(e){this.callSuper(e);var a,d,c;for(a=0,d=this.topAnchoredSharedViewIDs.length;a<d;a++){c=iAP.SharedView.instances[this.topAnchoredSharedViewIDs[a]];c.layer.addClassName(e)}for(a=0,d=this.bottomAnchoredSharedViewIDs.length;a<d;a++){c=iAP.SharedView.instances[this.bottomAnchoredSharedViewIDs[a]];c.layer.addClassName(e)}if(this.backgroundLayerVisible&&e!="ad-view-builds-in-action-list"&&e!="ad-view-builds-in-action-list-is-active"){var b=iAd.ViewController.instances.Background;if(b){b.view.layer.addClassName(e)}}};iAP.ViewController.prototype.exitState=function(e){var f=this.callSuper(e);var a,d,c;for(a=0,d=this.topAnchoredSharedViewIDs.length;a<d;a++){c=iAP.SharedView.instances[this.topAnchoredSharedViewIDs[a]];c.layer.removeClassName(e)}for(a=0,d=this.bottomAnchoredSharedViewIDs.length;a<d;a++){c=iAP.SharedView.instances[this.bottomAnchoredSharedViewIDs[a]];c.layer.removeClassName(e)}if(this.backgroundLayerVisible&&e!="ad-view-builds-in-action-list"&&e!="ad-view-builds-in-action-list-is-active"){var b=iAd.ViewController.instances.Background;if(b){b.view.layer.removeClassName(e)}}if(e==iAd.TransitionController.VIEW_BUILDS_IN_STATE){if(this.buildInActionListShouldDelayTransition){this.transitionToNextViewController()}}return f};iAP.ViewController.prototype.viewDidLoad=function(){var h,m;for(m in this.outlets){h=this.outlets[m];h.viewController=this;if(h.isViewControllerContainer){this.viewControllerContainers.push(h);h.parentViewControllerViewDidLoad()}}var k=iAP.EventDelegate.viewScriptFunctions[this.configuration.id];for(m in k){h=this.outlets[m];var f=new iAP.EventDelegate(h,h,k[m]);h.userInteractionEnabled=true;f.processUserScript()}if(iAP.Context.IS_DESKTOP){for(m in this.outlets){h=this.outlets[m];if(!h.userInteractionEnabled){h.layer.addClassName(iAd.View.FOCUSED_CSS_CLASS);stylesheet_loop:for(var c=0,n=document.styleSheets.length;c<n;c++){var l=document.styleSheets[c].cssRules;for(var b=0,d=l.length;b<d;b++){try{if(h.layer.webkitMatchesSelector(l[b].selectorText)&&l[b].selectorText.indexOf(iAd.View.FOCUSED_CSS_CLASS)!=-1){h.userInteractionEnabled=true;break stylesheet_loop}}catch(g){}}}h.layer.removeClassName(iAd.View.FOCUSED_CSS_CLASS)}}}this.callSuper();if(this.isInitialViewController()){var a=iAd.ViewController.instances.Background;if(a){a.createAndDispatchEvent(iAd.ViewController.VIEW_DID_LOAD,[["animated",false]])}}this.setPageState(iAP.PageState.pageStateForCurrentDevice)};iAP.ViewController.prototype.viewWillAppear=function(c){var k=this;var h=this.orientation;var a=this.actionListNameByClassName[iAd.TransitionController.VIEW_BUILDS_IN_ACTION_LIST_CLASS];if(a){if(!this.shouldPlayBuildInActionList){var b=this.actionListByName[a];b&&this.enterState(b.cssClassName)}}if(window.iAPDebug!=null){window.iAPDebug.transitioningToViewController(this.configuration.id);if(h!=null&&!iAd.Utils.objectIsInstanceOfClass(this,iAP.LoadingViewController)){var e=iAd.Transaction.defaults.duration/2;setTimeout(function(){window.iAPDebug.rotateToOrientation(h)},e*1000)}}if(this.backgroundLayerVisible){var f=iAd.ViewController.instances.Background;if(f&&!f.__visible){iAd.EventTarget.createAndDispatchEvent.call(f,iAd.ViewController.VIEW_WILL_APPEAR_EVENT,[["animated",false]]);var j=f.view.layer;this.showBackgroundBuildInActionList=true;f.__visible=true;j.style.display="block"}}this.setOrientation(h);window.addEventListener("orientationchange",this,false);for(var d=0,g=this.viewControllerContainers.length;d<g;d++){this.viewControllerContainers[d].parentViewControllerViewWillAppear(c)}this.callSuper(c)};iAP.ViewController.prototype.viewDidAppear=function(e){var m=this;this.callSuper(e);if(this._autoAdvanceToNextViewController){this._idleStartTime=Date.now();if(this._autoAdvanceCondition=="no-activity"){window.addEventListener(iAd.Event.START_EVENT,this,true)}}if(this._shouldPreloadNextViewControllers&&(this.nextViewController||this.viewControllerIDsToPreload)){this.preloadViewControllers()}iAd.Device.addEventListener(iAd.Device.SHAKE_EVENT,this,false);this.loadAdditionalFiles();var k=iAd.RootView.sharedRoot;var l=iAd.RootViewController.sharedRootViewController.navigationController.view;var f,h,c;var j=1;for(f=0,h=this.bottomAnchoredSharedViewIDs.length;f<h;f++){c=iAP.SharedView.instances[this.bottomAnchoredSharedViewIDs[f]];k.insertSubviewAtIndex(c,j++)}k.insertSubviewAtIndex(l,j++);for(f=0,h=this.topAnchoredSharedViewIDs.length;f<h;f++){c=iAP.SharedView.instances[this.topAnchoredSharedViewIDs[f]];k.insertSubviewAtIndex(c,j++)}for(f=0,h=this.viewControllerContainers.length;f<h;f++){this.viewControllerContainers[f].parentViewControllerViewDidAppear(e)}var g=iAd.ViewController.instances.Background;if(g&&this.showBackgroundBuildInActionList){iAd.EventTarget.createAndDispatchEvent.call(g,iAd.ViewController.VIEW_DID_APPEAR_EVENT,[["animated",false]]);var b=g.actionListNameByClassName[iAd.TransitionController.VIEW_BUILDS_IN_ACTION_LIST_CLASS];if(b){g.callMethodNameAfterDelay("startActionList",0,b)}this.showBackgroundBuildInActionList=false}if(this.contentView){this.contentView.viewDidAppear()}if(!iAP.Context.IS_IAD_PRODUCER){var d=this.contentView||this.view;var a=iAd.RootView.sharedRoot;a.layer.setAttribute("role","region");a.layer.setAttribute("aria-label",d.layer.getAttribute("ad-name"));a._focusForAX()}};iAP.ViewController.prototype.viewWillDisappear=function(e){var n=this;this.callSuper(e);if(this._autoAdvanceToNextViewController){this.clearAutoAdvanceTimer();window.removeEventListener(iAd.Event.START_EVENT,this,true)}iAd.Device.removeEventListener(iAd.Device.SHAKE_EVENT,this,false);var l=iAd.RootView.sharedRoot;var d=this.transitionController&&this.transitionController.visibleViewController;var f,h,j,c,k={};for(f=0,h=this.topAnchoredSharedViewIDs.length;f<h;f++){j=this.topAnchoredSharedViewIDs[f];if(!d||d.topAnchoredSharedViewIDs.indexOf(j)==-1&&d.bottomAnchoredSharedViewIDs.indexOf(j)==-1){c=iAP.SharedView.instances[j];this.contentView.addSubview(c);k[j]=true}}for(f=this.bottomAnchoredSharedViewIDs.length-1;f>=0;f--){j=this.bottomAnchoredSharedViewIDs[f];if(!d||d.bottomAnchoredSharedViewIDs.indexOf(j)==-1&&d.topAnchoredSharedViewIDs.indexOf(j)==-1){c=iAP.SharedView.instances[j];this.contentView.insertSubviewAtIndex(c,0);k[j]=true}}if(d){var g=iAd.ViewController.instances.Background;if(g&&g.__visible&&d.backgroundLayerVisible==false){iAd.EventTarget.createAndDispatchEvent.call(g,iAd.ViewController.VIEW_WILL_DISAPPEAR_EVENT,[["animated",false]]);var m=g.actionListNameByClassName[iAd.TransitionController.VIEW_BUILDS_OUT_ACTION_LIST_CLASS];if(m){g.callMethodNameAfterDelay("startActionList",0,m)}g.__visible=false;this.hideBackground=true}}for(f=0,h=this.viewControllerContainers.length;f<h;f++){var b=this.viewControllerContainers[f];b.parentViewControllerViewWillDisappear(e,!!k[b.viewControllerId])}if(iAP.AudioButton){var a=iAP.AudioButton.views;for(f=0,h=a.length;f<h;f++){a[f].stop()}}};iAP.ViewController.prototype.viewDidDisappear=function(d){this.view.views.forEach(function(e){e.mouseExited()});this.callSuper(d);for(var a=0,c=this.viewControllerContainers.length;a<c;a++){this.viewControllerContainers[a].parentViewControllerViewDidDisappear(d)}var b=iAd.ViewController.instances.Background;if(b&&this.hideBackground){b.view.layer.style.display="";b.resetAllActionLists();this.hideBackground=false;iAd.EventTarget.createAndDispatchEvent.call(b,iAd.ViewController.VIEW_DID_DISAPPEAR_EVENT,[["animated",false]])}};iAP.ViewController.prototype.actionListDidComplete=function(g,e){this.callSuper.apply(this,arguments);if(iAd.ScrollView){var d,b,a=iAd.ScrollView.views;for(var c=0,f=a.length;c<f;c++){b=a[c];if(b.usesNativeScrolling){d=b.layer;while(d){if(d.style.webkitAnimationName!=""){b.usesNativeScrolling=false}d=d.parentElement}}}}};iAP.ViewController.prototype.loadRequiredFiles=function(){if(window.iAPDebug!=null){var a=this.configuration.requiredFileURIs;var b=a.stylesheets.concat(a.scripts,a.images);b.push(a.contentView)}this.callSuper()};iAP.ViewController.prototype.requiredFilesLoaderDidComplete=function(a){this.callSuper(a);if(this.loadedAllRequiredFiles&&this.becomesReadyToTransitionWhenViewsAreLoaded){this.readyToTransition=true}if(window.editorProxy){editorProxy.didInitializeContentView()}};iAP.ViewController.prototype.loadAdditionalFiles=function(){if(this._didLoadAdditionalFiles||!this.configuration.additionalFileURIs||!this.configuration.additionalFileURIs.images){return}var d=this.configuration.additionalFileURIs.images;for(var b=0,c=d.length;b<c;b++){var a=document.createElement("img");a.src=iAd.Device.HAS_HIDPI_DISPLAY?iAd.Path.appendHiDPISuffixIfAvailable(d[b]):d[b];document.head.appendChild(a)}this._didLoadAdditionalFiles=true};iAP.ViewController.prototype.setOrientation=function(b){var c=false;if(b==iAP.ViewController.ORIENTATION_LANDSCAPE_LEFT||b==iAP.ViewController.ORIENTATION_LANDSCAPE_RIGHT){c=true;this.enterState("ad-landscape")}else{this.exitState("ad-landscape")}if(iAP.Context.IS_SAFARI){iAd.RootView.sharedRoot.setIsLandscape(c)}if(window.ad!=null&&b!=null){if(window.ad.hasOwnProperty("currentSupportedInterfaceOrientations")){var a=ADAd.ADInterfaceOrientationPortrait|ADAd.ADInterfaceOrientationPortraitUpsideDown|ADAd.ADInterfaceOrientationLandscapeLeft|ADAd.ADInterfaceOrientationLandscapeRight;var d=0;switch(b){case iAP.ViewController.ORIENTATION_PORTRAIT:d=ADAd.ADInterfaceOrientationPortrait;case iAP.ViewController.ORIENTATION_PORTRAIT_UPSIDE_DOWN:d=d||ADAd.ADInterfaceOrientationPortraitUpsideDown;if(iAd.Device.IS_IPAD){a=ADAd.ADInterfaceOrientationPortrait|ADAd.ADInterfaceOrientationPortraitUpsideDown}else{a=ADAd.ADInterfaceOrientationPortrait}break;case iAP.ViewController.ORIENTATION_LANDSCAPE_LEFT:d=ADAd.ADInterfaceOrientationLandscapeRight;case iAP.ViewController.ORIENTATION_LANDSCAPE_RIGHT:d=d||ADAd.ADInterfaceOrientationLandscapeLeft;a=ADAd.ADInterfaceOrientationLandscapeLeft|ADAd.ADInterfaceOrientationLandscapeRight;break}if(window.iAPDebug&&a!=d){window.ad.currentSupportedInterfaceOrientations=d;setTimeout(function(){window.ad.currentSupportedInterfaceOrientations=a},0)}else{window.ad.currentSupportedInterfaceOrientations=a}}}};iAP.ViewController.instances=iAd.ViewController.instances;
/**
*
* Copyright © 2009-2016 Apple Inc.  All rights reserved.
*
**/

iAd.Class({name:"iAP.iBooksLoadingViewController",superclass:iAP.ViewController});iAP.iBooksLoadingViewController.VIEW_CONTROLLER_ID="iAP_iBooksLoading";iAP.iBooksLoadingViewController.prototype.init=function(b){var a={becomesBackItemTransition:null,becomesTopItemTransition:null,becomesVisibleTransition:null,bottomAnchoredSharedViewIDs:[],disableLoadingViewController:true,minimumDelayBeforeTransition:0.5,topAnchoredSharedViewIDs:[],transitionDuration:0.5,wasBackItemTransition:null,wasTopItemTransition:null};iAd.Utils.copyPropertiesFromSourceToTarget(a,b.properties);this.callSuper(b)};iAP.iBooksLoadingViewController.prototype.loadView=function(){this.view=new iAd.View();var b=this;var a=iAd.Image.imageForURL("Default.png",true);a.whenLoaded(function(){b.backgroundLoaded(a)})};iAP.iBooksLoadingViewController.prototype.backgroundLoaded=function(b){var a=document.createElement("div");a.addClassName("iap-ibooks-default-loading-image");a.setAttribute("aria-hidden",true);a.appendChild(b.element);this._view.layer.appendChild(a);var d=window.getComputedStyle(document.body);var c=Math.min(parseInt(d.width,10)/b.width,parseInt(d.height,10)/b.height);b.element.style.width=(b.width*c)+"px";b.element.style.height=(b.height*c)+"px"};iAP.iBooksLoadingViewController.prototype.viewDidAppear=function(){this.callSuper();this.transitionController.showLoadingViewController();this.transitionToViewControllerWithID(this.nextViewControllerID);setTimeout(function(){widget.notifyContentIsReady()},0)};iAP.iBooksLoadingViewController.prototype.viewWillDisappear=function(){this.callSuper()};
/**
*
* Copyright © 2009-2016 Apple Inc.  All rights reserved.
*
**/

iAd.Class({name:"iAd.ImageView",superclass:iAd.View,synthesizedProperties:["autoSized","image","highlightedImage","highlighted","imageContentKey","highlightedImageContentKey"],archivedProperties:["autoSized","image","highlightedImage","highlighted"],cssClassName:"ad-image-view",collectionAccessor:"imageViews"});iAd.ImageView.prototype.init=function(a){this._autoSized=true;this._highlighted=false;this._image=null;this._highlightedImage=null;this._imageContentKey=null;this._highlightedImageContentKey=null;this.callSuper(a);this.addEventListener(iAd.View.TOUCH_DOWN_EVENT,this,false);this.addEventListener(iAd.View.TOUCH_DRAG_ENTER_EVENT,this,false);this.addEventListener(iAd.View.TOUCH_DRAG_EXIT_EVENT,this,false);this.addEventListener(iAd.View.ACTIVATE_EVENT,this,false);this.addEventListener(iAd.View.TOUCH_CANCEL_EVENT,this,false)};iAd.ImageView.prototype.layerWasCreated=function(){this._img=this.layer.appendChild(document.createElement("img"))};iAd.ImageView.prototype.setValueForAttribute=function(d,c){switch(c){case"ad-image":case"ad-highlighted-image":var b=this.getLayerCustomAttributeValue("ad-has-hidpi-version");b=b==null||b=="true";var a=this.getLayerCustomAttributeValue("ad-has-ipad-version");a=a=="true";var e=iAd.Image.imageForURL(d,b,a);if(c=="ad-image"){this.image=e}else{this.highlightedImage=e}break;default:this.callSuper(d,c)}};iAd.ImageView.prototype.layerWasInsertedIntoDocument=function(){this.callSuper();this.syncImageToCurrentState()};iAd.ImageView.prototype.setImage=function(a){this._image=a;this.syncImageToCurrentState()};iAd.ImageView.prototype.setHighlightedImage=function(a){this.userInteractionEnabled=(a!=null);this._highlightedImage=a;this.syncImageToCurrentState()};iAd.ImageView.prototype.setImageContentKey=function(a){this._imageContentKey=a;this._updateImageFromContentKey();this._eventListenersForContentChange()};iAd.ImageView.prototype.setHighlightedImageContentKey=function(a){this._higlightedImageContentKey=a;this._updateHighlightedImageFromContentKey();this._eventListenersForContentChange()};iAd.ImageView.prototype.setHighlighted=function(a){if(a==this._highlighted){return}this._highlighted=a;this.syncImageToCurrentState()};iAd.ImageView.prototype.setAutoSized=function(a){if(this._autoSized==a){return}this._autoSized=a;this.syncImageToCurrentState()};iAd.ImageView.prototype._eventListenersForContentChange=function(){if(this._imageContentKey||this._higlightedImageContentKey){iAd.Content.addEventListener(iAd.Content.CONTENT_DID_CHANGE,this)}else{iAd.Content.removeEventListener(iAd.Content.CONTENT_DID_CHANGE,this)}};iAd.ImageView.prototype._updateImageFromContentKey=function(){if(this._imageContentKey){this.image=iAd.Image.imageForContentKey(this._imageContentKey)}};iAd.ImageView.prototype._updateHighlightedImageFromContentKey=function(){if(this._higlightedImageContentKey){this.highlightedImage=iAd.Image.imageForContentKey(this._higlightedImageContentKey)}};iAd.ImageView.prototype.syncImageToCurrentState=function(){var a=(this.highlighted&&this.highlightedImage)?this.highlightedImage:this.image;if(!a){this._img.src="";this._img.style.removeProperty("visibility");return}if(!a.loaded){a.addPropertyObserver("loaded",this,"syncImageToCurrentState");return}this._img.style.visibility="visible";this._img.src=a.element.src;if(this._autoSized){this.size=new iAd.Size(a.width,a.height)}if(iAd.ImageEffects&&this._effect){this._effect.inputImage=this._img;this._effect.render()}};iAd.ImageView.prototype.handleEvent=function(a){if(a.type==iAd.Content.CONTENT_DID_CHANGE){this._updateImageFromContentKey();this._updateHighlightedImageFromContentKey();return}this.callSuper(a);switch(a.type){case iAd.View.TOUCH_DOWN_EVENT:case iAd.View.TOUCH_DRAG_ENTER_EVENT:this.highlighted=true;break;case iAd.View.TOUCH_DRAG_EXIT_EVENT:case iAd.View.ACTIVATE_EVENT:case iAd.View.TOUCH_CANCEL_EVENT:this.highlighted=false;break}};
/**
*
* Copyright © 2009-2016 Apple Inc.  All rights reserved.
*
**/

iAd.Utils.replaceMethod(iAd.ImageView,"init",function(){this._usesBackgroundImage=false;this._imageRepeat="no-repeat";this._imagePosition="left top";this._imageSize="100% 100%";this.callOriginal.apply(this,arguments)});iAd.ImageView.prototype.setHidden=function(a){this.callSuper(a);this.syncImageToCurrentState()};iAd.ImageView.prototype.layerWasInsertedIntoDocument=function(){this.callSuper();if(this.usesBackgroundImage||iAd.ImageView.usesBackgroundImage){return}this.callMethodNameAfterDelay("syncImageToCurrentState",0)};iAd.Utils.replaceMethod(iAd.ImageView,"layerWasCreated",function(){if(!this.layer.getAttribute("role")){this.layer.setAttribute("role","img")}this.callOriginal.apply(this,arguments);this._img.setAttribute("aria-hidden",true)});(function(){iAd.ImageView.prototype.setUsesBackgroundImage=function(b){if(this._usesBackgroundImage==b){return}this._usesBackgroundImage=b;this.syncImageToCurrentState()};iAd.ImageView.prototype.setImagePosition=function(b){if(this._imagePosition==b){return}this._imagePosition=b;this.syncImageToCurrentState()};iAd.ImageView.prototype.setImageSize=function(b){if(this._imageSize==b){return}this._imageSize=b;this.syncImageToCurrentState()};iAd.ImageView.prototype.setImageRepeat=function(b){if(this._imageRepeat==b){return}this._imageRepeat=b;this.syncImageToCurrentState()};iAd.ImageView.prototype.setSize=function(b){if(this._size.equals(b)){return}this.callSuper(b);if(!this._usingFallback){this.syncImageToCurrentState()}};iAd.ImageView.prototype.clearBackgroundProperties=function(){this.layer.style.backgroundImage="";this.layer.style.backgroundPosition="";this.layer.style.backgroundRepeat="";this.layer.style.backgroundSize="";this._backgroundImageSrc=null};iAd.Class.processMethod(iAd.ImageView,"syncImageToCurrentState");var a=iAd.ImageView.prototype.syncImageToCurrentState;iAd.ImageView.prototype.syncImageToCurrentState=function(){a.apply(this,arguments);var n=(this.highlighted&&this.highlightedImage)?this.highlightedImage:this.image;if(!n){this.clearBackgroundProperties();this.layer.addClassName("ad-placeholder-background");this._img.style.display="none";return}else{if(n.loaded){this._img.style.visibility="inherit"}}this.layer.removeClassName("ad-placeholder-background");if(this.needsToFallback()){this._img.style.display="none";this.layer.style.overflow="visible";this.layer.style.backgroundImage="url("+n.element.src+")";this._backgroundImageSrc=n.element.src;this.layer.style.backgroundSize=this._imageSize;this.layer.style.backgroundPosition=this._imagePosition;this.layer.style.backgroundRepeat=this._imageRepeat;this._usingFallback=true}else{if(this._img.style.display=="none"){this._img.style.display="block";this.layer.style.overflow="hidden";this.clearBackgroundProperties()}var i=this._imageSize,g=this._img;if(i=="contain"||i=="cover"){var c=window.getComputedStyle(this.layer),k=this.widthFromComputedStyle(c),o=this.heightFromComputedStyle(c),p=n.width,b=n.height,d=k/p,j=o/b,f=(i=="contain"?Math.min(d,j):Math.max(d,j)),e=Math.max(1,p*f),l=Math.max(1,b*f);g.style.width=e+"px";g.style.height=l+"px"}else{var h=i.split(" ");if(h.length>=1){g.style.width=h[0];g.style.height=h[1]||h[0]}}var m=this._imagePosition.split(" ");if(m[0]=="left"||m[0]=="center"||m[0]=="right"||m[1]=="top"||m[1]=="center"||m[1]=="bottom"){this.layer.addClassName("ad-uses-flex-box");if(!this._positionMap){this._positionMap={left:"start",right:"end",top:"start",bottom:"end",center:"center"}}this.layer.style.webkitBoxPack=this._positionMap[m[0]];this.layer.style.webkitBoxAlign=this._positionMap[m[1]]}else{this.layer.removeClassName("ad-uses-flex-box");g.style.left=m[0];g.style.top=m[1]}this._usingFallback=false}};iAd.ImageView.needsToFallbackMatch=/(center|right|bottom)/;iAd.ImageView.prototype.needsToFallback=function(){if(this.usesBackgroundImage||iAd.ImageView.usesBackgroundImage){return true}if(iAP.Context.IS_WINDOWS){return true}if(this._imageRepeat!="no-repeat"){return true}var b=this._imageSize;if(b=="contain"||b=="100% 100%"){return false}if(this._imagePosition.match(iAd.ImageView.needsToFallbackMatch)){var c=this.getSizeData();if(b=="cover"){if(Math.abs(c.viewWidth/c.viewHeight-c.imageWidth/c.imageHeight)>0.01){return true}}else{if(c.imageWidth>c.viewWidth||c.imageHeight>c.viewHeight){return true}}}return false};iAd.ImageView.prototype.getSizeData=function(){var c=(this.highlighted&&this.highlightedImage)?this.highlightedImage:this.image,b=window.getComputedStyle(this.layer);return{imageWidth:c.width,imageHeight:c.height,viewWidth:this.widthFromComputedStyle(b),viewHeight:this.heightFromComputedStyle(b)}};iAd.ImageView.prototype.widthFromComputedStyle=function(b){var c;if(b.width.indexOf("%")!=-1){var d=0;if(this.superview){d=this.superview.size.width}else{if(this.layer.parentNode){d=this.layer.parentNode.offsetWidth}}c=parseFloat(b.width)/100*d}else{c=parseInt(b.width,10)}return c};iAd.ImageView.prototype.heightFromComputedStyle=function(b){var d;if(b.height.indexOf("%")!=-1){var c=0;if(this.superview){c=this.superview.size.height}else{if(this.layer.parentNode){c=this.layer.parentNode.offsetHeight}}d=parseFloat(b.height)/100*c}else{d=parseInt(b.height,10)}return d};iAd.Class.synthesizeProperty(iAd.ImageView.prototype,"usesBackgroundImage");iAd.Class.synthesizeProperty(iAd.ImageView.prototype,"imagePosition");iAd.Class.synthesizeProperty(iAd.ImageView.prototype,"imageSize");iAd.Class.synthesizeProperty(iAd.ImageView.prototype,"imageRepeat");iAd.ImageView.archivedProperties.push("usesBackgroundImage");iAd.ImageView.archivedProperties.push("imagePosition");iAd.ImageView.archivedProperties.push("imageSize");iAd.ImageView.archivedProperties.push("imageRepeat")}());iAd.Utils.replaceMethod(iAd.ImageView,"setImage",function(){var a=this.layer.getAttribute("aria-label");var b=this._image?iAd.Path.lastPathComponent(this._image.url):"";this.callOriginal.apply(this,arguments);if(!a||a==b){if(this._image){this.layer.setAttribute("aria-label",iAd.Path.lastPathComponent(this._image.url))}else{this.layer.removeAttribute("aria-label")}}});
/**
*
* Copyright © 2009-2016 Apple Inc.  All rights reserved.
*
**/

iAd.Class({name:"iAP.MediaAction",superclass:iAd.ScriptAction,synthesizedProperties:["url"]});iAP.MediaAction.prototype.init=function(){this.callSuper.apply(this,arguments);this.analyticsDetails={file:this.getFilename}};iAP.MediaAction.prototype.reset=function(){this.media&&this.media.stop()};iAP.MediaAction.prototype.getFilename=function(){return this.media?this.media.getFilename():""};iAP.MediaAction.prototype.summaryText=function(){if(this.url){return iAd.Path.lastPathComponent(this.url)}else{return"None"}};
/**
*
* Copyright © 2009-2016 Apple Inc.  All rights reserved.
*
**/

iAd.Class({name:"iAd.Media",mixins:[iAd.EventTarget,iAd.EventTriage],synthesizedProperties:["url","element","time","duration","percentLoaded","bufferedStartTime","bufferedEndTime","canPlay","canPlayThrough","seeking","renderable","loop","error","playbackState","loadState","loadReady"],archivedProperties:["url"]});iAd.Media.PLAYBACK_WILL_START="mediaPlaybackWillStart";iAd.Media.PLAYBACK_DID_START="mediaPlaybackDidStart";iAd.Media.PLAYBACK_DID_PAUSE="mediaPlaybackDidPause";iAd.Media.PLAYBACK_DID_BEGIN_WAITING="mediaPlaybackDidBeginWaiting";iAd.Media.PLAYBACK_DID_END_WAITING="mediaPlaybackDidEndWaiting";iAd.Media.PLAYBACK_DID_END="mediaPlaybackDidEnd";iAd.Media.WILL_SEEK="mediaWillSeek";iAd.Media.DID_SEEK="mediaDidSeek";iAd.Media.DID_UPDATE_TIME="mediaDidUpdateTime";iAd.Media.LOAD_WILL_START="mediaLoadWillStart";iAd.Media.LOAD_DID_START="mediaLoadDidStart";iAd.Media.LOAD_DID_PROGRESS="mediaLoadDidProgress";iAd.Media.LOAD_DATA_AVAILABLE="mediaLoadDataAvailable";iAd.Media.LOAD_DID_STALL="mediaLoadDidStall";iAd.Media.LOAD_DID_SUSPEND="mediaLoadDidSuspend";iAd.Media.LOAD_DID_RESUME="mediaLoadDidResume";iAd.Media.LOAD_DID_FAIL="mediaLoadDidFail";iAd.Media.LOAD_IS_READY="mediaLoadIsReady";iAd.Media.LOAD_CAN_PLAY="mediaLoadCanPlay";iAd.Media.LOAD_CAN_PLAY_THROUGH="mediaLoadCanPlayThrough";iAd.Media.WILL_UNLOAD="mediaWillUnload";iAd.Media.DID_UNLOAD="mediaDidUnload";iAd.Media.PLAYBACK_STATE_DID_UPDATE="mediaPlaybackStateDidUpdate";iAd.Media.PLAYBACK_STATE_NONE=0;iAd.Media.PLAYBACK_STATE_WAITING=1;iAd.Media.PLAYBACK_STATE_PLAYING=2;iAd.Media.PLAYBACK_STATE_PAUSED=3;iAd.Media.PLAYBACK_STATE_ENDED=4;iAd.Media.LOAD_STATE_DID_UPDATE="mediaLoadStateDidUpdate";iAd.Media.LOAD_STATE_NONE=0;iAd.Media.LOAD_STATE_LOADING=1;iAd.Media.LOAD_STATE_STALLED=2;iAd.Media.LOAD_STATE_SUSPENDED=3;iAd.Media.LOAD_STATE_FAILED=4;iAd.Media.READY_STATE_NOTHING=0;iAd.Media.READY_STATE_METADATA=1;iAd.Media.READY_STATE_CURRENT_DATA=2;iAd.Media.READY_STATE_FUTURE_DATA=3;iAd.Media.READY_STATE_ENOUGH_DATA=4;iAd.Media.HTML_MEDIA_EVENTS=["emptied","loadstart","durationchange","loadedmetadata","loadeddata","canplay","canplaythrough","progress","play","waiting","playing","timeupdate","pause","seeking","seeked","stalled","suspend","ended","abort","error"];iAd.Media.prototype.init=function(a){this.callSuper();this._playbackState=iAd.Media.PLAYBACK_STATE_NONE;this._loadState=iAd.Media.LOAD_STATE_NONE;this.reset();if(!this._loadReadyStrategy){this._loadReadyStrategy=iAd.Media.defaultLoadReadyStrategy}this.eventTarget=document;this._url=a;this.resolvedURL=this.urlStrategy(a)};iAd.Media.prototype.getDuration=function(){return this._element?this._element.duration:NaN};iAd.Media.prototype.getBufferedStartTime=function(){var a=this.closestBufferedIndex();return(a>=0)?this._element.buffered.start(a):0};iAd.Media.prototype.getBufferedEndTime=function(){var a=this.closestBufferedIndex();return(a>=0)?this._element.buffered.end(a):0};iAd.Media.prototype.getPercentLoaded=function(){return this.duration?(this.bufferedEndTime-this.bufferedStartTime)/this.duration:0};iAd.Media.prototype.closestBufferedIndex=function(){if(!this._element){return -1}var e=this.time,d=-1,b=this.element.buffered;for(var a=0,c=b.length;a<c;a++){if(b.start(a)<=e&&b.end(a)>=e){return a}}return d};iAd.Media.prototype.setLoop=function(a){this._loop=a;if(this._element){this._element.loop=a}};iAd.Media.prototype.getCanPlay=function(){if(!this._element){return false}return(this._element.readyState>=iAd.Media.READY_STATE_FUTURE_DATA)};iAd.Media.prototype.getCanPlayThrough=function(){if(!this._element){return false}return(this._element.readyState>=iAd.Media.READY_STATE_ENOUGH_DATA)};iAd.Media.prototype.getSeeking=function(){return(this._element&&this._element.seeking)};iAd.Media.prototype.getError=function(){var a=this._element;return(a&&a.error)?a.error.code:null};iAd.Media.prototype.getRenderable=function(){if(!this._element){return false}return(this._element.readyState>=iAd.Media.READY_STATE_CURRENT_DATA)};iAd.Media.prototype.setUrl=function(a){};iAd.Media.prototype.setElement=function(a){};iAd.Media.prototype.setPlaybackState=function(a){};iAd.Media.prototype.setLoadState=function(a){};iAd.Media.prototype.setLoadReady=function(a){};iAd.Media.prototype.setTime=function(a){};iAd.Media.prototype.load=function(){if((this._loadState!=iAd.Media.LOAD_STATE_NONE&&this._loadState!=iAd.Media.LOAD_STATE_FAILED)||this._attemptingLoad){return false}this.element.setAttribute("src",this.resolvedURL);this.element.loop=this._loop;this.addMediaEventListeners();this.dispatchMediaNotification(iAd.Media.LOAD_WILL_START);this._attemptingLoad=true;this.loadElement();if(iAd.Media.preloadedMedia&&iAd.Media.preloadedMedia.url!=this.url){iAd.Media.preloadedMedia=null}return true};iAd.Media.prototype.unload=function(){if(this._loadState==iAd.Media.LOAD_STATE_NONE){return}this.dispatchMediaNotification(iAd.Media.WILL_UNLOAD);this.removeMediaEventListeners();this.reset();this.unloadElement();this.dispatchMediaNotification(iAd.Media.DID_UNLOAD)};iAd.Media.prototype.play=function(){if(this._playbackState==iAd.Media.PLAYBACK_STATE_PLAYING||this._playbackState==iAd.Media.PLAYBACK_STATE_WAITING){if(this._targetPlaybackState!=iAd.Media.PLAYBACK_STATE_PAUSED){return false}}if(this._loadState==iAd.Media.LOAD_STATE_NONE||this._loadState==iAd.Media.LOAD_STATE_FAILED){this.load()}if(this._playbackState!=iAd.Media.PLAYBACK_STATE_PLAYING&&this._targetPlaybackState!=iAd.Media.PLAYBACK_STATE_PLAYING){this.dispatchMediaNotification(iAd.Media.PLAYBACK_WILL_START)}this.playElement();return true};iAd.Media.prototype.pause=function(){if(this._playbackState==iAd.Media.PLAYBACK_STATE_PAUSED){return false}this.pauseElement();return true};iAd.Media.prototype.stop=function(){if(this._playbackState==iAd.Media.PLAYBACK_STATE_PAUSED&&this.time==0){return false}this.pause();this.seekToTime(0);return true};iAd.Media.prototype.seekToTime=function(a){if(!this.canSeekToTime(a)){return false}this.seekElement(a);if(this.playbackState==iAd.Media.PLAYBACK_STATE_ENDED){this.enterPlaybackState(iAd.Media.PLAYBACK_STATE_PAUSED)}return true};iAd.Media.prototype.canSeekToTime=function(d){if(!this._element){return false}var c=this._element.seekable;for(var a=0,b=c.length;a<b;a++){if(c.start(a)<=d&&c.end(a)>=d){return true}}return false};iAd.Media.prototype.isTimeInBufferedRange=function(a){return(this.bufferedStartTime<=a&&this.bufferedEndTime>=a)};iAd.Media.prototype.loadElement=function(){this.element.load()};iAd.Media.prototype.unloadElement=function(){this.element.setAttribute("src","null")};iAd.Media.prototype.playElement=function(){this._targetPlaybackState=iAd.Media.PLAYBACK_STATE_PLAYING;this.element.play()};iAd.Media.prototype.pauseElement=function(){this._targetPlaybackState=iAd.Media.PLAYBACK_STATE_PAUSED;this.element.pause()};iAd.Media.prototype.seekElement=function(a){this.element.currentTime=a};iAd.Media.prototype.reset=function(){this.enterPlaybackState(iAd.Media.PLAYBACK_STATE_NONE);this.enterLoadState(iAd.Media.LOAD_STATE_NONE);this._loadReady=false;this._attemptingLoad=false;this._time=0};iAd.Media.prototype.executeLoadReadyStrategy=function(a){if(!this._loadReady&&this.loadReadyStrategy(this,a)){this._loadReady=true;this.dispatchMediaNotification(iAd.Media.LOAD_IS_READY)}};iAd.Media.prototype.prepareForCompetition=function(){};iAd.Media.prototype.enterPlaybackState=function(b){if(b==iAd.Media.PLAYBACK_STATE_PLAYING||b==iAd.Media.PLAYBACK_STATE_PAUSED){delete this._targetPlaybackState}if(this._playbackState==b){return}var a=this._playbackState;this._playbackState=b;this.dispatchMediaNotification(iAd.Media.PLAYBACK_STATE_DID_UPDATE);if(a==iAd.Media.PLAYBACK_STATE_WAITING){this.dispatchMediaNotification(iAd.Media.PLAYBACK_DID_END_WAITING)}switch(b){case iAd.Media.PLAYBACK_STATE_PLAYING:this.dispatchMediaNotification(iAd.Media.PLAYBACK_DID_START);break;case iAd.Media.PLAYBACK_STATE_PAUSED:this.dispatchMediaNotification(iAd.Media.PLAYBACK_DID_PAUSE);break;case iAd.Media.PLAYBACK_STATE_WAITING:this.dispatchMediaNotification(iAd.Media.PLAYBACK_DID_BEGIN_WAITING);break;case iAd.Media.PLAYBACK_STATE_ENDED:this.dispatchMediaNotification(iAd.Media.PLAYBACK_DID_END);break}};iAd.Media.prototype.enterLoadState=function(b){if(this._loadState==b){return}this.clearLoadStateTimeout();this.clearTimeupdateWatchdogTimeout();var a=this._loadState;this._loadState=b;this.dispatchMediaNotification(iAd.Media.LOAD_STATE_DID_UPDATE);this._attemptingLoad=false;switch(b){case iAd.Media.LOAD_STATE_LOADING:this.dispatchMediaNotification(a?iAd.Media.LOAD_DID_RESUME:iAd.Media.LOAD_DID_START);break;case iAd.Media.LOAD_STATE_STALLED:this.dispatchMediaNotification(iAd.Media.LOAD_DID_STALL);if(this._playbackState==iAd.Media.PLAYBACK_STATE_PLAYING){this.beginTimeupdateWatchdogTimeout()}break;case iAd.Media.LOAD_STATE_SUSPENDED:this.dispatchMediaNotification(iAd.Media.LOAD_DID_SUSPEND);break;case iAd.Media.LOAD_STATE_FAILED:this.dispatchMediaNotification(iAd.Media.LOAD_DID_FAIL,[["errorCode",this.error]]);break}};iAd.Media.prototype.elementWasRemovedFromDocument=function(){};iAd.Media.prototype.elementWasInsertedIntoDocument=function(){};iAd.Media.prototype.addMediaEventListeners=function(){var c=iAd.Media.HTML_MEDIA_EVENTS,b=this.element;for(var a=0,d=c.length;a<d;a++){b.addEventListener(c[a],this)}};iAd.Media.prototype.removeMediaEventListeners=function(){var c=iAd.Media.HTML_MEDIA_EVENTS,b=this.element;for(var a=0,d=c.length;a<d;a++){b.removeEventListener(c[a],this)}};iAd.Media.prototype.dispatchMediaNotification=function(a,b){this.notifyDelegate(a,iAd.Media,b);this.notifyDelegate(a,this._mediaPlayer,b);this.dispatchNotification(a,this.delegate,b)};iAd.Media.prototype.processDelegateArguments=function(b){var a=[this];if(b){a=a.concat(b.map(function(c){return c[1]}))}return a};iAd.Media.prototype.handlePlay=function(a){if(this._targetPlaybackState!=iAd.Media.PLAYBACK_STATE_PLAYING){this._targetPlaybackState=iAd.Media.PLAYBACK_STATE_PLAYING;this.dispatchMediaNotification(iAd.Media.PLAYBACK_WILL_START)}};iAd.Media.prototype.handlePlaying=function(a){this.enterPlaybackState(iAd.Media.PLAYBACK_STATE_PLAYING)};iAd.Media.prototype.handlePause=function(a){if(this.playbackState!=iAd.Media.PLAYBACK_STATE_ENDED&&!this._element.ended){this.enterPlaybackState(iAd.Media.PLAYBACK_STATE_PAUSED)}};iAd.Media.prototype.handleWaiting=function(a){this.enterPlaybackState(iAd.Media.PLAYBACK_STATE_WAITING)};iAd.Media.prototype.handleSeeking=function(a){this.dispatchMediaNotification(iAd.Media.WILL_SEEK)};iAd.Media.prototype.handleSeeked=function(a){this.dispatchMediaNotification(iAd.Media.DID_SEEK)};iAd.Media.prototype.handleEnded=function(a){this.pauseElement();this.enterPlaybackState(iAd.Media.PLAYBACK_STATE_ENDED)};iAd.Media.prototype.handleTimeupdate=function(b){var a=this._element.currentTime;this.clearTimeupdateWatchdogTimeout();if(this._time==a){return}this._time=a;this.dispatchMediaNotification(iAd.Media.DID_UPDATE_TIME,[["time",this._time]])};iAd.Media.prototype.handleDurationchange=function(a){this.notifyPropertyChange("duration");this.enterLoadState(iAd.Media.LOAD_STATE_LOADING)};iAd.Media.prototype.handleLoadstart=function(a){this.enterLoadState(iAd.Media.LOAD_STATE_LOADING)};iAd.Media.prototype.handleLoadedmetadata=function(a){this.enterLoadState(iAd.Media.LOAD_STATE_LOADING)};iAd.Media.prototype.handleLoadeddata=function(a){this.dispatchMediaNotification(iAd.Media.LOAD_DATA_AVAILABLE);this.enterLoadState(iAd.Media.LOAD_STATE_LOADING);this.notifyPropertyChange("renderable")};iAd.Media.prototype.handleProgress=function(a){this.enterLoadState(iAd.Media.LOAD_STATE_LOADING);this.dispatchMediaNotification(iAd.Media.LOAD_DID_PROGRESS,[["percentLoaded",this.percentLoaded]]);this.executeLoadReadyStrategy(a)};iAd.Media.prototype.handleSuspend=function(a){this.beginLoadStateTimeout(iAd.Media.LOAD_STATE_SUSPENDED)};iAd.Media.prototype.handleStalled=function(a){this.beginLoadStateTimeout(iAd.Media.LOAD_STATE_STALLED)};iAd.Media.prototype.handleError=function(a){this.enterLoadState(iAd.Media.LOAD_STATE_FAILED)};iAd.Media.prototype.handleCanplay=function(a){this.dispatchMediaNotification(iAd.Media.LOAD_CAN_PLAY);this.executeLoadReadyStrategy(a)};iAd.Media.prototype.handleCanplaythrough=function(a){this.dispatchMediaNotification(iAd.Media.LOAD_CAN_PLAY_THROUGH);this.executeLoadReadyStrategy(a)};iAd.Media.prototype.handleAbort=function(a){if(this._loadState!=iAd.Media.LOAD_STATE_NONE){this.enterLoadState(iAd.Media.LOAD_STATE_FAILED)}};iAd.Media.prototype.handleEmptied=function(a){this.notifyPropertyChange("renderable");if(this._loadState!=iAd.Media.LOAD_STATE_NONE){this.handleUnloadEvent()}};iAd.Media.prototype.handleUnloadEvent=function(a){this.removeMediaEventListeners();this.reset();this.dispatchMediaNotification(iAd.Media.DID_UNLOAD)};iAd.Media.prototype.beginLoadStateTimeout=function(a){this.clearLoadStateTimeout();this.loadStateTimeout=this.callMethodNameAfterDelay("enterLoadState",0.05,a)};iAd.Media.prototype.clearLoadStateTimeout=function(){if(this.loadStateTimeout){clearTimeout(this.loadStateTimeout);this.loadStateTimeout=null}};iAd.Media.TIMEUPDATE_WATCHDOG_DELAY=0.5;iAd.Media.prototype.beginTimeupdateWatchdogTimeout=function(){this.clearTimeupdateWatchdogTimeout();this.timeupdateWatchdogTimeout=this.callMethodNameAfterDelay("timeupdateWatchdogDidTimeout",iAd.Media.TIMEUPDATE_WATCHDOG_DELAY)};iAd.Media.prototype.clearTimeupdateWatchdogTimeout=function(){if(this.timeupdateWatchdogTimeout){clearTimeout(this.timeupdateWatchdogTimeout);delete this.timeupdateWatchdogTimeout}};iAd.Media.prototype.timeupdateWatchdogDidTimeout=function(){if(this._loadState==iAd.Media.LOAD_STATE_STALLED){delete this.timeupdateWatchdogTimeout;this.pause()}};iAd.Media.defaultLoadReadyStrategy=function(a){return a.canPlayThrough||(!iAd.Device.iOS_VERSION&&a.percentLoaded==1)};iAd.Media.defaultUrlStrategy=function(a){return a};iAd.Media.loadReadyStrategy=iAd.Media.defaultLoadReadyStrategy;iAd.Media.urlStrategy=iAd.Media.defaultUrlStrategy;iAd.Media.prototype.loadReadyStrategy=function(b,a){return iAd.Media.loadReadyStrategy(b,a)};iAd.Media.prototype.urlStrategy=function(a){return iAd.Media.urlStrategy?iAd.Media.urlStrategy(a):a};iAd.Media.mediaTypeForURL=function(d,a){if(iAd.Media.preloadedMedia&&a==iAd.Media.preloadedMedia.url){return iAd.Media.preloadedMedia}var b=this.resolveMediaClass(d);var c=new b(a);return c};iAd.Media.resolveMediaClass=function(a){return a};iAd.Media.activeMedia=[];iAd.Media.mediaPlaybackWillStart=function(a){this.registerActiveMedia(a)};iAd.Media.mediaLoadWillStart=function(a){this.registerActiveMedia(a)};iAd.Media.mediaDidUnload=function(a){this.unregisterActiveMedia(a)};iAd.Media.registerActiveMedia=function(b){var a=this.activeMedia[0];this.unregisterActiveMedia(b);this.activeMedia.unshift(b);if(a&&a!=b){a.prepareForCompetition()}};iAd.Media.unregisterActiveMedia=function(a){iAd.Array.removeObjectFromArray(a,this.activeMedia)};iAd.Media.preloadedMedia=null;
/**
*
* Copyright © 2009-2016 Apple Inc.  All rights reserved.
*
**/

iAd.Media.prototype.getFilename=function(a){return this.url?decodeURIComponent(this.url).replace(/^.*\/|\.[^.]*$/g,""):""};(function(){if(window.widget){widget._pausedMedia=[];var b=widget.pauseAudioVisual;widget.pauseAudioVisual=function(){b.apply(this,arguments);var f,d=iAd.Media.activeMedia;for(var c=0,e=d.length;c<e;c++){f=d[c];if(f.playbackState==iAd.Media.PLAYBACK_STATE_PLAYING){f.pause();widget._pausedMedia.push(f)}}};var a=widget.didEnterWidgetMode;widget.didEnterWidgetMode=function(f){a.apply(this,arguments);if(f=="fullscreen"){var g,c=widget._pausedMedia;for(var d=0,e=c.length;d<e;d++){c[d].play()}widget._pausedMedia=[]}}}})();
/**
*
* Copyright © 2009-2016 Apple Inc.  All rights reserved.
*
**/

iAd.Media.resolveMediaClass=function(a){return this._adapterByClassType[a.displayName]||a};iAd.Media._adapterByClassType={};iAd.Media.registerMediaAdapter=function(d,e){var c=d.displayName;if(!iAd.Device.iOS_VERSION){if(window.iTunes&&e.context=="iTunes"){this._adapterByClassType[c]=e;return true}else{return false}}var a=e.iOSVersion;if(!a||iAd.Device.iOSVersionLessThan(a)){return false}var b=this._adapterByClassType[c];if(!b||iAd.Device.compareiOSVersions(a,b.iOSVersion)>=0){this._adapterByClassType[c]=e;return true}return false};
/**
*
* Copyright © 2009-2016 Apple Inc.  All rights reserved.
*
**/


/**
*
* Copyright © 2009-2016 Apple Inc.  All rights reserved.
*
**/

iAd.Class({name:"iAd.Audio",superclass:iAd.Media});iAd.Audio.prototype.getElement=function(){if(!this._element){this._element=document.createElement("audio")}return this.callSuper()};iAd.Audio.prototype.play=function(){if(iAd.Audio.playEnabled){return this.callSuper()}return false};iAd.Audio.updatePlayEnabled=function(){if(this._playEnabled){return}var c,d=iAd.Media.activeMedia;for(var a=0,b=d.length;a<b;a++){c=d[a];if(c instanceof iAd.Audio&&c.playbackState==iAd.Media.PLAYBACK_STATE_PLAYING){c.pause()}}};Object.defineProperty(iAd.Audio,"playEnabled",{get:function(){return iAd.Audio._playEnabled},set:function(a){if(iAd.Audio._playEnabled==a){return}iAd.Audio._playEnabled=a;iAd.Audio.updatePlayEnabled()}});iAd.Audio.playEnabled=true;iAd.Audio.audioForURL=function(a){return iAd.Media.mediaTypeForURL(iAd.Audio,a)};iAd.Audio.restoreFromArchive=function(a){return this.audioForURL(a.url)};iAd.Audio.prototype.urlStrategy=function(a){return iAd.Audio.urlStrategy?iAd.Audio.urlStrategy(a):this.callSuper(a)};iAd.Audio.prototype.loadReadyStrategy=function(b,a){return iAd.Audio.loadReadyStrategy?iAd.Audio.loadReadyStrategy(b,a):this.callSuper(b,a)};iAd.Audio.loadReadyStrategy=null;iAd.Audio.urlStrategy=null;
/**
*
* Copyright © 2009-2016 Apple Inc.  All rights reserved.
*
**/

iAd.VideoDOMReconstruct={};iAd.VideoDOMReconstruct.elementWasRemovedFromDocument=function(){this.unload(false);this._element=null};iAd.VideoTouchEvents={};iAd.VideoTouchEvents.updateElementAttributes=function(){this.callSuper();if(this._element){this._element.style.webkitTransform=this._showsControls?"none":iAd.CSS.t(0,0)}};iAd.VideoFullscreen={};iAd.VideoFullscreen.enterFullscreen=function(){try{return this.callSuper()}catch(a){iAd.Console.warn("Fullscreen playback is not supported without user interaction.");return false}};iAd.VideoFullscreen.setPlaysInline=function(a){if(!a&&iAd.Device.IS_IPAD){iAd.Console.warn("Fullscreen playback is not supported on iPad.");a=true}this.callSuper(a)};iAd.VideoFullscreenLaunch={};iAd.VideoFullscreenLaunch.handlePlaying=function(){this.callSuper();if(!this.playsInline&&iAd.Device.IS_IPAD){this.enterFullscreen()}};iAd.VideoFullscreenOrientation={};iAd.VideoFullscreenOrientation.handleWebkitbeginfullscreen=function(){this._orientationBeforeEnterFullscreen=iAd.Device.getSupportedOrientations();iAd.Device.setSupportedOrientations([iAd.Device.ORIENTATION_PORTRAIT,iAd.Device.ORIENTATION_PORTRAIT_UPSIDE_DOWN,iAd.Device.ORIENTATION_LANDSCAPE_LEFT,iAd.Device.ORIENTATION_LANDSCAPE_RIGHT]);this.callSuper()};iAd.VideoFullscreenOrientation.handleWebkitendfullscreen=function(){iAd.Device.setSupportedOrientations(this._orientationBeforeEnterFullscreen);this.callSuper()};iAd.MediaResetTimeOnPlaybackDidEnd={};iAd.MediaResetTimeOnPlaybackDidEnd.handleEnded=function(){this.callSuper();if(iAd.Device.iOSVersionLessThan("9.0")){this.seekElement(0)}};iAd.VideoInlineLock={};iAd.VideoInlineLock.setPlaysInline=function(a){if(this.playsInline==a){return}if(this._loadState!=iAd.Media.LOAD_STATE_NONE){iAd.Console.warn('iAd.Video: Adjusting "playsInline" after loading is not supported on this iOS version.');return}this.callSuper(a)};iAd.MediaCompetitionPause={};iAd.MediaCompetitionPause.prepareForCompetition=function(){this.pause();this.callMethodNameAfterDelay("setPausedForCompetition",0)};iAd.MediaCompetitionPause.setPausedForCompetition=function(){this._pausedForCompetition=true};iAd.MediaCompetitionUnload={};iAd.MediaCompetitionUnload.prepareForCompetition=function(){this.unload(true)};iAd.MediaUnloadTearDown={};iAd.MediaUnloadTearDown.unloadElement=function(){this.callSuper();this.tearDownElement()};iAd.MediaUnloadTearDown.handleUnloadEvent=function(){this.callSuper();this.tearDownElement()};iAd.MediaUnloadTearDown.tearDownElement=function(){var a=this.element;if(a.parentNode){a.parentNode.removeChild(a)}this._element=null};iAd.MediaUnloadAndRestoreTime={};iAd.MediaUnloadAndRestoreTime.unload=function(a){if(a&&this._loadState!=iAd.Media.LOAD_STATE_NONE){this._timeWhenUnloaded=this._time}this.callSuper()};iAd.MediaUnloadAndRestoreTime.enterPlaybackState=function(a){delete this.seekTargetTime;this.callSuper(a)};iAd.MediaUnloadAndRestoreTime.handleEmptied=function(a){if(this._loadState!=iAd.Media.LOAD_STATE_NONE){this._timeWhenUnloaded=this._time}var b=(this._targetPlaybackState==iAd.Media.PLAYBACK_STATE_PLAYING);this.callSuper(a);if(b){this.play()}};iAd.MediaUnloadAndRestoreTime.handleProgress=function(a){if(this._timeWhenUnloaded){this.seekToTime(this._timeWhenUnloaded,true)}if(this.seekTargetTime){this.evaluateSeekTime()}this.callSuper(a)};iAd.MediaUnloadAndRestoreTime.seekToTime=function(c,b){if(!b){delete this._timeWhenUnloaded}var a=this.callSuper(c);if(a){this.awaitingSeekedEvent=true;this.seekTargetTime=c}return a};iAd.MediaUnloadAndRestoreTime.getRenderable=function(){return this._timeWhenUnloaded?false:this.callSuper()};iAd.MediaUnloadAndRestoreTime.getTime=function(){return this._timeWhenUnloaded||this.callSuper()};iAd.MediaUnloadAndRestoreTime.handleSeeked=function(a){this.awaitingSeekedEvent=false;if(this._timeWhenUnloaded){this._restoredUnloadedTime=this._timeWhenUnloaded;delete this._timeWhenUnloaded}var b=this._time;if(this.seekTargetTime){this.callMethodNameAfterDelay("evaluateSeekTime",0)}else{this.callSuper(a)}};iAd.MediaUnloadAndRestoreTime.handleTimeupdate=function(a){if(this.seekTargetTime){if(iAd.Media.activeMedia[0]!=this){this.notifyDidSeek()}else{if(!this._element.seeking){this.callMethodNameAfterDelay("evaluateSeekTime",0)}}}var b=this._pausedForCompetition;if(b){delete this._pausedForCompetition}if(b&&this._element.currentTime==0){return}if(!this._timeWhenUnloaded){this.callSuper(a)}if(this._time>=this._restoredUnloadedTime){delete this._restoredUnloadedTime;this.callMethodNameAfterDelay("notifyPropertyChange",0,"renderable")}};iAd.MediaUnloadAndRestoreTime.evaluateSeekTime=function(){if(!this.seeking||this.awaitingSeekedEvent){return}var a=this.isTimeInBufferedRange(this._time);if(this.isTimeInBufferedRange(this._time)){this.notifyDidSeek()}};iAd.MediaUnloadAndRestoreTime.getSeeking=function(){return(this.seekTargetTime!=undefined)};iAd.MediaUnloadAndRestoreTime.notifyDidSeek=function(){if(!this.seeking){return}delete this.seekTargetTime;this.dispatchMediaNotification(iAd.Media.DID_SEEK)};iAd.MediaForceLoad={};iAd.MediaForceLoad.loadElement=function(){var a=this.element;a.load();this.ignorePlayEvent=true;this.ignorePauseEvent=true;a.play();a.pause()};iAd.MediaForceLoad.handlePlay=function(a){if(this.ignorePlayEvent){this.ignorePlayEvent=false;return}this.callSuper(a)};iAd.MediaForceLoad.handlePause=function(a){if(this.ignorePauseEvent){this.ignorePauseEvent=false;return}this.callSuper(a)};iAd.MediaForceLoad.handleWaiting=function(a){if(this.ignorePlayEvent||this.ignorePauseEvent){return}this.callSuper(a)};iAd.MediaLoop={};iAd.MediaLoop.handleEnded=function(a){if(this._adapterLoop){this.playElement();return}this.callSuper(a)};iAd.MediaLoop.setLoop=function(a){this._adapterLoop=a};iAd.MediaLoop.getLoop=function(){return this._adapterLoop};
/**
*
* Copyright © 2009-2016 Apple Inc.  All rights reserved.
*
**/

iAd.Class({name:"iAd.Audio_7_0",superclass:iAd.Audio,iOSVersion:"7.0"});iAd.Media.registerMediaAdapter(iAd.Audio,iAd.Audio_7_0);iAd.Class({name:"iAd.Audio_5_0",superclass:iAd.Audio,iOSVersion:"5.0",mixins:[iAd.MediaCompetitionPause]});iAd.Media.registerMediaAdapter(iAd.Audio,iAd.Audio_5_0);iAd.Class({name:"iAd.Audio_4_3",superclass:iAd.Audio,iOSVersion:"4.3",mixins:[iAd.MediaCompetitionUnload,iAd.MediaLoop]});iAd.Media.registerMediaAdapter(iAd.Audio,iAd.Audio_4_3);iAd.Class({name:"iAd.Audio_4_2",superclass:iAd.Audio,iOSVersion:"4.2",mixins:[iAd.MediaCompetitionUnload,iAd.MediaForceLoad,iAd.MediaLoop]});iAd.Media.registerMediaAdapter(iAd.Audio,iAd.Audio_4_2);
/**
*
* Copyright © 2009-2016 Apple Inc.  All rights reserved.
*
**/

iAd.Class({name:"iAP.AudioAction",superclass:iAP.MediaAction,synthesizedProperties:["playsInLCD"]});iAP.AudioAction.prototype.setPlaysInLCD=function(a){if(typeof a==="string"&&a.toLowerCase()==="false"){this._playsInLCD=false}else{this._playsInLCD=!!a}};iAP.AudioAction.prototype.start=function(){if(this.url){var a=this.media=iAd.Audio.audioForURL(this.url);a.delegate=this;a.playsInLCD=this.playsInLCD;a.play()}else{this.end()}};iAP.AudioAction.prototype.mediaPlaybackDidEnd=function(a){this.callSuper(a);this.end()};
/**
*
* Copyright © 2009-2016 Apple Inc.  All rights reserved.
*
**/

iAd.Class({name:"iAd.MediaPlayer",superclass:iAd.View,synthesizedProperties:["media","loop"],cssClassName:"ad-media-player"});iAd.MediaPlayer.PLAYBACK_DID_START="mediaPlaybackDidStart";iAd.MediaPlayer.PLAYBACK_DID_PAUSE="mediaPlaybackDidPause";iAd.MediaPlayer.PLAYBACK_DID_BEGIN_WAITING="mediaPlaybackDidBeginWaiting";iAd.MediaPlayer.PLAYBACK_DID_END_WAITING="mediaPlaybackDidEndWaiting";iAd.MediaPlayer.PLAYBACK_DID_END="mediaPlaybackDidEnd";iAd.MediaPlayer.DID_UPDATE_TIME="mediaDidUpdateTime";iAd.MediaPlayer.PLAYING_STATE="ad-media-playing";iAd.MediaPlayer.PAUSED_STATE="ad-media-paused";iAd.MediaPlayer.WAITING_STATE="ad-media-waiting";iAd.MediaPlayer.ENDED_STATE="ad-media-ended";iAd.MediaPlayer.prototype.init=function(a){this._loop=false;this.callSuper(a);this.delegate=null;this.playbackState=null};iAd.MediaPlayer.prototype.getMediaAttributeName=function(){return null};iAd.MediaPlayer.prototype.getMediaClassType=function(){return null};iAd.MediaPlayer.prototype.readPropertiesFromLayerAttributes=function(a){this.callSuper(a);var b=a[this.getMediaAttributeName()];if(b){this.media=b}};iAd.MediaPlayer.prototype.setValueForAttribute=function(b,a){if(a==this.getMediaAttributeName()){return}this.callSuper(b,a)};iAd.MediaPlayer.prototype.play=function(){if(this._media){this.registerMedia(this._media);return this._media.play()}return false};iAd.MediaPlayer.prototype.pause=function(){return(this._media&&this._media._mediaPlayer==this)?this._media.pause():false};iAd.MediaPlayer.prototype.stop=function(){return(this._media&&this._media._mediaPlayer==this)?this._media.stop():false};iAd.MediaPlayer.prototype.seekToTime=function(a){return(this._media&&this._media._mediaPlayer==this)?this._media.seekToTime(a):false};iAd.MediaPlayer.prototype.togglePlayback=function(){if(this._media==null){return false}return this.isPlaying()?this.pause():this.play()};iAd.MediaPlayer.prototype.setMedia=function(a){if(iAd.Utils.objectIsString(a)){a=iAd.Media.mediaTypeForURL(this.getMediaClassType(),a)}if(this._media==a){return}if(this._media){this.unregisterMedia(this._media)}this._media=a;if(a==null){return}if(a.playbackState==iAd.Media.PLAYBACK_STATE_PLAYING){this.registerMedia(a)}};iAd.MediaPlayer.prototype.setLoop=function(a){this._loop=a;this.syncMediaProperties()};iAd.MediaPlayer.prototype.syncMediaProperties=function(){if(!this._media){return}this._media.loop=this._loop};iAd.MediaPlayer.prototype.registerMedia=function(a){if(a._mediaPlayer==this){return false}var b=a._mediaPlayer;if(b){b.unregisterMedia(a)}a._mediaPlayer=this;this.syncMediaProperties();return true};iAd.MediaPlayer.prototype.unregisterMedia=function(a){if(a._mediaPlayer!=this){return false}a._mediaPlayer=null;a.pause();return true};iAd.MediaPlayer.prototype.enterPlaybackState=function(a){if(this.playbackState){this.layer.removeClassName(this.playbackState)}this.playbackState=a;if(a){this.layer.addClassName(a)}};iAd.MediaPlayer.prototype.isPlaying=function(){return(this._media&&this._media._mediaPlayer==this)?(this._media.playbackState==iAd.Media.PLAYBACK_STATE_PLAYING):false};iAd.MediaPlayer.prototype.isPaused=function(){return(this._media&&this._media._mediaPlayer==this)?(this._media.playbackState==iAd.Media.PLAYBACK_STATE_PAUSED):false};iAd.MediaPlayer.prototype.isWaiting=function(){return(this._media&&this._media._mediaPlayer==this)?(this._media.playbackState==iAd.Media.PLAYBACK_STATE_WAITING||this._media._targetPlaybackState==iAd.Media.PLAYBACK_STATE_PLAYING):false};iAd.MediaPlayer.prototype.mediaPlaybackDidStart=function(a){this.dispatchNotification(iAd.MediaPlayer.PLAYBACK_DID_START,this.delegate);this.enterPlaybackState(iAd.MediaPlayer.PLAYING_STATE)};iAd.MediaPlayer.prototype.mediaPlaybackDidPause=function(a){this.dispatchNotification(iAd.MediaPlayer.PLAYBACK_DID_PAUSE,this.delegate);this.enterPlaybackState(iAd.MediaPlayer.PAUSED_STATE)};iAd.MediaPlayer.prototype.mediaPlaybackDidEnd=function(a){this.dispatchNotification(iAd.MediaPlayer.PLAYBACK_DID_END,this.delegate);this.enterPlaybackState(iAd.MediaPlayer.ENDED_STATE)};iAd.MediaPlayer.prototype.mediaPlaybackDidBeginWaiting=function(a){this.dispatchNotification(iAd.MediaPlayer.PLAYBACK_DID_BEGIN_WAITING,this.delegate);this.enterPlaybackState(iAd.MediaPlayer.WAITING_STATE)};iAd.MediaPlayer.prototype.mediaPlaybackDidEndWaiting=function(a){this.dispatchNotification(iAd.MediaPlayer.PLAYBACK_DID_END_WAITING,this.delegate)};iAd.MediaPlayer.prototype.mediaDidUpdateTime=function(b,a){this.dispatchNotification(iAd.MediaPlayer.DID_UPDATE_TIME,this.delegate,[["time",a]])};iAd.MediaPlayer.prototype.mediaDidUnload=function(a){this.enterPlaybackState(null)};
/**
*
* Copyright © 2009-2016 Apple Inc.  All rights reserved.
*
**/

iAd.MediaPlayer.prototype.getFilename=function(a){return this.media?this.media.getFilename():""};iAd.Utils.replaceMethod(iAd.MediaPlayer,"init",function(){this.callOriginal.apply(this,arguments);this.analyticsDetails={file:this.getFilename}});
/**
*
* Copyright © 2009-2016 Apple Inc.  All rights reserved.
*
**/

iAd.Class({name:"iAd.AudioPlayer",superclass:iAd.MediaPlayer,synthesizedProperties:["audio"],cssClassName:"ad-audio-player",collectionAccessor:"audioPlayers"});iAd.AudioPlayer.prototype.getMediaAttributeName=function(){return"ad-audio"};iAd.AudioPlayer.prototype.getMediaClassType=function(){return iAd.Audio};iAd.AudioPlayer.prototype.setAudio=function(a){this.media=a};iAd.AudioPlayer.prototype.getAudio=function(){return this.media};
/**
*
* Copyright © 2009-2016 Apple Inc.  All rights reserved.
*
**/

iAd.Class.synthesizeProperty(iAd.AudioPlayer.prototype,"playsInLCD");iAd.Utils.replaceMethod(iAd.MediaPlayer,"init",function(){this._playsInLCD=false;this.callOriginal.apply(this,arguments)});iAd.AudioPlayer.prototype.propertyNameForAttribute=function(a){if(a.substr(iAd.Element.ATTRIBUTE_PREFIX.length)=="plays-in-lcd"){return"playsInLCD"}else{return this.callSuper.apply(this,arguments)}};iAd.AudioPlayer.prototype.attributeNameForProperty=function(a){if(a=="playsInLCD"){return iAd.Element.ATTRIBUTE_PREFIX+"plays-in-lcd"}else{return this.callSuper.apply(this,arguments)}};iAd.AudioPlayer.prototype.setPlaysInLCD=function(a){this._playsInLCD=a;if(this.media){this.media.playsInLCD=a}};iAd.AudioPlayer.prototype.setMedia=function(a){this.callSuper.apply(this,arguments);this.media.playsInLCD=this.playsInLCD};
/**
*
* Copyright © 2009-2016 Apple Inc.  All rights reserved.
*
**/

iAd.Class({name:"iAd.TrackableViewAnalyticsEventHandler",superclass:iAd.AnalyticsEventHandler,synthesizedProperties:["viewController"]});iAd.TrackableViewAnalyticsEventHandler.prototype.init=function(a){this.callSuper(a);this._viewController=null};iAd.TrackableViewAnalyticsEventHandler.prototype.handleTrackableViewDidAppear=function(a){this.viewController=a.eventParameters.viewController};iAd.Utils.setupDisplayNames(iAd.TrackableViewAnalyticsEventHandler,"iAd.TrackableViewAnalyticsEventHandler");
/**
*
* Copyright © 2009-2016 Apple Inc.  All rights reserved.
*
**/

iAd.Class({name:"iAd.MediaPlayerAnalyticsEventHandler",superclass:iAd.TrackableViewAnalyticsEventHandler,synthesizedProperties:["mediaType"]});iAd.MediaPlayerAnalyticsEventHandler.ANALYTICS_NAME_PLAY="play";iAd.MediaPlayerAnalyticsEventHandler.ANALYTICS_NAME_PAUSE="pause";iAd.MediaPlayerAnalyticsEventHandler.ANALYTICS_NAME_END="end";iAd.MediaPlayerAnalyticsEventHandler.ANALYTICS_NAME_TIME_UPDATE="timeupdate";iAd.MediaPlayerAnalyticsEventHandler.prototype.init=function(a){this.callSuper(a);this._resolvedURL="";this._fullMediaPath="";this._mediaType=null;this._analyticsId=null;this._fileName=""};iAd.MediaPlayerAnalyticsEventHandler.prototype.composeAndLogMessage=function(b,c,a){a=a||{};this.callSuper(this.concatenatedStringForArray([this._instance.analyticsId,this._fileName]),b,c,a)};iAd.MediaPlayerAnalyticsEventHandler.prototype.handleTrackableViewDidAppear=function(a){this.callSuper(a);if(this._instance.media&&this._instance.media.resolvedURL){this._updateFileNameAndFullMediaPath(this._instance.media.resolvedURL)}iAd.Analytics.addViewState(this.viewController,this._instance,this._fileName)};iAd.MediaPlayerAnalyticsEventHandler.prototype._updateFileNameAndFullMediaPath=function(a){this._fullMediaPath=iAd.Path.resolveAbsolutePath(a);this._fileName=iAd.Path.basename(a)};iAd.MediaPlayerAnalyticsEventHandler.prototype._resetAnalyticsVariables=function(){if(this._instance.media){this._instance.media._analyticsHandler._resetAnalyticsVariables()}};iAd.Utils.setupDisplayNames(iAd.MediaPlayerAnalyticsEventHandler,"iAd.MediaPlayerAnalyticsEventHandler");
/**
*
* Copyright © 2009-2016 Apple Inc.  All rights reserved.
*
**/

iAd.Class({name:"iAd.AudioPlayerAnalyticsEventHandler",superclass:iAd.MediaPlayerAnalyticsEventHandler});iAd.AudioPlayerAnalyticsEventHandler.ANALYTICS_TYPE_AUDIO="audio";iAd.AudioPlayerAnalyticsEventHandler.TRACKABLE_VIEW_NAME="trackableAudioPlayer";iAd.AudioPlayerAnalyticsEventHandler.prototype.init=function(a){this.callSuper(a);this._mediaType=iAd.AudioPlayerAnalyticsEventHandler.ANALYTICS_TYPE_AUDIO};iAd.AudioPlayerAnalyticsEventHandler.prototype.handleTrackableViewDidAppear=function(a){this.callSuper(a);this.composeAndLogMessage(iAd.AudioPlayerAnalyticsEventHandler.TRACKABLE_VIEW_NAME,iAd.AnalyticsEventHandler.ANALYTICS_TYPE_DEBUG)};iAd.Analytics.registerHandlerForClass(iAd.AudioPlayerAnalyticsEventHandler,iAd.AudioPlayer,true);iAd.Utils.setupDisplayNames(iAd.AudioPlayerAnalyticsEventHandler,"iAd.AudioPlayerAnalyticsEventHandler");
/**
*
* Copyright © 2009-2016 Apple Inc.  All rights reserved.
*
**/

iAd.Number={};iAd.Number.degreesToRadians=function(a){return(a/360)*(Math.PI*2)};iAd.Number.radiansToDegrees=function(a){return(a/(Math.PI*2))*360};iAd.Number.clampValue=function(b,a,c){return Math.min(Math.max(b,a),c)};iAd.Utils.setupDisplayNames(iAd.Number,"iAd.Number");
/**
*
* Copyright © 2009-2016 Apple Inc.  All rights reserved.
*
**/

iAd.Class({name:"iAP.AudioButton",superclass:iAd.AudioPlayer,synthesizedProperties:["buttonColor","highlightedButtonColor","playIconColor","wedgeColor","highlighted"],archivedProperties:["buttonColor","highlightedButtonColor","playIconColor","wedgeColor","highlighted"],cssClassName:"iap-audio-button",collectionAccessor:"audioButtons"});iAP.AudioButton.PLAY_PROGRESS_INDICATOR_INTERVAL=0.3;iAP.AudioButton.WEDGE_MAX_ALPHA=1;iAP.AudioButton.WEDGE_MIN_ALPHA=0;iAP.AudioButton.prototype.init=function(a){this._wedgeColor="#2e7dfb";this._buttonColor="rgba(255, 255, 255, 0.5)";this._highlightedButtonColor="rgba(150, 150, 150, 0.5)";this._highlighted=false;this._playIconColor="rgba(0,0,0,0.65)";this.callSuper(a);this.setupButtonElements();this.addEventListener(iAd.View.TOUCH_DOWN_EVENT,this,false);this.addEventListener(iAd.View.TOUCH_DRAG_ENTER_EVENT,this,false);this.addEventListener(iAd.View.TOUCH_DRAG_EXIT_EVENT,this,false);this.addEventListener(iAd.View.ACTIVATE_EVENT,this,false);this.addEventListener(iAd.View.TOUCH_CANCEL_EVENT,this,false);this.userInteractionEnabled=true};iAP.AudioButton.prototype.layerWasCreated=function(){if(!this.layer.getAttribute("role")){this.layer.setAttribute("role","button")}this.callSuper()};iAP.AudioButton.prototype.setSize=function(a){this.callSuper(a);this.updateSize()};iAP.AudioButton.prototype.setButtonColor=function(a){if(this._buttonColor==a){return}this._buttonColor=a;this.updateButtonBackgroundColor()};iAP.AudioButton.prototype.setHighlightedButtonColor=function(a){if(this._highlightedButtonColor==a){return}this._highlightedButtonColor=a;this.updateButtonBackgroundColor()};iAP.AudioButton.prototype.setPlayIconColor=function(a){if(this._playIconColor==a){return}this._playIconColor=a;this.drawStateIcon()};iAP.AudioButton.prototype.setWedgeColor=function(a){if(this._wedgeColor==a){return}this._wedgeColor=a;if(this.loadingAnimator){this.loadingAnimator.wedgeColor=a}if(this.playProgress){this.playProgress.wedgeColor=a}};iAP.AudioButton.prototype.setHighlighted=function(a){if(a==this._highlighted){return}this._highlighted=a;this.layer.toggleClassName("ad-highlighted",a);this.updateButtonBackgroundColor()};iAP.AudioButton.prototype.updateButtonBackgroundColor=function(){if(this.playControlColor){this.playControlColor.style.backgroundColor=this.highlighted?this.highlightedButtonColor:this.buttonColor}};iAP.AudioButton.prototype.setupButtonElements=function(){this.canvasElement=document.createElement("canvas");this.canvasElement.addClassName("iap-loading-canvas");this.playCanvasElement=document.createElement("canvas");this.playCanvasElement.addClassName("iap-play-progress-canvas");this.playControlColor=document.createElement("div");this.playControlColor.addClassName("iap-play-control-color");this.playControl=document.createElement("div");this.playControl.addClassName("iap-play-control");this.playControl.appendChild(this.playControlColor);this.playIcon=document.createElement("canvas");this.playIcon.addClassName("iap-playing-icon");this.canvas=this.canvasElement.getContext("2d");this.playCanvas=this.playCanvasElement.getContext("2d");this.loadingAnimator=new iAP.AudioButton.LoadingAnimator(this.canvas,this.wedgeColor);this.playProgress=new iAP.AudioButton.PlayProgressIndicator(this.playCanvas,this.wedgeColor);this.layer.appendChild(this.canvasElement);this.layer.appendChild(this.playCanvasElement);this.layer.appendChild(this.playControl);this.layer.appendChild(this.playIcon);var a=document.createElement("canvas");a.addClassName("iap-audio-button-border");this.layer.appendChild(a);this.updateButtonBackgroundColor(this.buttonColor);this.updateSize()};iAP.AudioButton.prototype.updateSize=function(){var b=this.size.height;var d=this.size.width;var c=window.devicePixelRatio;var e=1/c;var a=d/4;var f=a;this.setLayerStyle({"line-height":b+"px","font-size":b+"px"});this.canvasElement.height=this.playCanvasElement.height=b;this.canvasElement.width=this.playCanvasElement.width=d;this.playIcon.width=this.playIcon.height=d/2;this.playControl.style.width=this.playIcon.width+"px";this.playControl.style.height=this.playIcon.style.height=this.playIcon.height+"px";this.playIcon.style.webkitTransform=this.playControl.style.webkitTransform="translate("+a+"px, "+f+"px)";this.playIcon.height*=c;this.playIcon.width*=c;this.canvasElement.height*=c;this.canvasElement.width*=c;this.playCanvasElement.height*=c;this.playCanvasElement.width*=c;this.playIcon.getContext("2d").scale(e,e);this.canvasElement.getContext("2d").scale(e,e);this.playCanvasElement.getContext("2d").scale(e,e);this.drawStateIcon()};iAP.AudioButton.prototype.drawStateIcon=function(){if(!this.playIcon){return}var i=this.playIcon.getContext("2d");var b=i.canvas.width;var c=i.canvas.height;var f=window.devicePixelRatio;var h=i.canvas.width*f;var g=i.canvas.height*f;var d=h/2;var a=g/2;var e=Math.min(d,a)*0.54;if(!this.inscribedPolygon){this.inscribedPolygon=function(q,s,k,m){if(!this.Pi2){this.Pi2=Math.PI*2}var n=k+1;while(n--){var j=(n===k)?"moveTo":"lineTo";var l=n*this.Pi2/k;l+=Math.PI;if(m){l-=iAd.Number.degreesToRadians(m)}var p=Math.sin(l)*s;var o=Math.cos(l)*s;q[j](p,o)}}}i.clearRect(0,0,h,g);i.save();i.shadowOffsetX=0;i.shadowOffsetY=1;i.shadowBlur=1;i.translate(h/2,g/2);i.beginPath();if(this.isPlaying()){this.inscribedPolygon(i,e,4,45)}else{this.inscribedPolygon(i,e,3,90)}i.fillStyle=this.playIconColor;i.fill();i.restore()};iAP.AudioButton.prototype.handleEvent=function(a){this.callSuper(a);switch(a.type){case iAd.View.TOUCH_DOWN_EVENT:case iAd.View.TOUCH_DRAG_ENTER_EVENT:this.highlighted=true;break;case iAd.View.ACTIVATE_EVENT:this.togglePlayback();case iAd.View.TOUCH_DRAG_EXIT_EVENT:case iAd.View.TOUCH_CANCEL_EVENT:this.highlighted=false;break}};iAP.AudioButton.prototype.mediaPlaybackDidStart=function(a){this.callSuper.apply(this,arguments);this.drawStateIcon()};iAP.AudioButton.prototype.mediaPlaybackDidPause=function(a){this.callSuper.apply(this,arguments);this.playProgress.update(a.time/a.duration);this.drawStateIcon()};iAP.AudioButton.prototype.mediaPlaybackDidEnd=function(a){this.callSuper.apply(this,arguments);a.seekElement(0);this.playProgress.reset();this.playProgress.update(0);this.drawStateIcon()};iAP.AudioButton.prototype.mediaPlaybackDidBeginWaiting=function(a){this.callSuper.apply(this,arguments);this.loadingAnimator.start()};iAP.AudioButton.prototype.mediaPlaybackDidEndWaiting=function(a){this.callSuper.apply(this,arguments);this.loadingAnimator.reset();this.playProgress.update(0)};iAP.AudioButton.prototype.mediaDidUpdateTime=function(b,a){this.callSuper.apply(this,arguments);this.playProgress.update(a/b.duration)};iAP.AudioButton.prototype.mediaDidUnload=function(a){this.callSuper.apply(this,arguments);this.loadingAnimator.reset();this.playProgress.reset();this.drawStateIcon()};iAd.Class({name:"iAP.AudioButton.ProgressIndicator"});iAP.AudioButton.ProgressIndicator.prototype.init=function(a,b){this.canvas=a;this.wedgeColor=b};iAP.AudioButton.ProgressIndicator.prototype.clear=function(){var b=this.canvas;var c=window.devicePixelRatio;var d=b.canvas.width*c;var a=b.canvas.height*c;b.clearRect(0,0,d,a)};iAP.AudioButton.ProgressIndicator.prototype.reset=function(){this.clear()};iAP.AudioButton.ProgressIndicator.prototype.drawArc=function(g,c,d,f){var b=this.canvas;var e=b.canvas.width*window.devicePixelRatio;var a=r=e/2;if(d){r=r*d}b.fillStyle=this.wedgeColor;b.globalAlpha=f||iAP.AudioButton.WEDGE_MAX_ALPHA;b.beginPath();b.moveTo(a,a);b.arc(a,a,r,(Math.PI*3/2)+(Math.PI*2*g),(Math.PI*2*c)+(Math.PI*3/2),false);b.closePath();b.fill();b.globalAlpha=1};iAd.Class({name:"iAP.AudioButton.PlayProgressIndicator",superclass:iAP.AudioButton.ProgressIndicator});iAP.AudioButton.PlayProgressIndicator.prototype.init=function(a,b){this.callSuper.apply(this,arguments);this.playWedges=this.canvas.canvas.width*window.devicePixelRatio*Math.PI};iAP.AudioButton.PlayProgressIndicator.prototype.update=function(a){var b=Math.round(a*this.playWedges)/this.playWedges;if(typeof(this.lastPercent)==="undefined"||this.lastPercent!=b){this.reset();this.drawArc(0,b);this.clearInsideOfPlayProgress();this.lastPercent=b}};iAP.AudioButton.PlayProgressIndicator.prototype.clearInsideOfPlayProgress=function(e){var b=this.canvas;var d=b.canvas.width*window.devicePixelRatio;var a=r=d/2;r=r*0.5;var c=b.globalCompositeOperation;b.globalCompositeOperation="destination-out";b.fillStyle="#000";b.beginPath();b.moveTo(a,a);b.arc(a,a,r,0,Math.PI*2,false);b.closePath();b.fill();b.globalCompositeOperation=c};iAd.Class({name:"iAP.AudioButton.LoadingAnimator",superclass:iAP.AudioButton.ProgressIndicator});iAP.AudioButton.LoadingAnimator.prototype.NUMBER_OF_WEDGES=10;iAP.AudioButton.LoadingAnimator.prototype.WEDGE_SPACING=0.2;iAP.AudioButton.LoadingAnimator.prototype.WEDGE_RADIUS=0.9;iAP.AudioButton.LoadingAnimator.prototype.WEDGE_INNER_RADIUS=0.6;iAP.AudioButton.LoadingAnimator.prototype.start=function(b){this.reset();this.renderLoader();this.canvasAngle=0;var a=this;this.rotateInterval=setInterval(function(){a.rotate()},100)};iAP.AudioButton.LoadingAnimator.prototype.renderLoader=function(){this.clear();var a=1/this.NUMBER_OF_WEDGES;var d=this.WEDGE_SPACING*a;for(var b=0;b<this.NUMBER_OF_WEDGES;b++){var c=((iAP.AudioButton.WEDGE_MAX_ALPHA-iAP.AudioButton.WEDGE_MIN_ALPHA)*(b/this.NUMBER_OF_WEDGES)+iAP.AudioButton.WEDGE_MIN_ALPHA);this.drawArc(b*a,((b+1)*a)-d,this.WEDGE_RADIUS,c)}this.clearInsideOfLoadingWedges();this.cachedLoader=new Image();this.cachedLoader.src=this.canvas.canvas.toDataURL()};iAP.AudioButton.LoadingAnimator.prototype.rotate=function(){this.canvasAngle+=(Math.PI*2*(1/this.NUMBER_OF_WEDGES));if(this.canvasAngle>=Math.PI*2){this.canvasAngle=0}this.renderLoader();var b=this.canvas;this.clear();var d=b.canvas.width*window.devicePixelRatio;var a=b.canvas.height*window.devicePixelRatio;try{b.save();b.translate((d/2),(a/2));b.rotate(this.canvasAngle);b.drawImage(this.cachedLoader,-(d/2),-(a/2),d,a);b.restore()}catch(c){}};iAP.AudioButton.LoadingAnimator.prototype.reset=function(){if(this.rotateInterval){clearInterval(this.rotateInterval);delete this.rotateInterval}this.callSuper()};iAP.AudioButton.LoadingAnimator.prototype.clearInsideOfLoadingWedges=function(e){var b=this.canvas;var d=b.canvas.width*window.devicePixelRatio;var a=r=d/2;r=r*this.WEDGE_INNER_RADIUS;var c=b.globalCompositeOperation;b.globalCompositeOperation="destination-out";b.fillStyle="#000";b.beginPath();b.moveTo(a,a);b.arc(a,a,r,0,Math.PI*2,false);b.closePath();b.fill();b.globalCompositeOperation=c};
/**
*
* Copyright © 2009-2016 Apple Inc.  All rights reserved.
*
**/

iAd.Class({name:"iAd.ActivityIndicatorView",superclass:iAd.View,synthesizedProperties:["activityIndicatorViewStyle","hidesWhenStopped","animating","animationStyle","customIndicatorImage","autoSized"],archivedProperties:["activityIndicatorViewStyle","hidesWhenStopped","animating","animationStyle","customIndicatorImage","autoSized"],cssClassName:"ad-activity-indicator-view"});iAd.ActivityIndicatorView.collectionAccessor="activityIndicatorViews";iAd.ActivityIndicatorView.STYLE_WHITE="ad-white";iAd.ActivityIndicatorView.STYLE_GRAY="ad-gray";iAd.ActivityIndicatorView.STYLE_CUSTOM="ad-custom";iAd.ActivityIndicatorView.ANIMATING_CSS="ad-animating";iAd.ActivityIndicatorView.SEGMENTS_CONTAINER_CSS="ad-segments-container";iAd.ActivityIndicatorView.ANIMATION_STYLE_STEPPED="ad-animation-stepped";iAd.ActivityIndicatorView.ANIMATION_STYLE_SMOOTH="ad-animation-smooth";iAd.ActivityIndicatorView.NUMBER_OF_SEGMENTS=12;iAd.ActivityIndicatorView.OPTIMAL_DIMENSION=74;iAd.ActivityIndicatorView.prototype.init=function(b,a){this._activityIndicatorViewStyle=a||iAd.ActivityIndicatorView.STYLE_WHITE;this._hidesWhenStopped=true;this._autoSized=true;this.segmentsContainer=null;this._animating=false;this._animationStyle="";this.segments=[];this.callSuper(b);this.updateVisibility();this.animationStyle=this._animationStyle||iAd.ActivityIndicatorView.ANIMATION_STYLE_STEPPED;this.updateSegments()};iAd.ActivityIndicatorView.prototype.setupLayer=function(){this.callSuper();if(this.layer.hasClassName(iAd.ActivityIndicatorView.STYLE_WHITE)){this._activityIndicatorViewStyle=iAd.ActivityIndicatorView.STYLE_WHITE}else{if(this.layer.hasClassName(iAd.ActivityIndicatorView.STYLE_GRAY)){this._activityIndicatorViewStyle=iAd.ActivityIndicatorView.STYLE_GRAY}else{if(this.layer.hasClassName(iAd.ActivityIndicatorView.STYLE_CUSTOM)){this._activityIndicatorViewStyle=iAd.ActivityIndicatorView.STYLE_CUSTOM}}}};iAd.ActivityIndicatorView.prototype.layerWasCreated=function(){this.callSuper();this.activityIndicatorViewStyle=this._activityIndicatorViewStyle;this.scaleContainer=document.createElement("div");this.scaleContainer.className="ad-scale-container";this.segmentsContainer=document.createElement("div");this.segmentsContainer.className=iAd.ActivityIndicatorView.SEGMENTS_CONTAINER_CSS;this.scaleContainer.appendChild(this.segmentsContainer);if(this._size.equals(iAd.Size.ZERO_SIZE)){this._size=new iAd.Size(37,37)}if(this._activityIndicatorViewStyle!==iAd.ActivityIndicatorView.STYLE_CUSTOM){this.createSegments()}this.layer.appendChild(this.scaleContainer)};iAd.ActivityIndicatorView.prototype.setSize=function(a){if(a.width!=a.height){a.width=a.height}this.callSuper(a);this.updateSegments()};iAd.ActivityIndicatorView.prototype.setValueForAttribute=function(b,a){switch(a){case"ad-custom-indicator-image":this.customIndicatorImage=iAd.Image.imageForURL(b,this.layerHasCustomAttribute("ad-has-hidpi-version"));break;default:this.callSuper(b,a)}};iAd.ActivityIndicatorView.prototype.setHidesWhenStopped=function(a){this._hidesWhenStopped=a;this.updateVisibility()};iAd.ActivityIndicatorView.prototype.setActivityIndicatorViewStyle=function(a){if(this.layer){this.layer.removeClassName(this._activityIndicatorViewStyle);this.layer.addClassName(a)}this._activityIndicatorViewStyle=a};iAd.ActivityIndicatorView.prototype.setAnimating=function(a){if(this._animating==a){return}this._animating=a;this.layer.toggleClassName(iAd.ActivityIndicatorView.ANIMATING_CSS,a);this.updateVisibility()};iAd.ActivityIndicatorView.prototype.setAnimationStyle=function(a){if(a==this._animationStyle){return}this.layer.removeClassName(this._animationStyle);this.layer.addClassName(a);this._animationStyle=a};iAd.ActivityIndicatorView.prototype.setCustomIndicatorImage=function(a){if(a==null||a.url==null){this._customIndicatorImage=null;this.layer.removeClassName(iAd.ActivityIndicatorView.STYLE_CUSTOM);this.segmentsContainer.style.backgroundImage="";if(!this.segments.length){this.createSegments()}this.updateSegments();return}this._customIndicatorImage=a;if(a.loaded){this.renderImage()}else{a.addPropertyObserver("loaded",this)}};iAd.ActivityIndicatorView.prototype.setAutoSized=function(a){if(a==this._autoSized){return}this._autoSized=a;if(a){this.autoSize()}};iAd.ActivityIndicatorView.prototype.handlePropertyChange=function(b,a){if(a=="loaded"){this.renderImage();this.removePropertyObserver("loaded",this)}};iAd.ActivityIndicatorView.prototype.renderImage=function(){if(this._autoSized){this.autoSize()}this.layer.addClassName(iAd.ActivityIndicatorView.STYLE_CUSTOM);this.segmentsContainer.style.backgroundImage="url("+this._customIndicatorImage.resolvedURL+")";this.segmentsContainer.style.webkitTransformOrigin="";this.scaleContainer.style.webkitTransform="scale(1)"};iAd.ActivityIndicatorView.prototype.autoSize=function(){if(this._customIndicatorImage&&this._customIndicatorImage.loaded){this.size=new iAd.Size(this._customIndicatorImage.width,this._customIndicatorImage.height)}};iAd.ActivityIndicatorView.prototype.updateVisibility=function(){this.hidden=(this._hidesWhenStopped&&!this._animating)};iAd.ActivityIndicatorView.prototype.createSegments=function(){var c=[];var b=iAd.ActivityIndicatorView.NUMBER_OF_SEGMENTS;var a=this.segmentsContainer;while(b--){var d=document.createElement("div");d.style.opacity=Math.max(1-b/10,0.3);a.appendChild(d);c.push(d)}this.segments=c};iAd.ActivityIndicatorView.prototype.updateSegments=function(){if(!this.segments.length||this.layer.hasClassName(iAd.ActivityIndicatorView.STYLE_CUSTOM)){return}var d=this._size.width/iAd.ActivityIndicatorView.OPTIMAL_DIMENSION,l=d<1?iAd.ActivityIndicatorView.OPTIMAL_DIMENSION:this._size.width,m=Math.floor(l/2),h=l/74,b=Math.floor(3*h)*2,k=Math.floor(10*h)*2,c=Math.floor((l-b)/2),j=Math.floor((l-k)/2),e=Math.floor(3*h),a=this.segments.length;angle_increment=360/a;var g;for(var f=0;f<a;f++){g=this.segments[f];g.style.left=c+"px";g.style.top=j+"px";g.style.width=b+"px";g.style.height=k+"px";g.style.webkitBorderRadius=e+"px";g.style.webkitTransform="rotate("+angle_increment*f+"deg) translateY(-"+j+"px)"}this.segmentsContainer.style.webkitTransformOrigin=m+"px "+m+"px";this.scaleContainer.style.webkitTransform=d<1?"scale("+d+")":""};
/**
*
* Copyright © 2009-2016 Apple Inc.  All rights reserved.
*
**/

iAd.Utils.replaceMethod(iAd.ActivityIndicatorView,"setSize",function(a){var b=Math.min(a.width,a.height);this.callOriginal(new iAd.Size(b,b))});
/**
*
* Copyright © 2009-2016 Apple Inc.  All rights reserved.
*
**/

iAd.Class({name:"iAP.PageState",superclass:iAd.Object,synthesizedProperties:["name","size","parentState"]});iAP.PageState.prototype.init=function(){this.callSuper()};iAP.PageState.prototype.isChildOfPageState=function(a){if(!this.parentState){return false}else{return(this.parentState==a||this.parentState.isChildOfPageState(a))}};Object.defineProperty(iAP.PageState,"supportedPageStates",{configurable:true,get:function(){if(!this._supportedPageStates){this._initializePageStates()}return this._supportedPageStates}});Object.defineProperty(iAP.PageState,"pageStateForCurrentDevice",{configurable:true,get:function(){if(!this._pageStateForCurrentDevice){var c,e;if(iAP.Context.IS_SAFARI){c=new iAd.Size(document.body.offsetWidth,document.body.offsetHeight);e=iAd.Size.ZERO_SIZE}else{c=new iAd.Size(window.innerWidth,window.innerHeight);e=new iAd.Size(window.innerHeight,window.innerWidth)}for(var b=0,d=this.supportedPageStates.length;b<d;b++){var a=this.supportedPageStates[b];if(a.size.equals(c)||a.size.equals(e)){this._pageStateForCurrentDevice=a;break}}if(!this._pageStateForCurrentDevice){this._pageStateForCurrentDevice=this.supportedPageStates[0]}}return this._pageStateForCurrentDevice}});Object.defineProperty(iAP.PageState,"validPageStatesForCurrentDevice",{configurable:true,get:function(){if(!this._validPageStatesForCurrentDevice){this._validPageStatesForCurrentDevice=[];var a=this.pageStateForCurrentDevice;while(a){this._validPageStatesForCurrentDevice.unshift(a);a=a.parentState}}return this._validPageStatesForCurrentDevice}});Object.defineProperty(iAP.PageState,"_pageStateInitializationValues",{configurable:true,get:function(){return iAd.RootViewController.sharedRootViewController.configuration.pageStates}});iAP.PageState.pageStateNamed=function(a){if(!this._pageStatesByName){this._initializePageStates()}return this._pageStatesByName[a]};iAP.PageState._initializePageStates=function(){var b=[];var a={};var c=this._pageStateInitializationValues;c.forEach(function(e){var d=new iAP.PageState();d.name=e.name;d.size=new iAd.Size(e.size.width,e.size.height);d.parentState=a[e.parentStateName];a[d.name]=d;b.push(d)});this._supportedPageStates=b;this._pageStatesByName=a};
/**
*
* Copyright © 2009-2016 Apple Inc.  All rights reserved.
*
**/

iAd.Class({name:"iAP.RootViewController",superclass:iAd.RootViewController,mixins:[iAd.EventTarget]});iAP.RootViewController.DID_FINISH_LAUNCHING_EVENT="didFinishLaunching";iAP.RootViewController.WILL_PAUSE_EVENT="adWillPause";iAP.RootViewController.DID_RESUME_EVENT="adDidResume";iAP.RootViewController.WILL_BE_DISMISSED_EVENT="willBeDismissed";iAP.RootViewController.DID_HIDE_EVENT="didHide";iAP.RootViewController.DID_SHOW_EVENT="didShow";iAP.RootViewController.prototype.init=function(a){this.callSuper(a);this.eventTarget=document;if(!iAP.Context.IS_IAD&&this.targetDevice){if(this.targetDevice==="iPad"){iAd.Device.IS_IPAD=true;document.body.addClassName("ad-iPad")}}if(!iAP.Context.IS_IAD_PRODUCER){iAP.PageState.validPageStatesForCurrentDevice.forEach(function(b){document.body.addClassName(b.name)})}this.navigationController.view.clipsToBounds=false;if(window.ad){window.ad.listener=this;this.registerItemsForPurchase(this.iTunesStoreIds)}if(a.videoWifiToCellularMapping){iAd.VideoWifiToCellularMapping=a.videoWifiToCellularMapping}};iAP.RootViewController.prototype.loadView=function(){if(!iAP.Context.IS_IAD_PRODUCER){iAd.RootView.sharedRoot=new iAd.RootView("#root")}this.callSuper();if(iAd.AnalyticsGestureRecognizer){iAd.AnalyticsGestureRecognizer.sharedRecognizer.enabled=true}};iAP.RootViewController.prototype.registerItemsForPurchase=function(c){var a,b;if(c&&typeof(c.map)==="function"&&c.length>0){this.iTunesStoreIds=a=c}else{this.purchaseItemsWereRegistered=false;return false}b=a.map(function(e){var d=parseInt(e,10);return isNaN(d)?1:d});iAd.Store.registerItemsForPurchase(b);this.purchaseItemsWereRegistered=true;return true};iAP.RootViewController.prototype.getNavigationController=function(){var a=this.callSuper();a.backingTransitionController.hidesLoadingViewControllerWithTransition=false;return a};iAP.RootViewController.createRootViewController=function(a){window.addEventListener("DOMContentLoaded",function(){var b=new iAP.RootViewController(a);b.setupEventDelegate();b.createAndDispatchEvent(iAP.RootViewController.DID_FINISH_LAUNCHING_EVENT)});window.addEventListener("bookletclosing",function(){iAd.RootViewController.sharedRootViewController.createAndDispatchEvent(iAP.RootViewController.WILL_BE_DISMISSED_EVENT)});window.addEventListener("hidden",function(){iAd.RootViewController.sharedRootViewController.createAndDispatchEvent(iAP.RootViewController.DID_HIDE_EVENT)});window.addEventListener("shown",function(){iAd.RootViewController.sharedRootViewController.createAndDispatchEvent(iAP.RootViewController.DID_SHOW_EVENT)});iAP.RootViewController.configureViewport()};iAP.RootViewController.prototype.setupEventDelegate=function(){var b=iAP.EventDelegate.viewControllerScriptFunctions[this.configuration.id];if(b){var a=new iAP.EventDelegate(this,this,b);a.processUserScript()}};iAP.RootViewController.prototype.adWillBeDismissed=function(){this.createAndDispatchEvent(iAP.RootViewController.WILL_BE_DISMISSED_EVENT)};iAP.RootViewController.configureViewport=function(){viewportOptions=["width=device-width","minimum-scale=1.0","maximum-scale=1.0","user-scalable=no"];if(!iAP.Context.IS_DESKTOP){viewportOptions.push("shrink-to-fit=no")}var a=document.createElement("meta");a.setAttribute("name","viewport");a.setAttribute("content",viewportOptions.join(","));document.head.appendChild(a);if(!iAP.Context.IS_IAD&&iAP.Context.IS_IOS){var b=document.createElement("meta");b.setAttribute("name","apple-mobile-web-app-capable");b.setAttribute("content","yes");document.head.appendChild(b)}};
/**
*
* Copyright © 2009-2016 Apple Inc.  All rights reserved.
*
**/

iAd.Class({name:"iAP.DrawingEraserAction",superclass:iAP.DrawingBrushAction});
/**
*
* Copyright © 2009-2016 Apple Inc.  All rights reserved.
*
**/

iAd.Class({name:"iAP.LoadingViewController",superclass:iAP.ViewController,synthesizedProperties:["minimumDisplayTime"],archivedProperties:["minimumDisplayTime"]});iAP.LoadingViewController.prototype.init=function(a){this._minimumDisplayTime=0;this.callSuper(a);iAP.LoadingViewController.sharedTransitionController.loadingViewController=this};iAP.LoadingViewController.prototype.setMinimumDisplayTime=function(a){if(a==this._minimumDisplayTime){return}this._minimumDisplayTime=a;iAP.LoadingViewController.sharedTransitionController.loadingViewControllerMinimumDisplayTime=a};iAP.LoadingViewController.prototype.viewWillAppear=function(b){var a=iAP.LoadingViewController.sharedTransitionController.previouslyVisibleViewController;if(a){this.view.size=a.view.size;this.orientation=a.orientation}this.callSuper(b)};iAP.LoadingViewController.prototype.viewDidLoad=function(){this.callSuper();var c=this.contentView.subviews;for(var a=0,b=c.length;a<b;a++){c[a].autoresizingMask=iAd.View.AUTORESIZING_FLEXIBLE_LEFT_MARGIN|iAd.View.AUTORESIZING_FLEXIBLE_RIGHT_MARGIN|iAd.View.AUTORESIZING_FLEXIBLE_TOP_MARGIN|iAd.View.AUTORESIZING_FLEXIBLE_BOTTOM_MARGIN}};Object.defineProperty(iAP.LoadingViewController,"sharedTransitionController",{get:function(){if(!iAP.LoadingViewController.hasOwnProperty("_sharedTransitionController")){iAP.LoadingViewController.sharedTransitionController=iAd.RootViewController.sharedRootViewController.navigationController.backingTransitionController}return iAP.LoadingViewController._sharedTransitionController},set:function(a){iAP.LoadingViewController._sharedTransitionController=a}});;
iAP.EventDelegate.registerViewControllerEventDelegate("Scratchpad",function(){}),iAP.EventDelegate.registerViewEventDelegate("drawing","Scratchpad",function(){}),iAP.EventDelegate.registerViewEventDelegate("clearButton","Scratchpad",function(){this.onViewActivate=function(a){this.viewController.startActionWithSourceView({className:"iAP.DrawingClearAction",delay:0,properties:{confirmBeforeClearing:"false",duration:1e-4,targetViewId:"Scratchpad-drawing"}},this)}}),iAP.EventDelegate.registerViewEventDelegate("object1467355820_flat_icons-graficheria.it-08","Scratchpad",function(){this.onViewActivate=function(a){this.viewController.startActionWithSourceView({className:"iAP.DrawingEraserAction",delay:0,properties:{brushColor:"#000000",brushCompositeOperation:"destination-out",duration:1e-4,targetViewId:"Scratchpad-drawing"}},this)}}),iAP.EventDelegate.registerViewEventDelegate("button","Scratchpad",function(){this.onViewActivate=function(a){this.viewController.startActionWithSourceView({className:"iAP.DrawingBrushAction",delay:0,properties:{brushColor:"#fef30a",brushCompositeOperation:"source-over",duration:1e-4,targetViewId:"Scratchpad-drawing"}},this)}}),iAP.EventDelegate.registerViewEventDelegate("button-1","Scratchpad",function(){this.onViewActivate=function(a){this.viewController.startActionWithSourceView({className:"iAP.DrawingBrushAction",delay:0,properties:{brushColor:"#71ba32",brushCompositeOperation:"source-over",duration:1e-4,targetViewId:"Scratchpad-drawing"}},this)}}),iAP.EventDelegate.registerViewEventDelegate("button-2","Scratchpad",function(){this.onViewActivate=function(a){this.viewController.startActionWithSourceView({className:"iAP.DrawingBrushAction",delay:0,properties:{brushColor:"#50c0ed",brushCompositeOperation:"source-over",duration:1e-4,targetViewId:"Scratchpad-drawing"}},this)}}),iAP.EventDelegate.registerViewEventDelegate("button-3","Scratchpad",function(){this.onViewActivate=function(a){this.viewController.startActionWithSourceView({className:"iAP.DrawingBrushAction",delay:0,properties:{brushColor:"#f06d1a",brushCompositeOperation:"source-over",duration:1e-4,targetViewId:"Scratchpad-drawing"}},this)}}),iAP.EventDelegate.registerViewEventDelegate("button-4","Scratchpad",function(){this.onViewActivate=function(a){this.viewController.startActionWithSourceView({className:"iAP.DrawingBrushAction",delay:0,properties:{brushColor:"#fb0005",brushCompositeOperation:"source-over",duration:1e-4,targetViewId:"Scratchpad-drawing"}},this)}}),iAP.EventDelegate.registerViewEventDelegate("button-5","Scratchpad",function(){this.onViewActivate=function(a){this.viewController.startActionWithSourceView({className:"iAP.DrawingBrushAction",delay:0,properties:{brushColor:"#81511e",brushCompositeOperation:"source-over",duration:1e-4,targetViewId:"Scratchpad-drawing"}},this)}}),iAP.EventDelegate.registerViewEventDelegate("button-6","Scratchpad",function(){this.onViewActivate=function(a){this.viewController.startActionWithSourceView({className:"iAP.DrawingBrushAction",delay:0,properties:{brushColor:"#892f89",brushCompositeOperation:"source-over",duration:1e-4,targetViewId:"Scratchpad-drawing"}},this)}}),iAP.EventDelegate.registerViewEventDelegate("button-7","Scratchpad",function(){this.onViewActivate=function(a){}}),iAP.EventDelegate.registerViewEventDelegate("brush","Scratchpad",function(){this.onViewActivate=function(a){this.viewController.startActionWithSourceView({className:"iAP.DrawingBrushSizeAction",delay:0,properties:{brushSize:"1.87",duration:1e-4,targetViewId:"Scratchpad-drawing"}},this)}}),iAP.EventDelegate.registerViewEventDelegate("brush-1","Scratchpad",function(){this.onViewActivate=function(a){this.viewController.startActionWithSourceView({className:"iAP.DrawingBrushSizeAction",delay:0,properties:{brushSize:"9.91",duration:1e-4,targetViewId:"Scratchpad-drawing"}},this)}}),iAP.EventDelegate.registerViewEventDelegate("brush-2","Scratchpad",function(){this.onViewActivate=function(a){this.viewController.startActionWithSourceView({className:"iAP.DrawingBrushSizeAction",delay:0,properties:{brushSize:"20.28",duration:1e-4,targetViewId:"Scratchpad-drawing"}},this)}}),iAP.EventDelegate.registerViewEventDelegate("object1467355762_OFFice-74","Scratchpad",function(){this.onViewActivate=function(a){this.viewController.startActionWithSourceView({className:"iAP.DrawingBrushAction",delay:0,properties:{brushColor:"#FFFFFF",brushCompositeOperation:"source-over",duration:1e-4,targetViewId:"Scratchpad-drawing"}},this)}});